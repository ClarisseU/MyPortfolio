(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1e3:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.canvas_Point=null,t.canvas_isDrawing=!1,t.circel_Point=null,t.isMoving=!1,t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged=!1,e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(e=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=20*e,this.refs.brushSize.setDefault(20),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",this.moveControlDown),e(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()}},{key:"drawBeauty",value:function(){this.hadchanged=!0;var e={};e.radius=.5*this.brush_Size,e.x=this.canvas_Point.x,e.y=this.canvas_Point.y,Fotor.mainCanvas.fotorEngine.process_blemish(e),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,Fotor.mainCanvas.canvas.requestRenderAll()),e(document).off("mouseup",this.endChangeing)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x,a.y=this.circel_Point.y,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/Fotor.mainCanvas.canvas.viewportTransform[0],r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/Fotor.mainCanvas.canvas.viewportTransform[3],l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_BLEMISH_FIX.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_BLEMISH_FIX_tip,helpTipGif:a(1001),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_BLEMISH_FIX_size),n.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"50",min:"1",default:"20",className:"input-range-grey",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=r}).call(this,a(2),a(0))},1001:function(e,t,a){e.exports=a.p+"images/blemish-fixdc33fdf4ecc3a1e16896d101f42d3c6a.gif"},1002:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),a(152),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=25,t.isMoving=!1,t.selectedColor={},t.presetColors1=["#fdc0aa","#ffa776","#fca490","#fe8484"],t.presetColors2=["#fcb1bf","#cb7c77","#fe77c4","#d85e6f"],t.presetColors3=["#f7e7d7","#c39078","#b0907b","#9e6e57"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(e=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=60*e,this.refs.brushSize.setDefault(60),this.beauty_opacity=25,this.refs.recovered.setDefault(this.beauty_opacity);this.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#fca490"),this.brushPoints=[],this.hadchanged=!1,this.isEraserMode=!1,this.state.colorToolSelectedIndex=0,this.refs.colorGroup1.setIndex(2),this.refs.colorGroup2.setIndex(2),this.refs.colorGroup3.setIndex(2),this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(e){e=null!=e&&e,this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,e)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(!0),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(!1),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(!1),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){247!=this.selectedColor.r&&231!=this.selectedColor.g&&215!=this.selectedColor.b?(Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.blush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)):(Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.highLightBlush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE))}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){this.doApplyHandler()}},{key:"doApplyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)247!=this.selectedColor.r&&231!=this.selectedColor.g&&215!=this.selectedColor.b?Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.blush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1):Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.highLightBlush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_BLUSH.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_BLUSH_tip,helpTipGif:a(1003),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("ul",{ref:"colorSelection",className:"color-selection cells-3 clearfix"},n.createElement("li",{style:{background:"#fca490"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#fe77c4"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#b0907b"},className:"color-selection-item "+(2==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null))),n.createElement("div",{className:"colors-group clearfixr"},n.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors2,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:2==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup3",index:"2",presetColors:this.presetColors3,onClick:this.colorChange.bind(this)}))),n.createElement("div",{className:"clearfix paddingT15"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"1",default:"60",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("span",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"25"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"50",min:"1",default:"25",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),n=e(t.target);n=this.findDomByClass(n,"color-selection-item");var o,i=e(a).index(e(n));switch(this.state.colorToolSelectedIndex=i,this.forceUpdate(),i){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor();break;case 2:o=this.refs.colorGroup3.getColor()}this.colorChange(o)}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1003:function(e,t,a){e.exports=a.p+"images/blushcf35cf766b5152406ecb8b4de0d92a9d.gif"},1004:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.save_canvas=null,t.originalWidth=0,t.originalHeight=0,t.resizeWidth=0,t.hadchanged=!1,t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.forceUpdate(),this.hadchanged&&0!=this.originalWidth&&0!=this.originalHeight&&(Fotor.mainCanvas.resetCanvasSize(this.originalWidth,this.originalHeight),Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!1,!1,!0)),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){this.refs.dropSelectDom.setValue(0),this.originalWidth=Fotor.mainCanvas.canvas.documentWidth,this.originalHeight=Fotor.mainCanvas.canvas.documentHeight}},{key:"afterUnfold",value:function(){Fotor.progressBar.hide()}},{key:"handleSelectChange",value:function(t){this.hadchanged=!0,t=100-t/10,t/=100,this.resizeWidth=Math.ceil(t*this.originalWidth),Fotor.mainCanvas.fotorEngine.process_resize(this.resizeWidth,this.originalHeight),Fotor.mainCanvas.resetCanvasSize(this.resizeWidth,this.originalHeight),Fotor.mainCanvas.canvas.viewportTransform[4]+this.resizeWidth*Fotor.mainCanvas.getZoom()>e("#canvas").width()-20?Fotor.mainCanvas.zoomFit():Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!1,!1,!0)}},{key:"handleSelectChanged",value:function(e){this.handleSelectChange(e),0!=e?(Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())):this.hadchanged=!1}},{key:"getDefaultHistoryData",value:function(){var e={resizeVal:0};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.resizeVal=parseInt(this.refs.dropSelectDom.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.dropSelectDom.setDefault(e.resizeVal),this.handleSelectChange(e.resizeVal)}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),this.hadchanged=!1,Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_WEIGHT.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_WEIGHT_tip,helpTipGif:a(1005),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_WEIGHT_Lost,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"frameSizeSpan"},100),n.createElement("span",null,"%"))),n.createElement(Fotor.ui.InputRangeLevel,{ref:"dropSelectDom",defaultValue:"0",max:"100",min:"0",bindEle:this.refs.frameSizeSpan,className:"input-range-grey",steps:[0,10,20,30,40,50,60,70,80,90,100],onChange:this.handleSelectChange.bind(this),onChanged:this.handleSelectChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(a(72).default);t.default=s}).call(this,a(2),a(0))},1005:function(e,t,a){e.exports=a.p+"images/weight8fe0e9a86bc7a81dfc0e69bc40c46bc0.gif"},1006:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=80,t.isMoving=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.max(10,Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)));this.brush_Size=Math.round(18*e*.01),this.refs.brushSize.setDefault(18),this.beauty_opacity=80,this.refs.recovered.setDefault(this.beauty_opacity),Fotor.mainCanvas.canvas.mouseEnabled=!1}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",this.moveControlDown),e(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}},{key:"drawBeauty",value:function(){this.hadchanged=!0;var e={};e.radius=.5*this.brush_Size,e.points=[this.last_Point,this.canvas_Point],Fotor.mainCanvas.fotorEngine.process_reshape(e,.01*this.beauty_opacity),this.last_Point=this.canvas_Point}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.max(10,Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.01),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),Fotor.mainCanvas.fotorEngine.process_reshape(null,.01*this.beauty_opacity)}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?(Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)):(Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler())}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_RESHAPE.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_RESHAPE_tip,helpTipGif:a(1007),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_size,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"55",min:"2",default:"18",bindEle:this.refs.BrushSizeSpan,onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)})),n.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"80",bindEle:this.refs.RecoveredSpan,className:"input-range-grey",onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1007:function(e,t,a){e.exports=a.p+"images/reshape36b3d243bbb8a52039b79786c8fc8d94.gif"},1008:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0}),a(1009);var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.clone_circel_Point=null,t.canvas_isDrawing=!1,t.brush_opacity=.7,t.beauty_opacity=100,t.isMoving=!1,t.canSetCloneBase=!0,t.offset_x=0,t.offset_y=0,t.chapterImage_0=null,t.chapterImage_1=null,t.chapterImage_0_ready=!1,t.chapterImage_1_ready=!1,t.cloneStep=0,t.isEraserMode=!1;var n=t;return t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t.chapterImage_0=new Image,isSafari||(t.chapterImage_0.crossOrigin="anonymous"),t.chapterImage_0.onLoad=function(){Fotor.mainCanvas.canvas.requestRenderAll()},n.chapterImage_0.src=a(1011),n.chapterImage_0_ready=!0,t.chapterImage_1=new Image,isSafari||(t.chapterImage_1.crossOrigin="anonymous"),t.chapterImage_1.onLoad=function(){Fotor.mainCanvas.canvas.requestRenderAll()},n.chapterImage_1.src=a(1012),n.chapterImage_1_ready=!0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(70*e*.001),this.refs.brushSize.setDefault(70),this.refs.softnes.setDefault(0),this.refs.recovered.setDefault(0),this.cloneStartOrEnd(),this.isEraserMode=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",this.moveControlDown),e(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.isEraserMode&&this.cancelCloneMode(),this.forceUpdate()}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){if(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.isEraserMode){this.last_Point=this.canvas_Point,this.canvas_isDrawing=!0;Fotor.mainCanvas.fotorEngine.refresh_clone({x:0,y:0,dx:0,dy:0})}else this.cloneStep++,3==this.cloneStep&&(this.cloneStep=2),0==this.cloneStep||(1==this.cloneStep?(null==this.clone_circel_Point&&(this.clone_circel_Point={}),this.clone_circel_Point.x=this.canvas_Point.x,this.clone_circel_Point.y=this.canvas_Point.y):2==this.cloneStep&&(this.canvas_isDrawing=!0,this.last_Point=this.canvas_Point,this.canSetCloneBase?(this.canSetCloneBase=!1,this.clone_circel_Point.dx=this.canvas_Point.x,this.clone_circel_Point.dy=this.canvas_Point.y,this.offset_x=this.clone_circel_Point.x-this.clone_circel_Point.dx,this.offset_y=this.clone_circel_Point.y-this.clone_circel_Point.dy,Fotor.mainCanvas.fotorEngine.refresh_clone(this.clone_circel_Point)):Fotor.mainCanvas.fotorEngine.refresh_clone(this.clone_circel_Point),this.drawBeauty()));e(document).on("mouseup",this.endChangeing),Fotor.mainCanvas.canvas.requestRenderAll()}this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);var e={opacity:.5};e.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,e.points=[this.last_Point,this.canvas_Point],this.isEraserMode?e.model="eraser":e.model="lucency",Fotor.mainCanvas.fotorEngine.process_clone_painter(e,this.beauty_opacity),this.last_Point=this.canvas_Point}},{key:"cloneStartOrEnd",value:function(){this.isEraserMode=!1,this.refs.eraseBtn.setDisactive(),this.cloneStep=0,this.offset_x=this.offset_y=0,this.canSetCloneBase=!0,this.clone_circel_Point=null,Fotor.mainCanvas.canvas.requestRenderAll(),this.forceUpdate()}},{key:"cancelCloneMode",value:function(){this.cloneStep=0,this.offset_x=this.offset_y=0,this.canSetCloneBase=!0,this.clone_circel_Point=null,Fotor.mainCanvas.canvas.requestRenderAll(),this.forceUpdate()}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){if(null!=this.clone_circel_Point){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.setLineDash([2,2]),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};1==this.cloneStep?(a.x=this.clone_circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.clone_circel_Point.y*Fotor.mainCanvas.editorCanvasScale):2==this.cloneStep&&(a.x=(this.circel_Point.x+this.offset_x)*Fotor.mainCanvas.editorCanvasScale,a.y=(this.circel_Point.y+this.offset_y)*Fotor.mainCanvas.editorCanvasScale),a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),1==this.cloneStep&&this.chapterImage_1_ready||2==this.cloneStep&&!this.canvas_isDrawing?(t.drawImage(this.chapterImage_0,a.x-7,a.y-9),t.restore()):(t.restore(),t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom,t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore())}t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var n={};n.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,n.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,n.r=.5*this.brush_Size,t.arc(n.x,n.y,n.r,0,2*Math.PI,!0),t.stroke(),1==this.cloneStep&&this.chapterImage_1_ready||2==this.cloneStep&&!this.canvas_isDrawing?t.drawImage(this.chapterImage_1,n.x-7,n.y-9):this.isEraserMode||(t.save(),t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(n.x-5,n.y),t.lineTo(n.x+5,n.y),t.stroke(),t.beginPath(),t.moveTo(n.x,n.y-5),t.lineTo(n.x,n.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){if(this.canvas_isDrawing){this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),3==this.cloneStep&&(this.cloneStep=1);Fotor.mainCanvas.fotorEngine.refresh_clone({x:0,y:0,dx:0,dy:0}),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleSoftnesChange",value:function(e){this.brush_opacity=.7+this.refs.softnes.val()/100*.3}},{key:"handleSoftnesChanged",value:function(e){this.handleSoftnesChange(e)}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=100-this.refs.recovered.val(),Fotor.mainCanvas.fotorEngine.process_clone_painter(null,this.beauty_opacity)}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_CLONE.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_CLONE_tip,helpTipGif:a(1013),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clone-btn "+(0!=this.cloneStep?"active":""),onClick:this.cloneStartOrEnd.bind(this)},Fotor.globalConfig.lang.editor_workspace_beauty_CLONE_btn),n.createElement("div",{className:"clearfix paddingT15"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"185",min:"45",default:"70",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"SoftnesSpan"},"100"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"softnes",max:"100",min:"0",default:"0",bindEle:this.refs.SoftnesSpan,className:"input-range-grey",onChange:this.handleSoftnesChange.bind(this),onChanged:this.handleSoftnesChanged.bind(this)}),n.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_beauty_Fade,n.createElement("span",{className:"pull-right",ref:"RecoveredSpan"},"100")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"0",default:"0",bindEle:this.refs.RecoveredSpan,className:"input-range-grey",onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1009:function(e,t,a){var n=a(1010);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},1010:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"/*-----------------------------------------\n * Base Settings\n * ----------------------------------------*/\n/*-----------------------------------------\n * Layout\n * ----------------------------------------*/\n/*-----------------------------------------\n * Mixin\n * ----------------------------------------*/\n.clone-btn {\n  width: 100%;\n  height: 34px;\n  border: 1px solid #c8c7cd;\n  text-align: center;\n  line-height: 34px;\n  color: #787878; }\n  .clone-btn.active {\n    border-color: #ac975e;\n    background: #ac975e;\n    color: #fff;\n    cursor: pointer; }\n    .clone-btn.active:hover {\n      background: #bda460;\n      border-color: #bda460;\n      color: #fff; }\n    .clone-btn.active:active {\n      background: none;\n      border-color: #c8c7cd;\n      color: #787878; }\n\n.black .clone-btn {\n  border-color: #57575a; }\n  .black .clone-btn.active {\n    border-color: #ac975e; }\n    .black .clone-btn.active:hover {\n      background: #bda460;\n      border-color: #bda460;\n      color: #fff; }\n    .black .clone-btn.active:active {\n      border-color: #57575a; }\n",""])},1011:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzJDRUUwNEExREMxMTFFN0I1OThGNjlDNzgyNDI2MEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzJDRUUwNEIxREMxMTFFN0I1OThGNjlDNzgyNDI2MEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMkNFRTA0ODFEQzExMUU3QjU5OEY2OUM3ODI0MjYwQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMkNFRTA0OTFEQzExMUU3QjU5OEY2OUM3ODI0MjYwQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnia184AAADLSURBVHjaYvj//z8DGlYF4rVA/BGK10LFUNSha1IH4vf/McF7qBxOjWuhCpcBsRgUL4OKrcWn8SNUkRiSmBhU7DOyWiYGcgEOp85FEptPjFM1gPgHVCEHEHNB2d+gcjg1MgPxC6hiCSCWg7IfATEbPo3hUIUHkMT2QsW6cWnUBeJXUEU5SOIWSPFZgKyxFIi/IkmuxpKagpHkQdGSCxL8AhW4BMTTsGhC1nwYqvYd43+wvWDASGwMghVTQyNJgCKNDJRoJFU3I0CAAQD2jRxfTOXRvgAAAABJRU5ErkJggg=="},1012:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjgyN0FCNUMxREMxMTFFN0FBNjVDNDgyQjA0QTlFNjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjgyN0FCNUQxREMxMTFFN0FBNjVDNDgyQjA0QTlFNjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyODI3QUI1QTFEQzExMUU3QUE2NUM0ODJCMDRBOUU2NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyODI3QUI1QjFEQzExMUU3QUE2NUM0ODJCMDRBOUU2NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PudohMMAAAClSURBVHjaYvj//z8DGlYF4rVA/BGK10LFUNSha1IH4vf/McF7qBxOjWv/4wZrkdUygnUjwEcg5mPADr4AMS+Mw8RAJkDXuAeP2l0oPDQ/agDxDyz++waVg6tFt/E2EH/AYtsbIL6Hz8ZwPKHajSs6dIH41X/8oABZYykQf/1PPPgMxLmgeATFDzeJsfEepPE/NeJxEGtkAWJGcjWC0wGJ+hgBAgwAh5JsSXPN7kUAAAAASUVORK5CYII="},1013:function(e,t,a){e.exports=a.p+"images/cloneddf7df4af8b40aae62d8fc6543fc3a48.gif"},1014:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),a(152),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.brush_Size=60,t.beauty_opacity=40,t.isMoving=!1,t.selectedColor=null,t.presetColors0=["#e3b3a9","#c58a7a","#8a424d","#542930"],t.presetColors1=["#eeceb7","#cd9d87","#dd6522","#805b55"],t.presetColors2=["#edc2bb","#ebb3be","#d75a6a","#db8b84"],t.presetColors3=["#a1989d","#93705a","#3d7488","#545649"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){if(this.brush_Size=30,this.refs.brushSize.setDefault(this.brush_Size),this.beauty_opacity=40,this.refs.recovered.setDefault(this.beauty_opacity),!this.selectedColor){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#8a424d")}this.brushPoints=[],this.hadchanged=!1,this.state.colorToolSelectedIndex=0,this.refs.colorGroup1.setIndex(2),this.refs.colorGroup2.setIndex(2),this.refs.colorGroup3.setIndex(2),this.refs.colorGroup4.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this);var t=this;setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(e){e=null!=e&&e,this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,e)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(!0),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(!1),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(!1),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){this.brush_Size=this.refs.brushSize.val(),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeShadow(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeShadow(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_SHADOW.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_SHADOW_tip,helpTipGif:a(1015),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner"},n.createElement("ul",{ref:"colorSelection",className:"color-selection clearfix"},n.createElement("li",{style:{background:"#8a424d"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#dd6522"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#d75a6a"},className:"color-selection-item "+(2==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#3d7488"},className:"color-selection-item "+(3==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null))),n.createElement("div",{className:"colors-group clearfix"},n.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:2==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup3",index:"2",presetColors:this.presetColors2,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:3==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup4",index:"2",presetColors:this.presetColors3,onClick:this.colorChange.bind(this)}))),n.createElement("div",{className:"clearfix paddingT15"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"90",min:"8",default:"30",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"40"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"40",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),n=e(t.target);n=this.findDomByClass(n,"color-selection-item");var o,i=e(a).index(e(n));switch(this.state.colorToolSelectedIndex=i,this.forceUpdate(),i){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor();break;case 2:o=this.refs.colorGroup3.getColor();break;case 3:o=this.refs.colorGroup4.getColor()}this.colorChange(o)}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1015:function(e,t,a){e.exports=a.p+"images/eye-shadow23f6ea34da1a4d764942115f2c264a9e.gif"},1016:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.brush_Size=60,t.beauty_opacity=50,t.isMoving=!1,t.selectedColor={},t.presetColors0=["#fad5bb","#7c4c42","#473835","#1c1817"],t.presetColors1=["#663855","#542930","#424e68","#3c5236"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t.state={colorToolSelectedIndex:0},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(15*e*.001),this.refs.brushSize.setDefault(15),this.beauty_opacity=50,this.refs.recovered.setDefault(this.beauty_opacity);this.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#755153"),this.brushPoints=[],this.hadchanged=!1,this.state.colorToolSelectedIndex=0,this.refs.colorGroup1.setIndex(2),this.refs.colorGroup2.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this);var t=this;setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorItemClick",value:function(t){var a=e(t.target).css("background-color");this.colorChange(a)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){250!=this.selectedColor.r&&213!=this.selectedColor.g&&187!=this.selectedColor.b?Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0):Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.highLightEyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)250!=this.selectedColor.r&&213!=this.selectedColor.g&&187!=this.selectedColor.b?Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1):Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.highLightEyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_LINER.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_LINE_tip,helpTipGif:a(1017),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner"},n.createElement("ul",{ref:"colorSelection",className:"color-selection cells-2 clearfix"},n.createElement("li",{style:{background:"#473835"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#424e68"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null))),n.createElement("div",{className:"colors-group clearfix"},n.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_PencilSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"100",min:"5",default:"15",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"50"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"50",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),n=e(t.target);n=this.findDomByClass(n,"color-selection-item");var o,i=e(a).index(e(n));switch(this.state.colorToolSelectedIndex=i,this.forceUpdate(),i){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor()}this.colorChange(o)}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1017:function(e,t,a){e.exports=a.p+"images/eye-line5b053d928244db7cd849f0d21da78214.gif"},1018:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=80,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),this.beauty_opacity=80,this.refs.recovered.setDefault(this.beauty_opacity),this.brushPoints=[],this.hadchanged=!1,this.isEraserMode=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.7};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.mascara(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.mascara(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_MASCARA.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_MASCARA_tip,helpTipGif:a(1019),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"90",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"80",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1019:function(e,t,a){e.exports=a.p+"images/mascara81c08d863dd421054d805514b3566037.gif"},1020:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=20,t.isMoving=!1,t.selectedColor={},t.presetColors=["#CCA181","#B88D6B","#957A6F","#5A4540"],t.presetColors1=["#C38741","#A3602C","#97604C","#6E3C32"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t.state={colorToolSelectedIndex:0},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),this.beauty_opacity=20,this.refs.recovered.setDefault(this.beauty_opacity);var t=this.refs.colorGroup1.getColor();this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(t),this.brushPoints=[],this.hadchanged=!1,this.state.colorToolSelectedIndex=0,this.refs.colorGroup1.setIndex(2),this.refs.colorGroup2.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorItemClick",value:function(t){var a=e(t.target).css("background-color");this.colorChange(a)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeBrowPencil(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeBrowPencil(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_BROWPENCIL.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_BROWPENCIL_tip,helpTipGif:a(1021),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("ul",{ref:"colorSelection",className:"color-selection cells-2 clearfix"},n.createElement("li",{style:{background:"#957a6f"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#97604c"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null))),n.createElement("div",{className:"colors-group clearfixr"},n.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_PencilSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"20"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"20",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),n=e(t.target);n=this.findDomByClass(n,"color-selection-item");var o,i=e(a).index(e(n));switch(this.state.colorToolSelectedIndex=i,this.forceUpdate(),i){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor()}this.colorChange(o)}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1021:function(e,t,a){e.exports=a.p+"images/eye-browpencil4c9be8c8b1652bb565802c54b4141f97.gif"},1022:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),a(152),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=40,t.isMoving=!1,t.selectedColor={},t.presetColors0=["#64c4ff","#2e4999","#83cb58","#245a2b"],t.presetColors1=["#7b4f00","#6E3C32","#3c2d23","#808080"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),this.beauty_opacity=40,this.refs.recovered.setDefault(this.beauty_opacity);this.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#65c3ff"),this.brushPoints=[],this.hadchanged=!1,this.state.colorToolSelectedIndex=0,this.refs.colorGroup1.setIndex(0),this.refs.colorGroup2.setIndex(0),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this);var t=this;setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYETINT.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYETINT_tip,helpTipGif:a(1023),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("ul",{ref:"colorSelection",className:"color-selection cells-2 clearfix"},n.createElement("li",{style:{background:"#64c4ff"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#7b4f00"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null))),n.createElement("div",{className:"colors-group clearfix"},n.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"0",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"0",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"150",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"40"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"40",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),n=e(t.target);n=this.findDomByClass(n,"color-selection-item");var o,i=e(a).index(e(n));switch(this.state.colorToolSelectedIndex=i,this.forceUpdate(),i){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor()}this.colorChange(o)}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1023:function(e,t,a){e.exports=a.p+"images/eye-tint8633baf4be54a13abfbfccf12a6d68cf.gif"},1024:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=50,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),this.beauty_opacity=50,this.refs.recovered.setDefault(this.beauty_opacity),this.brushPoints=[],this.hadchanged=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyePop(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyePop(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_POP.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_POP_tip,helpTipGif:a(1025),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"100",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"50"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"50",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1025:function(e,t,a){e.exports=a.p+"images/eye-pop35028923da09f27ee38f948a0448e9cf.gif"},1026:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.isMoving=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.endChangeing=t.endChangeing.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this);Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",this.moveControlDown),e(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()}},{key:"drawBeauty",value:function(){this.hadchanged=!0;var e={};e.radius=.5*this.brush_Size,e.x=this.last_Point.x,e.y=this.last_Point.y,Fotor.mainCanvas.fotorEngine.process_redEyeRemove(e),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()),setTimeout((function(){Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}),150)}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,this.last_Point=this.canvas_Point,e(document).on("mouseup",this.endChangeing),this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,Fotor.mainCanvas.canvas.requestRenderAll()),e(document).off("mouseup",this.endChangeing)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_RED_EYE_REMOVE.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_RED_EYE_REMOVE_tip,helpTipGif:a(1027),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_size,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"200",min:"5",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)})),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1027:function(e,t,a){e.exports=a.p+"images/red-eye-remove8465d1f5d6d1cfffa0a43b8f6f3b70f6.gif"},1028:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),a(152),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=30,t.isMoving=!1,t.selectedColor={},t.presetColors0=["#ef6b80","#d46369","#fe5864","#f73558"],t.presetColors1=["#e55d3e","#d74d4b","#cc3d1d","#e03d05"],t.presetColors2=["#d30f27","#b8181a","#9c070d","#a02748"],t.presetColors3=["#ce9482","#cf7c6e","#d68e7b","#805b55"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),this.beauty_opacity=30,this.refs.recovered.setDefault(this.beauty_opacity);this.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#fe5864"),this.brushPoints=[],this.hadchanged=!1,this.state={colorToolSelectedIndex:0},this.refs.colorGroup1.setIndex(2),this.refs.colorGroup2.setIndex(2),this.refs.colorGroup3.setIndex(2),this.refs.colorGroup4.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.lipTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.lipTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_LIP_TINT.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_LIP_TINT_tip,helpTipGif:a(1029),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("ul",{ref:"colorSelection",className:"color-selection clearfix"},n.createElement("li",{style:{background:"#fe5864"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#cc3d1d"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#9c070d"},className:"color-selection-item "+(2==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null)),n.createElement("li",{style:{background:"#d68e7b"},className:"color-selection-item "+(3==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},n.createElement("span",null))),n.createElement("div",{className:"colors-group clearfix"},n.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:2==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup3",index:"2",presetColors:this.presetColors2,onClick:this.colorChange.bind(this)})),n.createElement("div",{className:"clearfix",style:{display:3==this.state.colorToolSelectedIndex?"block":"none"}},n.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup4",index:"2",presetColors:this.presetColors3,onClick:this.colorChange.bind(this)}))),n.createElement("div",{className:"clearfix paddingT15"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"150",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"30"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"30",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),n=e(t.target);n=this.findDomByClass(n,"color-selection-item");var o,i=e(a).index(e(n));switch(this.state.colorToolSelectedIndex=i,this.forceUpdate(),i){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor();break;case 2:o=this.refs.colorGroup3.getColor();break;case 3:o=this.refs.colorGroup4.getColor()}this.colorChange(o)}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1029:function(e,t,a){e.exports=a.p+"images/lip-tint6e0ef9d4ec18ded2c48f511a0fb9c7c8.gif"},1030:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=90,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*e*.001),this.refs.brushSize.setDefault(50),this.beauty_opacity=90,this.refs.recovered.setDefault(this.beauty_opacity),this.brushPoints=[],this.hadchanged=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.teethWhite(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.teethWhite(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_TEETH_WHITENING.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_TEETH_WHITENING_tip,helpTipGif:a(1031),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"150",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"90"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"90",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},1031:function(e,t,a){e.exports=a.p+"images/teetch-whiteningcaa0dfe626b6705d42c30f5ffaa774cb.gif"},1166:function(e,t){function a(){}a._RefID=0,a._isVML=!1,a.checkIE=function(){if("Microsoft Internet Explorer"==navigator.appName){var e=9;-1!=navigator.appVersion.indexOf("MSIE")&&(e=parseFloat(navigator.appVersion.split("MSIE")[1])),e<9&&(a._isVML=!0)}},a.fact=function(e){for(var t=1,a=1;a<=e;a++)t*=a;return t},a.init=function(){if(a.checkIE(),a._isVML){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");for(var e=["fill","stroke","path","textpath"],t=0,n=e.length;t<n;t++)document.createStyleSheet().addRule("v\\:"+e[t],"behavior: url(#default#VML);")}},a.init(),a.jxGraphics=function(e){this.origin=new a.jxPoint(0,0),this.scale=1,this.coordinateSystem="default";var t,n,o,i,s=new Array;e?(t=e).style.overflow="hidden":t=document.body,a._isVML?((o=document.createElement("v:group")).style.position="absolute",o.style.top="0px",o.style.left="0px",t.appendChild(o)):(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.appendChild(n),i=document.createElementNS("http://www.w3.org/2000/svg","defs"),n.appendChild(i),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width=t.style.width,n.style.height=t.style.height),this.getDefs=function(){return i},this.addShape=function(e){this.indexOfShape(e)<0&&s.push(e)},this.removeShape=function(e){var t=this.indexOfShape(e);t>=0&&s.splice(t,1)},this.getType=function(){return"jxGraphics"},this.getDiv=function(){return t},this.getSVG=function(){return n},this.getVML=function(){return o},this.logicalToPhysicalPoint=function(e){return"cartecian"==this.coordinateSystem.toLowerCase()?new a.jxPoint(Math.round(e.x*this.scale+this.origin.x),Math.round(this.origin.y-e.y*this.scale)):new a.jxPoint(Math.round(e.x*this.scale+this.origin.x),Math.round(e.y*this.scale+this.origin.y))},this.draw=function(e){return e.draw(this)},this.remove=function(e){return e.remove(this)},this.redrawAll=function(){for(ind in s)s[ind].draw(this)},this.getShapesCount=function(){return s.length},this.getShape=function(e){return s[e]},this.indexOfShape=function(e){for(var t=-1,a=s.length,n=0;n<a;n++)e==s[n]&&(t=n);return t}},a.jxColor=function(){var e="#000000";switch(arguments.length){case 1:e=arguments[0];break;case 3:var t=arguments[0],a=arguments[1],n=arguments[2];e=jxColor.rgbToHex(t,a,n)}function o(){return"jxColor"}function i(){return e}this.getType=o,this.getValue=i},a.jxColor.rgbToHex=function(e,t,a){return!(e<0||e>255||t<0||t>255||a<0||a>255)&&"#"+function(e,t){var a=e+"";for(;a.length<t;)a="0"+a;return a}((Math.round(a)+256*Math.round(t)+65536*Math.round(e)).toString(16),6)},a.jxColor.hexToRgb=function(e){var t,a,n;return"#"==e.charAt(0)&&(e=e.substring(1,7)),t=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),!(t<0||t>255||a<0||a>255||n<0||n>255)&&new Array(t,a,n)},a.jxFont=function(e,t,a,n,o){this.family=null,this.size=null,this.style=null,this.weight=null,this.variant=null,e&&(this.family=e),n&&(this.weight=n),t&&(this.size=t),a&&(this.style=a),o&&(this.variant=o),this.updateSVG=function(e){this.family?e.setAttribute("font-family",this.family):e.setAttribute("font-family","");this.weight?e.setAttribute("font-weight",this.weight):e.setAttribute("font-weight","");this.size?e.setAttribute("font-size",this.size):e.setAttribute("font-size","");this.style?e.setAttribute("font-style",this.style):e.setAttribute("font-style","");this.variant?e.setAttribute("font-variant",this.variant):e.setAttribute("font-variant","")},this.updateVML=function(e){this.family?e.style.fontFamily="'"+this.family+"'":e.style.fontFamily="";this.weight?e.style.fontWeight=this.weight:e.style.fontWeight="";this.size?e.style.fontSize=this.size:e.style.fontSize="";this.style?e.style.fontStyle=this.style:e.style.fontStyle="";this.variant?e.style.fontVariant=this.variant:e.style.fontVariant=""},this.getType=function(){return"jxFont"}},a.jxFont.updateSVG=function(e){e.setAttribute("font-family",""),e.setAttribute("font-weight",""),e.setAttribute("font-size",""),e.setAttribute("font-style",""),e.setAttribute("font-variant","")},a.jxFont.updateVML=function(e){e.style.fontFamily="",e.style.fontWeight="",e.style.fontSize="",e.style.fontStyle="",e.style.fontVariant=""},a.jxPen=function(e,t,n){this.color=null,this.width=null,this.dashStyle=null,this.color=e||new a.jxColor("#000000"),this.width=t||"1px",n&&(this.dashStyle=n),this.updateSVG=function(e){if(e.setAttribute("stroke",this.color.getValue()),e.setAttribute("stroke-width",this.width),this.dashStyle){var t=parseInt(this.width);switch(this.dashStyle.toLowerCase()){case"shortdash":e.setAttribute("stroke-dasharray",3*t+" "+t);break;case"shortdot":e.setAttribute("stroke-dasharray",t+" "+t);break;case"shortdashdot":e.setAttribute("stroke-dasharray",3*t+" "+t+" "+t+" "+t);break;case"shortdashdotdot":e.setAttribute("stroke-dasharray",3*t+" "+t+" "+t+" "+t+" "+t+" "+t);break;case"dot":e.setAttribute("stroke-dasharray",t+" "+3*t);break;case"dash":e.setAttribute("stroke-dasharray",4*t+" "+3*t);break;case"longdash":e.setAttribute("stroke-dasharray",8*t+" "+3*t);break;case"dashdot":e.setAttribute("stroke-dasharray",4*t+" "+3*t+" "+t+" "+3*t);break;case"longdashdot":e.setAttribute("stroke-dasharray",8*t+" "+3*t+" "+t+" "+3*t);break;case"longdashdotdot":e.setAttribute("stroke-dasharray",8*t+" "+3*t+" "+t+" "+3*t+" "+t+" "+3*t);break;default:e.setAttribute("stroke-dasharray",this.dashStyle)}}},this.updateVML=function(e){e.Stroke.JoinStyle="miter",e.Stroke.MiterLimit="5",e.StrokeColor=this.color.getValue(),e.StrokeWeight=this.width,this.dashStyle&&(e.Stroke.DashStyle=this.dashStyle);0==parseInt(this.width)&&(e.Stroked="False")},this.getType=function(){return"jxPen"}},a.jxBrush=function(e,t){this.color=null,this.fillType=null,this.color2=null,this.angle=null,this.color=e||new a.jxColor("#000000"),this.fillType=t||"solid",this.color2=new a.jxColor("#FFFFFF"),this.updateSVG=function(e,t){var n,o=null;(o=e.getAttribute("fill"))&&("url(#"==o.substr(0,5)?(o=o.substr(5,o.length-6),n=document.getElementById(o)):o=null);if("linear-gradient"==this.fillType||"lin-grad"==this.fillType){var i=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");o?t.replaceChild(i,n):t.appendChild(i);var s=document.createElementNS("http://www.w3.org/2000/svg","stop");i.appendChild(s);var r=document.createElementNS("http://www.w3.org/2000/svg","stop");i.appendChild(r),a._RefID++,i.setAttribute("id","jsDraw2DX_RefID_"+a._RefID),null!=this.angle?i.setAttribute("gradientTransform","rotate("+this.angle+" 0.5 0.5)"):i.setAttribute("gradientTransform","rotate(0 0.5 0.5)"),s.setAttribute("offset","0%"),s.setAttribute("style","stop-color:"+this.color.getValue()+";stop-opacity:1"),r.setAttribute("offset","100%"),r.setAttribute("style","stop-color:"+this.color2.getValue()+";stop-opacity:1"),i.appendChild(s),i.appendChild(r),e.setAttribute("fill","url(#jsDraw2DX_RefID_"+a._RefID+")")}else e.setAttribute("fill",this.color.getValue())},this.updateVML=function(e){e.On="true","solid"==this.fillType?(e.Type="solid",e.Color=this.color.getValue(),e.Color2="",e.Angle=270):(e.Type="gradient",null!=this.angle?e.Angle=270-this.angle:e.Angle=270,e.Color=this.color.getValue(),e.Color2=this.color2.getValue())},this.getType=function(){return"jxBrush"}},a.jxPoint=function(e,t){this.x=e,this.y=t,this.getType=function(){return"jxPoint"}},a.jxLine=function(e,t,n){this.fromPoint=e,this.toPoint=t,this.pen=null;var o,i,s=!0;n&&(this.pen=n),o=a._isVML?document.createElement("v:line"):document.createElementNS("http://www.w3.org/2000/svg","line"),this.getType=function(){return"jxLine"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,n,!1):o.attachEvent&&o.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n;t=e.logicalToPhysicalPoint(this.fromPoint),n=e.logicalToPhysicalPoint(this.toPoint);var r,l,c,h;if(this.pen.color.getValue(),this.pen.width,r=t.x,l=t.y,c=n.x,h=n.y,o.style.display="none",a._isVML){var d=e.getVML();s&&(d.appendChild(o),s=!1),this.pen?this.pen.updateVML(o):o.Stroked="False",o.style.position="absolute",o.From=r+","+l,o.To=c+","+h}else{var u=e.getSVG();s&&(u.appendChild(o),s=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),o.setAttribute("x1",r),o.setAttribute("y1",l),o.setAttribute("x2",c),o.setAttribute("y2",h)}o.style.display="",i&&e!=i&&i.removeShape(this);(i=e).addShape(this)},this.remove=function(){if(i){if(a._isVML)i.getVML().removeChild(o);else i.getSVG().removeChild(o);i.removeShape(this),i=null,s=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}},a.jxRect=function(e,t,n,o,i){this.point=e,this.width=t,this.height=n,this.pen=null,this.brush=null;var s,r,l=!0;o&&(this.pen=o),i&&(this.brush=i),s=a._isVML?document.createElement("v:rect"):document.createElementNS("http://www.w3.org/2000/svg","rect"),this.getType=function(){return"jxRect"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,n,!1):s.attachEvent&&s.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n,o,i;if(t=e.logicalToPhysicalPoint(this.point),n=e.scale,o=t.x,i=t.y,s.style.display="none",a._isVML){var c,h=e.getVML();l&&(h.appendChild(s),l=!1),this.pen?this.pen.updateVML(s):s.Stroked="False",c=s.fill,this.brush?this.brush.updateVML(c):c.On="false",s.style.width=n*this.width,s.style.height=n*this.height,s.style.position="absolute",s.style.top=i,s.style.left=o}else{var d=e.getSVG();l&&(d.appendChild(s),l=!1),this.pen?this.pen.updateSVG(s):s.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(s,e.getDefs()):s.setAttribute("fill","none"),s.setAttribute("x",o),s.setAttribute("y",i),s.setAttribute("width",n*this.width),s.setAttribute("height",n*this.height),s.style.position="absolute"}s.style.display="",r&&e!=r&&r.removeShape(this);(r=e).addShape(this)},this.remove=function(){if(r){if(a._isVML)r.getVML().removeChild(s);else r.getSVG().removeChild(s);r.removeShape(this),r=null,l=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}},a.jxPolyline=function(e,t,n){this.points=e,this.pen=null,this.brush=null;var o,i,s=!0;t&&(this.pen=t),n&&(this.brush=n),o=a._isVML?document.createElement("v:polyline"):document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.getType=function(){return"jxPolyline"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,n,!1):o.attachEvent&&o.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t=new Array,n="";for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);for(ind in t)n=n+t[ind].x+","+t[ind].y+" ";if(o.style.display="none",a._isVML){var r,l=e.getVML();s&&(l.appendChild(o),s=!1),this.pen?this.pen.updateVML(o):o.Stroked="False",r=o.fill,this.brush?this.brush.updateVML(r):r.On="false",o.style.position="absolute",o.Points.Value=n}else{var c=e.getSVG();s&&(c.appendChild(o),s=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(o,e.getDefs()):o.setAttribute("fill","none"),o.style.position="absolute",o.setAttribute("points",n)}o.style.display="",i&&e!=i&&i.removeShape(this);(i=e).addShape(this)},this.remove=function(){if(i){if(a._isVML)i.getVML().removeChild(o);else i.getSVG().removeChild(o);i.removeShape(this),i=null,s=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}},a.jxPolygon=function(e,t,n){this.points=e,this.pen=null,this.brush=null;var o,i,s=!0;t&&(this.pen=t),n&&(this.brush=n),o=a._isVML?document.createElement("v:polyline"):document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.getType=function(){return"jxPolygon"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,n,!1):o.attachEvent&&o.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t=new Array,n="";for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);for(ind in t)n=n+t[ind].x+","+t[ind].y+" ";if(o.style.display="none",a._isVML){n=n+t[0].x+","+t[0].y;var r,l=e.getVML();s&&(l.appendChild(o),s=!1),this.pen?this.pen.updateVML(o):o.Stroked="False",r=o.fill,this.brush?this.brush.updateVML(r):r.On="false",o.style.position="absolute",o.Points.Value=n}else{var c=e.getSVG();s&&(c.appendChild(o),s=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(o,e.getDefs()):o.setAttribute("fill","none"),o.style.position="absolute",o.setAttribute("points",n)}o.style.display="",i&&e!=i&&i.removeShape(this);(i=e).addShape(this)},this.remove=function(){if(i){if(a._isVML)i.getVML().removeChild(o);else i.getSVG().removeChild(o);i.removeShape(this),i=null,s=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}},a.jxCircle=function(e,t,n,o){this.center=e,this.radius=t,this.pen=null,this.brush=null;var i,s,r=!0;n&&(this.pen=n),o&&(this.brush=o),i=a._isVML?document.createElement("v:oval"):document.createElementNS("http://www.w3.org/2000/svg","circle"),this.getType=function(){return"jxCircle"},this.addEventListener=function(e,t){i.addEventListener?i.addEventListener(e,n,!1):i.attachEvent&&i.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n,o,l;if(t=e.logicalToPhysicalPoint(this.center),n=e.scale,o=t.x,l=t.y,i.style.display="none",a._isVML){var c,h=e.getVML();r&&(h.appendChild(i),r=!1),this.pen?this.pen.updateVML(i):i.Stroked="False",c=i.fill,this.brush?this.brush.updateVML(c):c.On="false",i.style.width=n*this.radius*2,i.style.height=n*this.radius*2,i.style.position="absolute",i.style.top=l-n*this.radius,i.style.left=o-n*this.radius}else{var d=e.getSVG();r&&(d.appendChild(i),r=!1),this.pen?this.pen.updateSVG(i):i.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(i,e.getDefs()):i.setAttribute("fill","none"),i.setAttribute("cx",o),i.setAttribute("cy",l),i.setAttribute("r",n*this.radius),i.style.position="absolute"}i.style.display="",s&&e!=s&&s.removeShape(this);(s=e).addShape(this)},this.remove=function(){if(s){if(a._isVML)s.getVML().removeChild(i);else s.getSVG().removeChild(i);s.removeShape(this),s=null,r=!0}},this.show=function(){i.style.display=""},this.hide=function(){i.style.display="none"}},a.jxEllipse=function(e,t,n,o,i){this.center=e,this.width=t,this.height=n,this.pen=null,this.brush=null;var s,r,l=!0;o&&(this.pen=o),i&&(this.brush=i),s=a._isVML?document.createElement("v:oval"):document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.getType=function(){return"jxEllipse"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,n,!1):s.attachEvent&&s.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n,o,i;if(t=e.logicalToPhysicalPoint(this.center),n=e.scale,o=t.x,i=t.y,s.style.display="none",a._isVML){var c,h=e.getVML();l&&(h.appendChild(s),l=!1),this.pen?this.pen.updateVML(s):s.Stroked="False",c=s.fill,this.brush?this.brush.updateVML(c):c.On="false",s.style.width=n*this.width,s.style.height=n*this.height,s.style.position="absolute",s.style.top=i-n*this.height/2,s.style.left=o-n*this.width/2}else{var d=e.getSVG();l&&(d.appendChild(s),l=!1),this.pen?this.pen.updateSVG(s):s.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(s,e.getDefs()):s.setAttribute("fill","none"),s.setAttribute("cx",o),s.setAttribute("cy",i),s.setAttribute("rx",n*this.width/2),s.setAttribute("ry",n*this.height/2),s.style.position="absolute"}s.style.display="",r&&e!=r&&r.removeShape(this);(r=e).addShape(this)},this.remove=function(){if(r){if(a._isVML)r.getVML().removeChild(s);else r.getSVG().removeChild(s);r.removeShape(this),r=null,l=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}},a.jxArc=function(e,t,n,o,i,s,r){this.center=e,this.width=t,this.height=n,this.startAngle=o,this.arcAngle=i,this.pen=null,this.brush=null;var l,c,h=!0;s&&(this.pen=s),r&&(this.brush=r),l=a._isVML?document.createElement("v:arc"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxArc"},this.addEventListener=function(e,t){l.addEventListener?l.addEventListener(e,n,!1):l.attachEvent&&l.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n,s;if(e.logicalToPhysicalPoint(e),t=e.scale,n=this.center.x,s=this.center.y,l.style.display="none",a._isVML){var r,d,u,v,p=e.getVML();h&&(p.appendChild(l),h=!1),v=this.startAngle+this.arcAngle,o=this.startAngle%360,v%=360,f=t*this.width/2,m=t*this.height/2,E=this.startAngle*Math.PI/180,g=f*m/Math.sqrt(m*m*Math.cos(E)*Math.cos(E)+f*f*Math.sin(E)*Math.sin(E)),d=180*Math.asin(g*Math.sin(E)/m)/Math.PI,this.startAngle>270?d=360+d:this.startAngle>90&&(d=180-d),w=v*Math.PI/180,C=f*m/Math.sqrt(m*m*Math.cos(w)*Math.cos(w)+f*f*Math.sin(w)*Math.sin(w)),u=180*Math.asin(C*Math.sin(w)/m)/Math.PI,v>270?u=360+u:v>90&&(u=180-u),this.pen?this.pen.updateVML(l):l.Stroked="False",r=l.fill,this.brush?this.brush.updateVML(r):r.On="false",l.style.position="absolute",l.style.width=t*this.width,l.style.height=t*this.height,l.style.position="absolute",l.style.left=n-t*this.width/2,l.style.top=s-t*this.height/2,d+=90,l.StartAngle=d>360?d%360:d,(u+=90)>360?(d<=360&&(l.StartAngle=d-360),l.EndAngle=u%360):l.EndAngle=u}else{var f,m,g,C,b,y,_,F,E,w;f=t*this.width/2,m=t*this.height/2,E=this.startAngle*Math.PI/180,g=f*m/Math.sqrt(m*m*Math.cos(E)*Math.cos(E)+f*f*Math.sin(E)*Math.sin(E)),b=g*Math.cos(E),_=g*Math.sin(E),b=n+b,_=s+_,w=(o+i)*Math.PI/180,C=f*m/Math.sqrt(m*m*Math.cos(w)*Math.cos(w)+f*f*Math.sin(w)*Math.sin(w)),y=C*Math.cos(w),F=C*Math.sin(w),y=n+y,F=s+F;var A=e.getSVG();h&&(A.appendChild(l),h=!1),this.pen?this.pen.updateSVG(l):l.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(l,e.getDefs()):l.setAttribute("fill","none"),i>180?l.setAttribute("d","M"+b+" "+_+" A"+f+" "+m+" 0 1 1 "+y+" "+F):l.setAttribute("d","M"+b+" "+_+" A"+f+" "+m+" 0 0 1 "+y+" "+F)}l.style.display="",c&&e!=c&&c.removeShape(this);(c=e).addShape(this)},this.remove=function(){if(c){if(a._isVML)c.getVML().removeChild(l);else c.getSVG().removeChild(l);c.removeShape(this),c=null,h=!0}},this.show=function(){l.style.display=""},this.hide=function(){l.style.display="none"}},a.jxArcSector=function(e,t,n,o,i,s,r){this.center=e,this.width=t,this.height=n,this.startAngle=o,this.arcAngle=i,this.pen=null,this.brush=null;var l,c,h=!0;s&&(this.pen=s),r&&(this.brush=r),l=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxArcSector"},this.addEventListener=function(e,t){l.addEventListener?l.addEventListener(e,n,!1):l.attachEvent&&l.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n,o,s,r,d,u,v,p,f,m,g,C,b;if(t=e.logicalToPhysicalPoint(this.center),n=e.scale,o=t.x,s=t.y,r=n*this.width/2,d=n*this.height/2,C=this.startAngle*Math.PI/180,u=r*d/Math.sqrt(d*d*Math.cos(C)*Math.cos(C)+r*r*Math.sin(C)*Math.sin(C)),p=u*Math.cos(C),m=u*Math.sin(C),p=o+p,m=s+m,b=(this.startAngle+this.arcAngle)*Math.PI/180,v=r*d/Math.sqrt(d*d*Math.cos(b)*Math.cos(b)+r*r*Math.sin(b)*Math.sin(b)),f=v*Math.cos(b),g=v*Math.sin(b),f=o+f,g=s+g,l.style.display="none",a._isVML){var y,_,F,E=e.getVML();h&&(E.appendChild(l),h=!1),_=Math.min(g,Math.min(s,m)),F=Math.min(f,Math.min(o,p)),Math.max(g,Math.max(s,m))-_,Math.max(f,Math.max(o,p))-F,this.pen?this.pen.updateVML(l):l.Stroked="False",y=l.fill,this.brush?this.brush.updateVML(y):y.On="false",l.style.position="absolute",l.style.height=1,l.style.width=1,l.CoordSize="1 1",l.Path="M"+o+","+s+" AT"+(o-r)+","+(s-d)+","+(o+r)+","+(s+d)+","+Math.round(f)+","+Math.round(g)+","+Math.round(p)+","+Math.round(m)+" X E"}else{var w=e.getSVG();h&&(w.appendChild(l),h=!1),this.pen?this.pen.updateSVG(l):l.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(l,e.getDefs()):l.setAttribute("fill","none"),i>180?l.setAttribute("d","M"+o+" "+s+" L"+p+" "+m+" A"+r+" "+d+" 0 1 1 "+f+" "+g+" Z"):l.setAttribute("d","M"+o+" "+s+" L"+p+" "+m+" A"+r+" "+d+" 0 0 1 "+f+" "+g+" Z")}l.style.display="",c&&e!=c&&c.removeShape(this);(c=e).addShape(this)},this.remove=function(){if(c){if(a._isVML)c.getVML().removeChild(l);else c.getSVG().removeChild(l);c.removeShape(this),c=null,h=!0}},this.show=function(){l.style.display=""},this.hide=function(){l.style.display="none"}},a.jxCurve=function(e,t,n,o){this.points=e,this.pen=null,this.brush=null,this.tension=1;var s,r,l=!0;t&&(this.pen=t),n&&(this.brush=n),null!=o&&(this.tension=o),s=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxCurve"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,n,!1):s.attachEvent&&s.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var n,o=this.tension,c=new Array,h=new Array,d=new Array;for(i in t)i=parseInt(i),0==i?c[i]=new a.jxPoint(o*(t[1].x-t[0].x)/2,o*(t[1].y-t[0].y)/2):i==t.length-1?c[i]=new a.jxPoint(o*(t[i].x-t[i-1].x)/2,o*(t[i].y-t[i-1].y)/2):c[i]=new a.jxPoint(o*(t[i+1].x-t[i-1].x)/2,o*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),i==t.length-1?(h[i]=new a.jxPoint(t[i].x+c[i].x/3,t[i].y+c[i].y/3),d[i]=new a.jxPoint(t[i].x-c[i].x/3,t[i].y-c[i].y/3)):(h[i]=new a.jxPoint(t[i].x+c[i].x/3,t[i].y+c[i].y/3),d[i]=new a.jxPoint(t[i+1].x-c[i+1].x/3,t[i+1].y-c[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(n="M"+t[i].x+","+t[i].y),i<t.length-1&&(n=n+" C"+Math.round(h[i].x)+","+Math.round(h[i].y)+","+Math.round(d[i].x)+","+Math.round(d[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y));if(s.style.display="none",a._isVML){var u,v=e.getVML();l&&(v.appendChild(s),l=!1),this.pen?this.pen.updateVML(s):s.Stroked="False",u=s.fill,this.brush?this.brush.updateVML(u):u.On="false",n+=" E",s.style.position="absolute",s.style.width=1,s.style.height=1,s.CoordSize="1 1",s.Path=n}else{var p=e.getSVG();l&&(p.appendChild(s),l=!1),this.pen?this.pen.updateSVG(s):s.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(s,e.getDefs()):s.setAttribute("fill","none"),s.setAttribute("d",n)}s.style.display="",r&&e!=r&&r.removeShape(this);(r=e).addShape(this)},this.remove=function(){if(r){if(a._isVML)r.getVML().removeChild(s);else r.getSVG().removeChild(s);r.removeShape(this),r=null,l=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}},a.jxClosedCurve=function(e,t,n,o){this.points=e,this.pen=null,this.brush=null,this.tension=1;var s,r=!0,l=null;t&&(this.pen=t),n&&(this.brush=n),null!=o&&(this.tension=o),l=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxClosedCurve"},this.addEventListener=function(e,t){l.addEventListener?l.addEventListener(e,n,!1):l.attachEvent&&l.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var n,o=t.length-1,c=this.tension,h=new Array,d=new Array,u=new Array;for(i in t)i=parseInt(i),0==i?h[i]=new a.jxPoint(c*(t[1].x-t[o].x)/2,c*(t[1].y-t[o].y)/2):i==t.length-1?h[i]=new a.jxPoint(c*(t[0].x-t[i-1].x)/2,c*(t[0].y-t[i-1].y)/2):h[i]=new a.jxPoint(c*(t[i+1].x-t[i-1].x)/2,c*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),i==t.length-1?(d[i]=new a.jxPoint(t[i].x+h[i].x/3,t[i].y+h[i].y/3),u[i]=new a.jxPoint(t[0].x-h[0].x/3,t[0].y-h[0].y/3)):(d[i]=new a.jxPoint(t[i].x+h[i].x/3,t[i].y+h[i].y/3),u[i]=new a.jxPoint(t[i+1].x-h[i+1].x/3,t[i+1].y-h[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(n="M"+t[i].x+","+t[i].y),i<t.length-1&&(n=n+" C"+Math.round(d[i].x)+","+Math.round(d[i].y)+","+Math.round(u[i].x)+","+Math.round(u[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y)),i==t.length-1&&(n=n+" C"+Math.round(d[i].x)+","+Math.round(d[i].y)+","+Math.round(u[i].x)+","+Math.round(u[i].y)+","+Math.round(t[0].x)+","+Math.round(t[0].y));if(l.style.display="none",a._isVML){var v,p=e.getVML();r&&(p.appendChild(l),r=!1),n+=" E",this.pen?this.pen.updateVML(l):l.Stroked="False",v=l.fill,this.brush?this.brush.updateVML(v):v.On="false",l.style.position="absolute",l.style.width=1,l.style.height=1,l.CoordSize="1 1",l.Path=n}else{var f=e.getSVG();r&&(f.appendChild(l),r=!1),this.pen?this.pen.updateSVG(l):l.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(l,e.getDefs()):l.setAttribute("fill","none"),l.setAttribute("d",n)}l.style.display="",s&&e!=s&&s.removeShape(this);(s=e).addShape(this)},this.remove=function(){if(s){if(a._isVML)s.getVML().removeChild(l);else s.getSVG().removeChild(l);s.removeShape(this),s=null,r=!0}},this.show=function(){l.style.display=""},this.hide=function(){l.style.display="none"}},a.jxBezier=function(e,t,n){this.points=e,this.pen=null,this.brush=null;var o,i,s=!0;t&&(this.pen=t),n&&(this.brush=n),o=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxBezier"},this.addEventListener=function(e,t){o.addEventListener?o.addEventListener(e,n,!1):o.attachEvent&&o.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n=new Array;for(ind in this.points)n[ind]=e.logicalToPhysicalPoint(this.points[ind]);if(n.length>4){var r,l,c,h,d,u=new Array,v=new Array,p=new Array,f=new Array,m=n.length-1,g=10*Math.min(1/Math.abs(n[m].x-n[0].x),1/Math.abs(n[m].y-n[0].y));for(h=0,d=0;d<1;d+=g){for(x=0,y=0,c=0;c<=m;c++)r=Math.pow(d,c)*Math.pow(1-d,m-c)*n[c].x,0==c&&c==m||(r=r*a.fact(m)/a.fact(c)/a.fact(m-c)),x+=r,l=Math.pow(d,c)*Math.pow(1-d,m-c)*n[c].y,0==c&&c==m||(l=l*a.fact(m)/a.fact(c)/a.fact(m-c)),y+=l;f[h]=new a.jxPoint(x,y),h++}for(c in f[h]=new a.jxPoint(n[m].x,n[m].y),n=f,tension=1,n)0==(c=parseInt(c))?u[c]=new a.jxPoint(tension*(n[1].x-n[0].x)/2,tension*(n[1].y-n[0].y)/2):c==n.length-1?u[c]=new a.jxPoint(tension*(n[c].x-n[c-1].x)/2,tension*(n[c].y-n[c-1].y)/2):u[c]=new a.jxPoint(tension*(n[c+1].x-n[c-1].x)/2,tension*(n[c+1].y-n[c-1].y)/2);for(c in n)0==(c=parseInt(c))?(v[c]=new a.jxPoint(n[0].x+u[0].x/3,n[0].y+u[0].y/3),p[c]=new a.jxPoint(n[1].x-u[1].x/3,n[1].y-u[1].y/3)):c==n.length-1?(v[c]=new a.jxPoint(n[c].x+u[c].x/3,n[c].y+u[c].y/3),p[c]=new a.jxPoint(n[c].x-u[c].x/3,n[c].y-u[c].y/3)):(v[c]=new a.jxPoint(n[c].x+u[c].x/3,n[c].y+u[c].y/3),p[c]=new a.jxPoint(n[c+1].x-u[c+1].x/3,n[c+1].y-u[c+1].y/3));for(c in n)0==(c=parseInt(c))&&(t="M"+n[c].x+","+n[c].y),c<n.length-1&&(t=t+" C"+Math.round(v[c].x)+","+Math.round(v[c].y)+","+Math.round(p[c].x)+","+Math.round(p[c].y)+","+Math.round(n[c+1].x)+","+Math.round(n[c+1].y))}else if(4==n.length)t=" M"+n[0].x+","+n[0].y+" C"+n[1].x+","+n[1].y+" "+n[2].x+","+n[2].y+" "+n[3].x+","+n[3].y;else if(3==n.length)if(a._isVML){var C=new a.jxPoint(2/3*n[1].x+1/3*n[0].x,2/3*n[1].y+1/3*n[0].y),b=new a.jxPoint(2/3*n[1].x+1/3*n[2].x,2/3*n[1].y+1/3*n[2].y);t=" M"+n[0].x+","+n[0].y+" C"+Math.round(C.x)+","+Math.round(C.y)+" "+Math.round(b.x)+","+Math.round(b.y)+" "+n[2].x+","+n[2].y}else t=" M"+n[0].x+","+n[0].y+" Q"+n[1].x+","+n[1].y+" "+n[2].x+","+n[2].y;if(o.style.display="none",a._isVML){var _,F=e.getVML();s&&(F.appendChild(o),s=!1),t+=" E",this.pen?this.pen.updateVML(o):o.Stroked="False",_=o.fill,this.brush?this.brush.updateVML(_):_.On="false",o.style.position="absolute",o.style.width=1,o.style.height=1,o.CoordSize="1 1",o.Path=t}else{var E=e.getSVG();s&&(E.appendChild(o),s=!1),this.pen?this.pen.updateSVG(o):o.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(o,e.getDefs()):o.setAttribute("fill","none"),o.setAttribute("d",t)}o.style.display="",i&&e!=i&&i.removeShape(this);(i=e).addShape(this)},this.remove=function(){if(i){if(a._isVML)i.getVML().removeChild(o);else i.getSVG().removeChild(o);i.removeShape(this),i=null,s=!0}},this.show=function(){o.style.display=""},this.hide=function(){o.style.display="none"}},a.jxFunctionGraph=function(e,t,n,o,s){this.fn=e,this.xMin=t,this.xMax=n,this.pen=null,this.brush=null;var r,l,c=!0;o&&(this.pen=o),s&&(this.brush=s),r=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=function(){return"jxFunctionGraph"},this.addEventListener=function(e,t){r.addEventListener?r.addEventListener(e,n,!1):r.attachEvent&&r.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.validate=function(e){e=e.replace(/x/g,1);try{return Math.eval(e),!0}catch(e){return!1}},this.draw=function(o){var s,h=new Array,d=new Array,u=new Array,v=new Array;if(!this.validate(e))return;var p,f,m=0;for(p=t;p<n;p++)f=Math.eval(e.replace(/x/g,p)),h[m]=o.logicalToPhysicalPoint(new a.jxPoint(p,f)),m++;for(i in f=Math.eval(e.replace(/x/g,n)),h[m]=o.logicalToPhysicalPoint(new a.jxPoint(p,f)),m++,tension=1,h)i=parseInt(i),0==i?d[i]=new a.jxPoint(tension*(h[1].x-h[0].x)/2,tension*(h[1].y-h[0].y)/2):i==h.length-1?d[i]=new a.jxPoint(tension*(h[i].x-h[i-1].x)/2,tension*(h[i].y-h[i-1].y)/2):d[i]=new a.jxPoint(tension*(h[i+1].x-h[i-1].x)/2,tension*(h[i+1].y-h[i-1].y)/2);for(i in h)i=parseInt(i),0==i?(u[i]=new a.jxPoint(h[0].x+d[0].x/3,h[0].y+d[0].y/3),v[i]=new a.jxPoint(h[1].x-d[1].x/3,h[1].y-d[1].y/3)):i==h.length-1?(u[i]=new a.jxPoint(h[i].x+d[i].x/3,h[i].y+d[i].y/3),v[i]=new a.jxPoint(h[i].x-d[i].x/3,h[i].y-d[i].y/3)):(u[i]=new a.jxPoint(h[i].x+d[i].x/3,h[i].y+d[i].y/3),v[i]=new a.jxPoint(h[i+1].x-d[i+1].x/3,h[i+1].y-d[i+1].y/3));for(i in h)i=parseInt(i),0==i&&(s="M"+h[i].x+","+h[i].y),i<h.length-1&&(s=s+" C"+Math.round(u[i].x)+","+Math.round(u[i].y)+","+Math.round(v[i].x)+","+Math.round(v[i].y)+","+Math.round(h[i+1].x)+","+Math.round(h[i+1].y));if(r.style.display="none",a._isVML){var g,C=o.getVML();c&&(C.appendChild(r),c=!1),s+=" E",this.pen?this.pen.updateVML(r):r.Stroked="False",g=r.fill,this.brush?this.brush.updateVML(g):g.On="false",r.style.position="absolute",r.style.width=1,r.style.height=1,r.CoordSize="1 1",r.Path=s}else{var b=o.getSVG();c&&(b.appendChild(r),c=!1),this.pen?this.pen.updateSVG(r):r.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(r,o.getDefs()):r.setAttribute("fill","none"),r.setAttribute("d",s)}r.style.display="",l&&o!=l&&l.removeShape(this);(l=o).addShape(this)},this.remove=function(){if(l){if(a._isVML)l.getVML().removeChild(r);else l.getSVG().removeChild(r);l.removeShape(this),l=null,c=!0}},this.show=function(){r.style.display=""},this.hide=function(){r.style.display="none"}},a.jxText=function(e,t,n,o,i,s){this.point=e,this.text=t,this.font=null,this.pen=null,this.brush=null,this.angle=0;var r,l,c=!0;n&&(this.font=n),o&&(this.pen=o),i&&(this.brush=i),s&&(this.angle=s),r=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","text"),this.getType=function(){return"jxText"},this.addEventListener=function(e,t){r.addEventListener?r.addEventListener(e,n,!1):r.attachEvent&&r.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var t,n,o;if(t=e.logicalToPhysicalPoint(this.point),n=t.x,o=t.y,r.style.display="none",a._isVML){var i,s,h,d,u,v,p,f=e.getVML();c&&((h=document.createElement("v:textpath")).On="True",h.style["v-text-align"]="left",r.appendChild(h),f.appendChild(r),c=!1),i=r.fill,h=r.firstChild,this.pen?this.pen.updateVML(r):r.Stroked="False",i=r.fill,this.brush?this.brush.updateVML(i):i.On="false",r.style.position="absolute",r.style.height=1,r.CoordSize="1 1",(s=r.Path).TextPathOk="true",s.v="M"+n+","+o+" L"+(n+100)+","+o+" E",h.String=this.text,this.font?this.font.updateVML(h):jxFont.updateVML(h),r.style.display="",v=r.clientHeight/2*.8,p=this.angle,n=Math.round(n+v*Math.sin(p*Math.PI/180)),o=Math.round(o-v*Math.cos(p*Math.PI/180)),d=Math.round(n+100*Math.cos(p*Math.PI/180)),u=Math.round(o+100*Math.sin(p*Math.PI/180)),r.Path="M"+n+","+o+" L"+d+","+u+" E",r.style.width=1}else{var m=e.getSVG();c&&(m.appendChild(r),c=!1),this.pen?this.pen.updateSVG(r):r.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(r,e.getDefs()):r.setAttribute("fill","none"),this.font?this.font.updateSVG(r):jxFont.updateSVG(r),r.setAttribute("x",n),r.setAttribute("y",o),r.setAttribute("transform","rotate("+this.angle+" "+n+","+o+")"),r.textContent=this.text}r.style.display="",l&&e!=l&&l.removeShape(this);(l=e).addShape(this)},this.remove=function(){if(l){if(a._isVML)l.getVML().removeChild(r);else l.getSVG().removeChild(r);l.removeShape(this),l=null,c=!0}},this.show=function(){r.style.display=""},this.hide=function(){r.style.display="none"}},a.jxImage=function(e,t,n,o,i){this.point=e,this.url=t,this.width=n,this.height=o,this.angle=0;var s,r,l=!0;i&&(this.angle=i),s=a._isVML?document.createElement("v:image"):document.createElementNS("http://www.w3.org/2000/svg","image"),this.getType=function(){return"jxImage"},this.addEventListener=function(e,t){s.addEventListener?s.addEventListener(e,n,!1):s.attachEvent&&s.attachEvent("on"+e,n);var a=this;function n(e){t(e,a)}},this.draw=function(e){var n,o,i,c;if(n=e.logicalToPhysicalPoint(this.point),o=e.scale,i=n.x,c=n.y,s.style.display="none",a._isVML){var h,d,u,v,p,f,m,g,C=this.angle,b=this.angle*Math.PI/180;u=o*this.width,v=o*this.height,h=i,d=c,Math.abs(C)>360&&(C%=360),C<0&&(C=360+C),C>=0&&C<90?(d=c,h=i-v*Math.sin(b)):C>=90&&C<180?(d=c-v*Math.sin(b-Math.PI/2),h=i-(u*Math.sin(b-Math.PI/2)+v*Math.cos(b-Math.PI/2))):C>=180&&C<270?(d=c-(u*Math.sin(b-Math.PI)+v*Math.cos(b-Math.PI)),h=i-u*Math.cos(b-Math.PI)):C>=270&&C<=360&&(h=i,d=c-u*Math.cos(b-1.5*Math.PI)),p=Math.cos(b),f=-Math.sin(b),m=Math.sin(b),g=Math.cos(b);var y=e.getVML();l&&(y.appendChild(s),l=!1),s.style.width=u,s.style.height=v,s.style.position="absolute",s.style.top=d,s.style.left=h,s.style.filter="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+p+",M12="+f+",M21="+m+",M22="+g+") filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale');"}else{var _=e.getSVG();l&&(_.appendChild(s),l=!1),s.setAttribute("x",i),s.setAttribute("y",c),s.setAttribute("height",o*this.height),s.setAttribute("width",o*this.width),s.setAttribute("preserveAspectRatio","none"),s.setAttributeNS("http://www.w3.org/1999/xlink","href",this.url),s.setAttribute("transform","rotate("+this.angle+" "+i+","+c+")")}s.style.display="",r&&e!=r&&r.removeShape(this);(r=e).addShape(this)},this.remove=function(){if(r){if(a._isVML)r.getVML().removeChild(s);else r.getSVG().removeChild(s);r.removeShape(this),r=null,l=!0}},this.show=function(){s.style.display=""},this.hide=function(){s.style.display="none"}},e.exports=a},746:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(0),i=l(o),s=a(154),r=l(a(13));function l(e){return e&&e.__esModule?e:{default:e}}var c=a(850),h=a(910),d=a(976),u=a(995),v=a(777),p=a(778),f=a(764);a(811),window.fx=a(812),Fotor.EngineAction=a(813),window.jsDraw2DX=a(1166);var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){Fotor.routerManager.trigger(r.default.ROUTER_AFTER_ENTER,"editor")}},{key:"render",value:function(){var e=a(6)({displayName:"UserResourcePlane",render:function(){return i.default.createElement("div",{id:"toolbar"},i.default.createElement(f,{notPlug:!0}))}}),t=a(6)({displayName:"StickersList",render:function(){return i.default.createElement("div",{id:"toolbar"},i.default.createElement(p,{data:Fotor.globalConfig.config.toolbar.stickers,api:Fotor.globalConfig.config.api.stickers,designMode:Fotor.globalConfig.designMode,notPlug:!0}))}}),n=a(6)({displayName:"TextList",render:function(){return i.default.createElement("div",{id:"toolbar"},i.default.createElement(v,{notPlug:!0}))}});return i.default.createElement(s.Switch,null,i.default.createElement(s.Route,{path:"/editor/sample/basic(/:subTool)?",component:c}),i.default.createElement(s.Route,{path:"/editor/sample/effect(/:subTool)?",component:h}),i.default.createElement(s.Route,{path:"/editor/sample/border(/:subTool)?",component:d}),i.default.createElement(s.Route,{path:"/editor/sample/beauty(/:subTool)?",component:u}),i.default.createElement(s.Route,{path:"/editor/sample/sticker(/:stickerGroupId)?",component:t}),i.default.createElement(s.Route,{path:"/editor/sample/text",component:n}),i.default.createElement(s.Route,{path:"/editor/sample/upload",component:e}),i.default.createElement(s.Route,{path:"/editor/sample",component:c}),i.default.createElement(s.Route,{path:"/editor/basic(/:subTool)?",component:c}),i.default.createElement(s.Route,{path:"/editor/effect(/:subTool)?",component:h}),i.default.createElement(s.Route,{path:"/editor/border(/:subTool)?",component:d}),i.default.createElement(s.Route,{path:"/editor/beauty(/:subTool)?",component:u}),i.default.createElement(s.Route,{path:"/editor/sticker(/:stickerGroupId)?",component:t}),i.default.createElement(s.Route,{path:"/editor/text",component:n}),i.default.createElement(s.Route,{path:"/editor/upload",component:e}),i.default.createElement(s.Route,{path:"/editor",component:c}))}}]),t}(o.Component);t.default=m,e.exports=t.default},755:function(e,t,a){var n={"./halloweenBtn_0.png":917,"./halloweenBtn_1.png":918,"./halloweenBtn_2.png":919,"./halloweenBtn_3.png":920,"./halloween_0.png":921,"./halloween_1.png":922,"./halloween_2.png":923,"./halloween_3.png":924};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=755},756:function(e,t,a){var n={"./default_01.jpg":930,"./default_02.jpg":931,"./default_03.jpg":932,"./default_04.jpg":933,"./default_05.jpg":934,"./default_06.jpg":935,"./default_07.jpg":936,"./magic_1.jpg":937,"./magic_2.jpg":938,"./magic_3.jpg":939,"./magic_4.jpg":940,"./pressed_01.jpg":941,"./pressed_02.jpg":942,"./pressed_03.jpg":943,"./pressed_04.jpg":944,"./pressed_05.jpg":945,"./pressed_06.jpg":946,"./pressed_07.jpg":947};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=756},773:function(e,t,a){e.exports=a.p+"images/star4x4_01ef32be3ead74eaf53550053f0c89cf1a.png"},774:function(e,t,a){e.exports=a.p+"images/star4x4_05aeffaa06452f3e4518b38aebf65e34ad.png"},775:function(e,t,a){e.exports=a.p+"images/star4x4_04eed4abf27d8e58f334d7c584de06a9eb.png"},776:function(e,t,a){e.exports=a.p+"images/star4x4_032bdb1aec54fddc352ffe7a6f503611cf.png"},804:function(e,t){var a={createNew:function(){var e={_xArray:[],_yArray:[],yArray2:null,_reverseArray:null,add:function(t,a){e._xArray.push(t),e._yArray.push(a),e.yArray2=null,e._reverseArray=null},calculateY:function(t){if(0==e._xArray.length)return t;null==e.yArray2&&e.preCalculate();for(var a=0,n=0,o=e._xArray.length-1;o-n>1;)a=o+n>>1,e._xArray[a]>t?o=a:n=a;var i=e._xArray[o]-e._xArray[n],s=(e._xArray[o]-t)/i,r=(t-e._xArray[n])/i;return s*e._yArray[n]+r*e._yArray[o]+((s*s*s-s)*e.yArray2[n]+(r*r*r-r)*e.yArray2[o])*(i*i)/6},preCalculate:function(){var t,a,n,o,i,s=e._xArray.length,r=new Array(s);for(e.yArray2=new Array(s),r[0]=0,e.yArray2[0]=0,t=1;t<s-1;)a=e._xArray[t+1]-e._xArray[t-1],o=(n=(e._xArray[t]-e._xArray[t-1])/a)*e.yArray2[t-1]+2,e.yArray2[t]=(n-1)/o,i=(e._yArray[t+1]-e._yArray[t])/(e._xArray[t+1]-e._xArray[t])-(e._yArray[t]-e._yArray[t-1])/(e._xArray[t]-e._xArray[t-1]),r[t]=(6*i/a-n*r[t-1])/o,t++;for(e.yArray2[s-1]=0,t=s-2;t>=0;)e.yArray2[t]=e.yArray2[t]*e.yArray2[t+1]+r[t],t--}};return e}};e.exports=a},806:function(e,t,a){(function(t,n,o){var i,s=a(8),r=(i=s)&&i.__esModule?i:{default:i};a(50).default;var l=a(6)({displayName:"WebGLeffectItem",getInitialState:function(){return{beSelected:!1,isDoneEffect:!1,doneEffectImg:null,unFoldFun:null,commondOpacity:100,effectThumbViewResult:0,opacity:0}},componentDidMount:function(){this.props&&!this.state.isDoneEffect&&this.props.doEffect&&Fotor.mainCanvas.effectEngine&&(this.state.isDoneEffect=!0,this.state.doneEffectImg=this.props.thumbImg,this.state.unFoldFun=this.props.unFoldFun,null!=this.props.data.defaultBlend&&null!=this.props.data.defaultBlend?this.state.commondOpacity=parseInt(this.props.data.defaultBlend):this.state.commondOpacity=100,Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.setEffectImg,this.state.commondOpacity,"effect",!0))},handleClick:function(e){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelHandler():(null!=this.props.data.defaultBlend&&null!=this.props.data.defaultBlend?this.state.commondOpacity=parseInt(this.props.data.defaultBlend):this.state.commondOpacity=100,this.refs.intensity.setDefault(this.state.commondOpacity),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect"),Fotor.progressBar.show(!0),this.props.vip&&Fotor.vipResManager.setEditorWaterMark());var t=!this.state.beSelected;this.setState({beSelected:t}),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE);var a=this;setTimeout((function(){t?a.scrollerFix():a.scrollerUpFix()}),300)},handleIntensityValueChange:function(e){this.state.commondOpacity=this.refs.intensity.val(),this.refs.IntensitySpan&&t(this.refs.IntensitySpan).html(this.state.commondOpacity),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect")},handleIntensityValueChanged:function(e){this.handleIntensityValueChange(e)},setEffectImg:function(e){this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var t=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(t)){var a=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,t);this.setState({isDoneEffect:!0,doneEffectImg:a})}},componentWillReceiveProps:function(e){e&&!this.state.isDoneEffect&&e.doEffect&&Fotor.mainCanvas.effectEngine&&(this.state.isDoneEffect=!0,this.state.doneEffectImg=e.thumbImg,this.state.unFoldFun=e.unFoldFun,null!=e.data.defaultBlend&&null!=e.data.defaultBlend?this.state.commondOpacity=parseInt(e.data.defaultBlend):this.state.commondOpacity=100,Fotor.mainCanvas.effectEngine.process_commond(e.data.commond,this.setEffectImg,this.state.commondOpacity,"effect",!0))},updataThumbImage:function(){var e=100;null!=this.props.data.defaultBlend&&null!=this.props.data.defaultBlend&&(e=parseInt(this.props.data.defaultBlend)),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.setEffectImg,e,"effect",!0)},comondCallBack:function(e){Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE),Fotor.progressBar.hide()},applyHandler:function(e){this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler)},afterApplyHandler:function(){this.state.unFoldFun("toBig"),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.applyThumbHandler,this.state.commondOpacity,"effect",!0)},applyThumbHandler:function(e){var t=this;this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var a=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(a)){var o=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,a);Fotor.mainCanvas.effectThumb=o,n(o,(function(e){Fotor.mainCanvas.effectEngine.set_image(e,e.width,e.height,Fotor.mainCanvas.engineFluentSize,null,!0),t.state.unFoldFun("updataThumb"),t.setState({effectThumbViewResult:0,beSelected:!1})}))}else console.log("effect")},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.setState({effectThumbViewResult:0,beSelected:!1}),this.props.vip&&Fotor.vipResManager.resetWaterMark()},render:function(){return null==this.state.doneEffectImg&&null!=this.props.thumbImg&&(this.state.doneEffectImg=this.props.thumbImg),o.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(this.state.beSelected?"active":"")},this.props.data.isVip?o.createElement("span",{className:"vip"}):"",o.createElement(Fotor.ui.Favorite,{type:"effect",inner:this.props.inner,thumb:this.state.doneEffectImg,data:this.props.data,groupId:this.props.effectGroupId}),o.createElement("div",{"data-display":this.props.doEffect},o.createElement("div",{className:"effect-item-img  clearfix",onClick:this.handleClick},o.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[this.props.data.name]?Fotor.globalConfig.lang[this.props.data.name].toUpperCase():"NO KEY: "+this.props.data.name),o.createElement("img",{ref:"itemImg",src:this.state.doneEffectImg,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),o.createElement("div",{className:"effect-item-inner clearfix"},o.createElement("div",{className:"clearfix"},o.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,o.createElement("div",{className:"pull-right"},o.createElement("span",{ref:"IntensitySpan"},"100"),"%")),o.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",default:"100",className:"input-range-grey",bindEle:this.refs.IntensitySpan,onChange:this.handleIntensityValueChange,onChanged:this.handleIntensityValueChanged})),o.createElement("div",{className:"clearfix effect-item-btns paddingT10"},o.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),o.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){var e=this;t(this.refs.itemImg).stop().animate({opacity:1},300,(function(){e.state.opacity=1}))},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),n=t(this.refs.item).offset(),o=t(".toolbar-list").height(),i=t(".toolbar-list").offset(),s=-e.state.topPosition,r=a;if(n.top<80){var l=n.top-i.top-s;e.scrollYTo(l)}else if(n.top+r>o+i.top){l=n.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),n=e.state.topPosition,o=a.realHeight-a.containerHeight;n>o?t(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}});e.exports=l}).call(this,a(2),a(24),a(0))},807:function(e,t,a){e.exports=a.p+"images/en_USfa88a861167af42f27c665da77321644.png"},808:function(e,t,a){(function(t,n){var o,i=a(8),s=(o=i)&&o.__esModule?o:{default:o};a(50).default;var r=a(6)({displayName:"GeneralBorderItem",getInitialState:function(){return{thumbSrc:"",beSelected:!1,unFoldFun:null}},componentDidMount:function(){this.props&&this.props.doEffect&&(this.state.unFoldFun=this.props.unFoldFun)},handleClick:function(e,t){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelHandler():(Fotor.progressBar.show(!0),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,100,"border"),this.props.vip&&Fotor.vipResManager.setEditorWaterMark());var a=!this.state.beSelected;this.setState({beSelected:a});var n=this;setTimeout((function(){a?n.scrollerFix():n.scrollerUpFix()}),300)},comondCallBack:function(){Fotor.progressBar.hide(),Fotor.mainCanvas.trigger(s.default.ENGINELAYER_CHANGE)},componentWillReceiveProps:function(e){var t=this;e&&""==this.state.thumbSrc&&(a.e(3).then(function(){t.state.thumbSrc=a(803)("./"+e.data.thumb+".png"),t.setState({})}.bind(null,a)).catch(a.oe),this.setState({unFoldFun:e.unFoldFun}))},applyHandler:function(e){this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.state.unFoldFun),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.setState({beSelected:!1}),Fotor.vipResManager.resetWaterMark()},render:function(){return t.createElement("div",{ref:"item",className:"effect-item "+(this.state.beSelected?"active active-166":"")},this.props.data.isVip?t.createElement("span",{className:"vip"}):"",t.createElement("div",{className:"effect-item-img border clearfix"},t.createElement(Fotor.ui.Favorite,{type:"border",thumb:this.state.thumbSrc,inner:this.props.inner,data:this.props.data,groupId:this.props.borderGroupId}),t.createElement("div",{"data-display":this.props.doBorder},t.createElement("img",{ref:"itemImg",onClick:this.handleClick,src:this.state.thumbSrc}))),t.createElement("div",{className:"effect-item-inner clearfix"},t.createElement("div",{className:"clearfix effect-item-btns marginT0"},t.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),t.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var t=n(this.refs.item).height(),a=n(this.refs.item).offset(),o=n(".toolbar-list").height(),i=n(".toolbar-list").offset(),s=-e.state.topPosition,r=t;if(a.top<80){var l=a.top-i.top-s;e.scrollYTo(l)}else if(a.top+r>o+i.top){l=a.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,t=e.computeSizes(),a=e.state.topPosition,o=t.realHeight-t.containerHeight;a>o?n(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}});e.exports=r}).call(this,a(0),a(2))},850:function(e,t,a){(function(t,n){var o,i=b(a(851)),s=b(a(852)),r=b(a(857)),l=b(a(858)),c=b(a(859)),h=b(a(860)),d=b(a(866)),u=b(a(867)),v=b(a(868)),p=b(a(872)),f=b(a(7)),m=b(a(8)),g=b(a(16)),C=b(a(760));function b(e){return e&&e.__esModule?e:{default:e}}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(899);var _=a(21).default,F=a(6)((y(o={displayName:"BasicList",mixins:[Fotor.mixin],isMount:!1,getInitialState:function(){return{scroller:null,langChange:!1}},componentDidMount:function(){this.isMount=!0,this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.mainCanvas?this.init():Fotor.app.on(f.default.APP_INIT,this.init)},init:function(){Fotor.mainCanvas.on(m.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.on(m.default.EXIT_EDITOR_MODE,this.update),Fotor.app.on(g.default.LANGUAGE_CHANGE,this.updateLang),this.updateLang()},componentWillUnmount:function(){this.isMount=!1,Fotor.mainCanvas.off(m.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(m.default.EXIT_EDITOR_MODE,this.update),Fotor.app.off(g.default.LANGUAGE_CHANGE,this.updateLang)},updateLang:function(){var e=this;this.isMount&&(this.setState({langChange:!0}),setTimeout((function(){e.isMount&&e.setState({langChange:!1})}),500))},update:function(){this.isMount&&this.forceUpdate()}},"componentWillUnmount",(function(){Fotor.app.off(f.default.APP_INIT,this.init),Fotor.mainCanvas.off(m.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(m.default.EXIT_EDITOR_MODE,this.update),Fotor.app.off(g.default.LANGUAGE_CHANGE,this.updateLang)})),y(o,"handleScroll",(function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200)})),y(o,"render",(function(){return n.createElement("div",{id:"toolbar"},n.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),n.createElement("div",{className:"toolbar-loading"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),n.createElement(C.default,{ref:"helpTip"}),n.createElement("div",{className:"toolbar"},n.createElement("div",{className:"toolbar-list"},n.createElement(_,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},n.createElement(i.default,{toolName:"onetapenhance",scroller:this.state.scrollArea}),n.createElement(s.default,{toolName:"magicwand",scroller:this.state.scrollArea,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip,langChange:this.state.langChange}),n.createElement(h.default,{toolName:"crop",scroller:this.state.scrollArea}),n.createElement(u.default,{toolName:"rotate",scroller:this.state.scrollArea}),n.createElement(r.default,{toolName:"brightness",scroller:this.state.scrollArea}),n.createElement(l.default,{toolName:"fineTune",scroller:this.state.scrollArea}),n.createElement(c.default,{toolName:"color",scroller:this.state.scrollArea}),n.createElement(p.default,{toolName:"vignette",scroller:this.state.scrollArea}),n.createElement(v.default,{toolName:"curves",scroller:this.state.scrollArea}),n.createElement(d.default,{toolName:"resize",scroller:this.state.scrollArea}),!Fotor.plusEditorMode&&!Fotor.frameMode&&n.createElement("a",{className:"basic-hdr basic-hdr_"+FotorUtils.I18N.getLocale(),href:"https://www.fotor.com/app.html#/hdr",target:"_blank"}),n.createElement("div",{style:{height:"50px"}},"")))))})),y(o,"showHelpTip",(function(e,t,a,n){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,n)})),y(o,"hideHelpTip",(function(){this.refs.helpTip&&this.refs.helpTip.hide()})),o));e.exports=F}).call(this,a(2),a(0))},851:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=a(74),r=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.recordOneKeyBeauty=t.recordOneKeyBeauty.bind(t),t.onHistoryUpdataLoad=t.onHistoryUpdataLoad.bind(t),t.doOneKeyBeauty=t.doOneKeyBeauty.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="onetapenhance-1",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"showThisSample",value:function(){this.handleClick()}},{key:"applyHandler",value:function(){Fotor.mainCanvas&&Fotor.mainCanvas.trigger("BASIC_APPLY_COMPLETE")}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix marginT5"},e.createElement(Fotor.ui.Button,{ref:"beautyButton",enable:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode,text:Fotor.globalConfig.lang.editor_workspace_basic_onekeybeauty,onClick:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"editorModePopup",this).call(this)&&(Fotor.hadOneKeyBeautyClick||(Fotor.hadOneKeyBeautyClick=!0,this.refs.beautyButton.used(),Fotor.progressBar.show(!0),null!=Fotor.currentTool&&Fotor.currentTool.isUnfold?Fotor.globalEventDispatcher.trigger(s.default.FOLDALL,this):this.doOneKeyBeauty()))}},{key:"doOneKeyBeauty",value:function(){Fotor.historyManager.hadAddedOnekeyBeauty=!0,Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.onekeybeauty(),!0),Fotor.mainCanvas.applyEditorPic(this.recordOneKeyBeauty),Fotor.progressBar.hide()}},{key:"recordOneKeyBeauty",value:function(){Fotor.historyManager.on("historyUpdate",this.onHistoryUpdataLoad)}},{key:"componentDidMount",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this).call(this),this.onHistoryUpdataLoad(),Fotor.hadOneKeyBeautyClick&&Fotor.historyManager.on("historyUpdate",this.onHistoryUpdataLoad)}},{key:"componentWillUnmount",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUnmount",this).call(this),Fotor.historyManager.off("historyUpdate",this.onHistoryUpdataLoad)}},{key:"onHistoryUpdataLoad",value:function(e){var t=Fotor.historyManager.readStep(Fotor.historyManager.currentStep);t&&t.hadOnekeyBeauty?(Fotor.historyManager.hadAddedOnekeyBeauty=!0,Fotor.hadOneKeyBeautyClick=!0,this.refs.beautyButton.used()):(Fotor.historyManager.hadAddedOnekeyBeauty=!1,Fotor.hadOneKeyBeautyClick=!1,this.refs.beautyButton.unused())}}]),a}(i.default);t.default=r}).call(this,a(0))},852:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0}),a(853);var s=a(72),r=a(8),l=function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.isKeepMode=!0,t.canvas_isDrawing=!1,t.isMoving=!1,t.isEraserMode=!1,t.brushPoints=[],t.isPreview=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="basic",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){Fotor.progressBar.hide(),this.brushPoints=[],this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.beautyCanvasEle.css("opacity","1"),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),setTimeout((function(){Fotor.mainCanvas.fotorEngine.clean()}),200),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=1;Fotor.mainCanvas.canvas.documentWidth<70||Fotor.mainCanvas.canvas.documentHeight<70?e=.5:Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(e=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,.5)),this.brush_Size=15*e,this.refs.brushSize.setDefault(15),this.refs.featheringEle.setDefault(0),this.refs.cropCheckbox.setSelect(!1),this.isKeepMode=!0,this.refreshBtnUI(),this.brushPoints=[],this.hadchanged=!1,this.isEraserMode=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(!1,!1),Fotor.mainCanvas.beautyCanvasEle.css("opacity","0.6"),Fotor.mainCanvas.fotorEngine.process_matting(!0),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(e){if(e=null!=e&&e,this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,e)){var t=1;t=this.isEraserMode?3:this.isKeepMode?1:2,Fotor.mainCanvas.fotorEngine.process_matting_painter(t,[this.last_Point,this.canvas_Point],this.brush_Size,!1),null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point}}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",a.isKeepMode=this.isKeepMode,this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(!0),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(!1),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),this.isEraserMode?t.strokeStyle="#ffffff":this.isKeepMode?(t.strokeStyle="rgba(0,255,132,1)",t.fillStyle="rgba(0,255,132,1)"):(t.strokeStyle="rgba(255,0,54,1)",t.fillStyle="rgba(255,0,54,1)"),t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),this.isEraserMode||t.fill(),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.8)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(!1),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth<70||Fotor.mainCanvas.canvas.documentHeight<70?t=.5:Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,.5)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleFeatheringValueChange",value:function(e){Fotor.mainCanvas.beautyCanvasEle.css("opacity","0"),Fotor.mainCanvas.fotorEngine.process_matting(!1,this.refs.featheringEle.val(),!1)}},{key:"handleFeatheringValueChanged",value:function(e){Fotor.mainCanvas.beautyCanvasEle.css("opacity","0.6"),Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1)}},{key:"handleCheckboxClick",value:function(e){Fotor.mainCanvas.fotorEngine.set_matting_crop(this.refs.cropCheckbox.isSelected())}},{key:"handleStartPreview",value:function(e){this.isPreview=!0,Fotor.mainCanvas.beautyCanvasEle.css("opacity","0"),Fotor.mainCanvas.fotorEngine.process_matting(!1,this.refs.featheringEle.val(),this.refs.cropCheckbox.isSelected())}},{key:"handleStopPreview",value:function(e){this.isPreview&&(Fotor.mainCanvas.beautyCanvasEle.css("opacity","0.6"),Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1))}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),Fotor.mainCanvas.fotorEngine.clean_matting_painter(),t)this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.process_rule());else if(a>0){this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,null,a);for(var o=0;o<a;o++)"eraser"==e.brushPoints[o].model?Fotor.mainCanvas.fotorEngine.process_matting_painter(3,e.brushPoints[o].points,e.brushPoints[o].size,!1):"lucency"==e.brushPoints[o].model&&(e.brushPoints[o].isKeepMode?Fotor.mainCanvas.fotorEngine.process_matting_painter(1,e.brushPoints[o].points,e.brushPoints[o].size,!1):Fotor.mainCanvas.fotorEngine.process_matting_painter(2,e.brushPoints[o].points,e.brushPoints[o].size,!1)),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1)}}},{key:"handleKeepLine",value:function(){this.isKeepMode=!0,this.refreshBtnUI(),this.isEraserMode&&(this.isEraserMode=!1,this.refs.erase.setDisactive()),this.forceUpdate(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRemoveLine",value:function(){this.isKeepMode=!1,this.refreshBtnUI(),this.isEraserMode&&(this.isEraserMode=!1,this.refs.erase.setDisactive()),this.forceUpdate(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"refreshBtnUI",value:function(){this.isKeepMode?(e(this.refs.keepLine).hasClass("active")||e(this.refs.keepLine).addClass("active"),e(this.refs.removeLine).hasClass("active")&&e(this.refs.removeLine).removeClass("active")):(e(this.refs.keepLine).hasClass("active")&&e(this.refs.keepLine).removeClass("active"),e(this.refs.removeLine).hasClass("active")||e(this.refs.removeLine).addClass("active"))}},{key:"applyHandler",value:function(){Fotor.progressBar.show(!0);Fotor.mainCanvas.saveExportFormat=Fotor.mainCanvas.editorExportFormat="png",this.doApplyHandler()}},{key:"doApplyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold),Fotor.mainCanvas.resetCanvasSize(Fotor.mainCanvas.fotorEngine.get_canvas().width,Fotor.mainCanvas.fotorEngine.get_canvas().height),FotorAnalytic.pageView("/editor/basic/magicWandTool",Fotor.routerManager.getToolPath())}else this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix marginT10"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:"title-drop-no-margin-top",autoActive:!1,isEditor:!0,vip:!0,toolName:"magicwand",text:Fotor.globalConfig.lang.editor_workspace_basic_magicwand.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_basic_magicwand_tip,helpTipGif:a(856),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",null,Fotor.globalConfig.lang.editor_workspace_basic_magicwand_label),n.createElement("div",{className:"marginT10 magicWandButton active",ref:"keepLine",onClick:this.handleKeepLine.bind(this)},n.createElement("span",{className:"magic-wend-retain pull-right"}),n.createElement("div",{className:"text"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_btn_keep)),n.createElement("div",{className:"magicWandButton",ref:"removeLine",onClick:this.handleRemoveLine.bind(this)},n.createElement("span",{className:"magic-wend-remove pull-right"}),n.createElement("div",{className:"text"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_btn_remove))),n.createElement("div",{className:"clearfix paddingT30"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_basic_magicwand_brushsize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"60",min:"1",default:"10",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT20 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_feathering,n.createElement("span",{className:"pull-right",ref:"featheringSpanEle"},"0")),n.createElement(Fotor.ui.InputRange,{ref:"featheringEle",max:"100",min:"0",default:"0",bindEle:this.refs.featheringSpanEle,className:"input-range-grey",onChange:this.handleFeatheringValueChange.bind(this),onChanged:this.handleFeatheringValueChanged.bind(this)}),n.createElement("div",{className:"marginT20"},n.createElement(Fotor.ui.Checkbox,{text:Fotor.globalConfig.lang.editor_workspace_basic_magicwand_crop_smallest_area,ref:"cropCheckbox",isRu:!0,onClick:this.handleCheckboxClick.bind(this)})),n.createElement("div",{className:"marginT20"},n.createElement("div",{className:"magicWandButton",ref:"previewBtn",onMouseDown:this.handleStartPreview.bind(this),onMouseUp:this.handleStopPreview.bind(this),onMouseOut:this.handleStopPreview.bind(this)},n.createElement("span",{className:"magic-wend-preview pull-right"}),n.createElement("div",{className:"text"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_btn_preview))),n.createElement("div",{className:"clearfix editor-folder-btns paddingT15"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default);t.default=l}).call(this,a(2),a(0))},853:function(e,t,a){var n=a(854);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},854:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,'/*-----------------------------------------\n * Base Settings\n * ----------------------------------------*/\n/*-----------------------------------------\n * Layout\n * ----------------------------------------*/\n/*-----------------------------------------\n * Mixin\n * ----------------------------------------*/\n.magicWandButton {\n  position: relative;\n  padding: 10px 20px 10px 20px;\n  font-family: "noto_sansregular", "Microsoft YaHei", sans-serif;\n  font-size: 12px;\n  line-height: 22px;\n  color: #787878;\n  background: transparent;\n  overflow: hidden;\n  cursor: pointer;\n  box-shadow: 0 0 0 1px #d5d5d5 inset;\n  -webkit-box-shadow: 0 0 0 1px #d5d5d5 inset;\n  -moz-box-shadow: 0 0 0 1px #d5d5d5 inset; }\n  .magicWandButton:hover {\n    color: #ac975e;\n    background-color: transparent;\n    box-shadow: 0 0 0 1px #ac975e inset;\n    -webkit-box-shadow: 0 0 0 1px #ac975e inset;\n    -moz-box-shadow: 0 0 0 1px #ac975e inset; }\n    .magicWandButton:hover span.magic-wend-retain {\n      background-position: -414px -40px; }\n    .magicWandButton:hover span.magic-wend-remove {\n      background-position: -448px -40px; }\n  .magicWandButton:active {\n    color: #ffffff;\n    background-color: transparent;\n    box-shadow: 0 0 0 1px #ac975e inset;\n    -webkit-box-shadow: 0 0 0 1px #ac975e inset;\n    -moz-box-shadow: 0 0 0 1px #ac975e inset; }\n    .magicWandButton:active span.magic-wend-retain {\n      background-position: -414px -74px; }\n    .magicWandButton:active span.magic-wend-remove {\n      background-position: -448px -74px; }\n  .magicWandButton.active {\n    cursor: not-allowed;\n    color: #ffffff;\n    background-color: #ac975e;\n    box-shadow: 0 0 0 1px #ac975e inset;\n    -webkit-box-shadow: 0 0 0 1px #ac975e inset;\n    -moz-box-shadow: 0 0 0 1px #ac975e inset; }\n    .magicWandButton.active span.magic-wend-retain {\n      background-position: -414px -74px; }\n    .magicWandButton.active span.magic-wend-remove {\n      background-position: -448px -74px; }\n  .magicWandButton span {\n    width: 22px;\n    height: 22px;\n    display: inline-block;\n    background: url('+n(a(855))+") 0 0 no-repeat;\n    cursor: not-allowed; }\n    .magicWandButton span.magic-wend-retain {\n      background-position: -414px -6px; }\n    .magicWandButton span.magic-wend-remove {\n      background-position: -448px -6px; }\n    .magicWandButton span.magic-wend-preview {\n      background-position: -482px -6px; }\n  .magicWandButton .text {\n    position: relative;\n    width: 100%; }\n",""])},855:function(e,t,a){e.exports=a.p+"images/icon_34x34b60f8161d158340ba87a5f3ba7154a45.png"},856:function(e,t,a){e.exports=a.p+"images/magic-wand6c0f310a6e6ac6451d192e28eed1498a.gif"},857:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=a(149),r=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.brightness=0,t.contrast=1,t.saturation=1,t.sharpness=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"showThisSample",value:function(){this.refs.toolTitle.activate(),this.unfold(),Fotor.routerManager.sampleToolName=void 0,Fotor.routerManager.sampleChildModuleName=void 0}},{key:"handleBrightnessValueChange",value:function(e,t){this.hadchanged=!0,this.brightness=this.refs.brightnessEle.val(),e&&this.updataProcess()}},{key:"handleContrastValueChange",value:function(e,t){this.hadchanged=!0,this.contrast=1+.01*this.refs.contrastEle.val()*.5,e&&this.updataProcess()}},{key:"handleSaturationValueChange",value:function(e,t){this.hadchanged=!0,this.saturation=this.refs.saturationEle.val(),this.saturation<0?this.saturation=this.saturation/100+1:this.saturation>=0&&(this.saturation=this.saturation/50+1),e&&this.updataProcess()}},{key:"handleSharpnessValueChange",value:function(e,t){this.hadchanged=!0,this.sharpness=this.refs.sharpnessEle.val(),e&&this.updataProcess()}},{key:"handleBrightnessValueChanged",value:function(e,t){this.handleBrightnessValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleContrastValueChanged",value:function(e,t){this.handleContrastValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleSaturationValueChanged",value:function(e,t){this.handleSaturationValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleSharpnessValueChanged",value:function(e,t){this.handleSharpnessValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=Fotor.EngineAction.brightness(this.brightness)+Fotor.EngineAction.contrast(this.contrast)+Fotor.EngineAction.saturation(this.saturation)+Fotor.EngineAction.sharpness(this.sharpness);Fotor.mainCanvas.fotorEngine.process_rule(e)}},{key:"getDefaultHistoryData",value:function(){var e={brightness:0,contrast:0,saturation:0,sharpness:0};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brightness=parseInt(this.refs.brightnessEle.val()),e.contrast=parseInt(this.refs.contrastEle.val()),e.saturation=parseInt(this.refs.saturationEle.val()),e.sharpness=parseInt(this.refs.sharpnessEle.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.brightnessEle.setDefault(e.brightness),this.refs.contrastEle.setDefault(e.contrast),this.refs.saturationEle.setDefault(e.saturation),this.refs.sharpnessEle.setDefault(e.sharpness),this.brightness=this.refs.brightnessEle.val(),this.contrast=1+.01*this.refs.contrastEle.val()*.5,this.saturation=this.refs.saturationEle.val(),this.saturation<0?this.saturation=this.saturation/100+1:this.saturation>=0&&(this.saturation=this.saturation/50+1),this.sharpness=this.refs.sharpnessEle.val()}},{key:"initUnfoldUI",value:function(){this.refs.brightnessEle.setDefault(0),this.refs.contrastEle.setDefault(0),this.refs.saturationEle.setDefault(0),this.refs.sharpnessEle.setDefault(0),this.brightness=0,this.contrast=1,this.saturation=1,this.sharpness=0,this.forceUpdate()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterUnfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_basic,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicBrightness,e.createElement("span",{className:"pull-right",ref:"brightnessSpanEle"},"0")),e.createElement(s,{ref:"brightnessEle",max:"100",min:"-100",default:"0",bindEle:this.refs.brightnessSpanEle,className:"input-range-grey",onChange:this.handleBrightnessValueChange.bind(this),onChanged:this.handleBrightnessValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicContrast,e.createElement("span",{className:"pull-right",ref:"contrastSpanEle"},"0")),e.createElement(s,{ref:"contrastEle",max:"100",min:"-100",default:"0",bindEle:this.refs.contrastSpanEle,className:"input-range-grey",onChange:this.handleContrastValueChange.bind(this),onChanged:this.handleContrastValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicSaturation,e.createElement("span",{className:"pull-right",ref:"saturationSpanEle"},"0")),e.createElement(s,{ref:"saturationEle",max:"100",min:"-100",default:"0",bindEle:this.refs.saturationSpanEle,className:"input-range-grey",onChange:this.handleSaturationValueChange.bind(this),onChanged:this.handleSaturationValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicSharpness,e.createElement("span",{className:"pull-right",ref:"sharpnessSpanEle"},"0")),e.createElement(s,{ref:"sharpnessEle",max:"150",min:"-150",default:"0",bindEle:this.refs.sharpnessSpanEle,className:"input-range-grey",onChange:this.handleSharpnessValueChange.bind(this),onChanged:this.handleSharpnessValueChanged.bind(this)}))))}}]),a}(i.default);t.default=r}).call(this,a(0))},858:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.exposure=0,t.hightlights_value=0,t.shodows_value=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"handleExposureValueChange",value:function(e,t){this.hadchanged=!0,this.exposure=.01*this.refs.exposure.val(),e&&this.updataProcess()}},{key:"handleHightlightsValueChange",value:function(e,t){this.hadchanged=!0,this.refs.hightlights.val()<0?this.hightlights_value=.01*-this.refs.hightlights.val():this.hightlights_value=.0066*-this.refs.hightlights.val(),e&&this.updataProcess()}},{key:"handleShodowsValueChange",value:function(e,t){this.hadchanged=!0,this.shodows_value=.01*this.refs.shodows.val(),e&&this.updataProcess()}},{key:"handleExposureValueChanged",value:function(e,t){this.handleExposureValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleHightlightsValueChanged",value:function(e,t){this.handleHightlightsValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleShodowsValueChanged",value:function(e,t){this.handleShodowsValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=Fotor.EngineAction.exposure(this.exposure)+Fotor.EngineAction.hightlightsShodows(this.shodows_value,this.hightlights_value);Fotor.mainCanvas.fotorEngine.process_rule(e)}},{key:"getDefaultHistoryData",value:function(){var e={exposure:0,hightlights:0,shodows:0};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.exposure=parseInt(this.refs.exposure.val()),e.hightlights=parseInt(this.refs.hightlights.val()),e.shodows=parseInt(this.refs.shodows.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.exposure.setDefault(e.exposure),this.refs.hightlights.setDefault(e.hightlights),this.refs.shodows.setDefault(e.shodows),this.exposure=.01*this.refs.exposure.val(),this.refs.hightlights.val()<0?this.hightlights_value=.01*-this.refs.hightlights.val():this.hightlights_value=.0066*-this.refs.hightlights.val(),this.shodows_value=.01*this.refs.shodows.val()}},{key:"initUnfoldUI",value:function(){this.refs.exposure.setDefault(0),this.refs.hightlights.setDefault(0),this.refs.shodows.setDefault(0),this.setState({})}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_finetune,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_finetuneExposure,e.createElement("span",{className:"pull-right",ref:"ExposureSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"exposure",max:"100",min:"-100",default:"0",bindEle:this.refs.ExposureSpan,className:"input-range-grey",onChange:this.handleExposureValueChange.bind(this),onChanged:this.handleExposureValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_finetuneHightlights,e.createElement("span",{className:"pull-right",ref:"HightlightsSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"hightlights",max:"100",min:"-100",default:"0",bindEle:this.refs.HightlightsSpan,className:"input-range-grey",onChange:this.handleHightlightsValueChange.bind(this),onChanged:this.handleHightlightsValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_finetuneShadows,e.createElement("span",{className:"pull-right",ref:"ShodowsSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"shodows",max:"100",min:"-100",default:"0",bindEle:this.refs.ShodowsSpan,className:"input-range-grey",onChange:this.handleShodowsValueChange.bind(this),onChanged:this.handleShodowsValueChanged.bind(this)}))))}}]),a}(i.default));t.default=s}).call(this,a(0))},859:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.temperature_value=0,t.tint_value=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"handleTemperatureChange",value:function(e){this.hadchanged=!0,this.temperature_value=this.refs.temperature.val(),e&&this.updataProcess()}},{key:"handleTintChange",value:function(e){this.hadchanged=!0,this.tint_value=this.refs.tint.val(),e&&this.updataProcess()}},{key:"handleTemperatureChanged",value:function(){this.handleTemperatureChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleTintChanged",value:function(){this.handleTintChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=Fotor.EngineAction.temperature(this.temperature_value)+Fotor.EngineAction.tint(this.tint_value);Fotor.mainCanvas.fotorEngine.process_rule(e)}},{key:"getDefaultHistoryData",value:function(){var e={temperature:0,tint:0};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.temperature=parseInt(this.refs.temperature.val()),e.tint=parseInt(this.refs.tint.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.temperature.setDefault(e.temperature),this.refs.tint.setDefault(e.tint),this.temperature_value=this.refs.temperature.val(),this.tint_value=this.refs.tint.val()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){this.hadchanged&&(Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1),o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.refs.temperature.setDefault(0),this.refs.tint.setDefault(0),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_color,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_colorTemperature,e.createElement("span",{ref:"temperatureSpan",className:"pull-right"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"temperature",type:"range",max:"100",min:"-100",default:"0",bindEle:this.refs.temperatureSpan,className:"input-range-grey",onChange:this.handleTemperatureChange.bind(this),onChanged:this.handleTemperatureChanged.bind(this)}),e.createElement("div",{className:"paddingT10 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_colorTint,e.createElement("span",{ref:"tintSpan",className:"pull-right"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"tint",type:"range",max:"50",min:"-50",default:"0",bindEle:this.refs.tintSpan,className:"input-range-grey",onChange:this.handleTintChange.bind(this),onChanged:this.handleTintChanged.bind(this)}))))}}]),a}(i.default));t.default=s}).call(this,a(0))},860:function(e,t,a){"use strict";(function(e,n,o){var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0}),a(861);var r=a(72),l=a(8),c=(a(149),function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.controlDiv=null,t.cropMoveDiv=null,t.cropMT=null,t.cropBT=null,t.cropLM=null,t.cropRM=null,t.cropTL=null,t.cropBL=null,t.cropLL=null,t.cropRL=null,t.cropX=0,t.cropY=0,t.cropWidth=0,t.cropHeight=0,t.circleBarRadius=4.5,t.event_state={},t.docropX=0,t.docropY=0,t.docropWidth=0,t.docropHeight=0,t.centerMoveX=0,t.centerMoveY=0,t.animationStep=0,t.animationDone=8,t.keepProportions=!1,t.keepRatio=1,t.presetSelect=[{key:"Freeform",val:"Freeform"},{key:0,val:"Sample as original"},{key:1,val:"Square"},{key:1/.618,val:"Golden Radio"},{key:.666667,val:"2 x 3 (iPhone)"},{key:.6,val:"3 x 5"},{key:4/3,val:"4 x 3"},{key:4/6,val:"4 x 6 Postcard"},{key:5/7,val:"5 x 7"},{key:.8,val:"8 x 10"},{key:16/9,val:"16 x 9"},{key:851/315,val:"Facebook Cover Photo"},{key:640/1136,val:"640 x 1136 iPhone 5"},{key:1082/1920,val:"1080 x 1920 iPhone 6 plus"},{key:window.screen.height/window.screen.width,val:"Your Screen"}],t.onContentChange=t.onContentChange.bind(t),t.redrawControlLayer=t.redrawControlLayer.bind(t),t.saveEventState=t.saveEventState.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.doCrop=t.doCrop.bind(t),t.resizeControlDown=t.resizeControlDown.bind(t),t.moving=t.moving.bind(t),t.reSizeing=t.reSizeing.bind(t),t.endChangeing=t.endChangeing.bind(t),t.handlerApply=t.handlerApply.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),i(a,[{key:"isChanged",value:function(){return console.log(this.defaultCropX(),this.defaultCropY(),this.defaultCropWidth(),this.defaultCropHeight()),console.log(this.cropX,this.cropY,this.cropWidth,this.cropHeight),this.cropX!=this.defaultCropX()||this.cropY!=this.defaultCropY()||this.cropWidth!=this.defaultCropWidth()||this.cropHeight!=this.defaultCropHeight()}},{key:"defaultCropWidth",value:function(){return Fotor.mainCanvas.canvas.documentWidth}},{key:"defaultCropHeight",value:function(){return Fotor.mainCanvas.canvas.documentHeight}},{key:"defaultCropX",value:function(){return 0}},{key:"defaultCropY",value:function(){return 0}},{key:"afterCropToolUnfold",value:function(){Fotor.mainCanvas.on(l.default.CONTENT_CHANGE,this.onContentChange)}},{key:"afterCropToolFold",value:function(){Fotor.mainCanvas.off(l.default.CONTENT_CHANGE,this.onContentChange)}},{key:"onContentChange",value:function(){this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"redrawControlLayer",value:function(e,t){var a=Fotor.mainCanvas.canvas.documentWidth,n=Fotor.mainCanvas.canvas.documentHeight;t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),null!=e.viewportTransform&&t.transform.apply(t,e.viewportTransform),t.fillStyle="rgba(102, 102, 102, 0.6)",t.strokeStyle="rgba(255, 255, 255, 0.8)",t.lineWidth=1/e.viewZoom,t.fillRect(0,0,a,n),t.clearRect(this.cropX,this.cropY,this.cropWidth,this.cropHeight),t.setLineDash([5,5]);for(var o=1;o<3;o++)t.beginPath(),t.moveTo(this.cropX+Math.round(this.cropWidth*o/3),this.cropY),t.lineTo(this.cropX+Math.round(this.cropWidth*o/3),this.cropY+this.cropHeight),t.stroke();for(var i=1;i<3;i++)t.beginPath(),t.moveTo(this.cropX,this.cropY+Math.round(this.cropHeight*i/3)),t.lineTo(this.cropX+this.cropWidth,this.cropY+Math.round(this.cropHeight*i/3)),t.stroke();t.restore(),this.refreshDivData()}},{key:"createCropControlDiv",value:function(){null==this.controlDiv&&(this.controlDiv=e("<div class='cropDiv'><div class='moveBar cursor-resize-move' id='cropMoveDiv'></div><div class='lineBar cursor-resize-v' id='cropTL'><span></span></div><div class='lineBar cursor-resize-v' id='cropBL'><span></span></div><div class='lineBar cursor-resize-h' id='cropLL'><span></span></div><div class='lineBar cursor-resize-h' id='cropRL'><span></span></div><div class='circlesBar cursor-resize-l' id='cropLT'></div><div class='circlesBar cursor-resize-r' id='cropRT'></div><div class='circlesBar cursor-resize-r' id='cropLB'></div><div class='circlesBar cursor-resize-l' id='cropRB'></div><div class='squareBar cursor-resize-v' id='cropMT'></div><div class='squareBar cursor-resize-v' id='cropBT'></div><div class='squareBar cursor-resize-h' id='cropLM'></div><div class='squareBar cursor-resize-h' id='cropRM'></div></div>").appendTo(e(".canvas-container")),this.cropMoveDiv=e("#cropMoveDiv"),this.cropMT=e("#cropMT"),this.cropBT=e("#cropBT"),this.cropLM=e("#cropLM"),this.cropRM=e("#cropRM"),this.cropTL=e("#cropTL"),this.cropBL=e("#cropBL"),this.cropLL=e("#cropLL"),this.cropRL=e("#cropRL"),e("#cropMoveDiv").on("mousedown",this.moveControlDown),e("#cropMoveDiv").on("dblclick",this.handlerApply),e(".lineBar").on("mousedown",this.resizeControlDown),e(".squareBar").on("mousedown",this.resizeControlDown),e(".circlesBar").on("mousedown",this.resizeControlDown))}},{key:"removeCropControlDiv",value:function(){if(null!=this.controlDiv){e("#cropMoveDiv").off("mousedown",this.moveControlDown),e("#cropMoveDiv").off("dblclick",this.handlerApply),e(".lineBar").off("mousedown",this.resizeControlDown),e(".squareBar").off("mousedown",this.resizeControlDown),e(".circlesBar").off("mousedown",this.resizeControlDown),e(document).off("mousemove",this.moving),e(document).off("mouseup",this.endChangeing),e(".canvas-container")[0].removeChild(this.controlDiv[0]),this.controlDiv=null,this.cropMoveDiv=null,this.cropMT=null,this.cropBT=null,this.cropLM=null,this.cropRM=null,this.cropTL=null,this.cropBL=null,this.cropLL=null,this.cropRL=null}}},{key:"saveEventState",value:function(t){this.event_state.save_cropX=this.cropX,this.event_state.save_cropY=this.cropY,this.event_state.save_cropWidth=this.cropWidth,this.event_state.save_cropHeight=this.cropHeight,this.event_state.save_cropRatio=this.cropWidth/this.cropHeight,"cropMoveDiv"==t.currentTarget.id?(this.event_state.min_cropX=0,this.event_state.max_cropX=Fotor.mainCanvas.canvas.documentWidth-this.cropWidth,this.event_state.min_cropY=0,this.event_state.max_cropY=Fotor.mainCanvas.canvas.documentHeight-this.cropHeight):"cropLT"==t.currentTarget.id?(this.event_state.base_x=this.cropX+this.cropWidth,this.event_state.base_y=this.cropY+this.cropHeight):"cropRT"==t.currentTarget.id?(this.event_state.base_x=this.cropX,this.event_state.base_y=this.cropY+this.cropHeight):"cropLB"==t.currentTarget.id?(this.event_state.base_x=this.cropX+this.cropWidth,this.event_state.base_y=this.cropY):"cropRB"==t.currentTarget.id?(this.event_state.base_x=this.cropX,this.event_state.base_y=this.cropY):"cropTL"==t.currentTarget.id||"cropMT"==t.currentTarget.id?this.keepProportions?(this.event_state.base_x=this.cropX+.5*this.cropWidth,this.event_state.base_y=this.cropY+this.cropHeight):(this.event_state.base_x=this.cropX+this.cropWidth,this.event_state.base_y=this.cropY+this.cropHeight):"cropBL"==t.currentTarget.id||"cropBT"==t.currentTarget.id?this.keepProportions?(this.event_state.base_x=this.cropX+.5*this.cropWidth,this.event_state.base_y=this.cropY):(this.event_state.base_x=this.cropX,this.event_state.base_y=this.cropY):"cropLL"==t.currentTarget.id||"cropLM"==t.currentTarget.id?this.keepProportions?(this.event_state.base_x=this.cropX+this.cropWidth,this.event_state.base_y=this.cropY+.5*this.cropHeight):(this.event_state.base_x=this.cropX+this.cropWidth,this.event_state.base_y=this.cropY+this.cropHeight):"cropRL"!=t.currentTarget.id&&"cropRM"!=t.currentTarget.id||(this.keepProportions?(this.event_state.base_x=this.cropX,this.event_state.base_y=this.cropY+.5*this.cropHeight):(this.event_state.base_x=this.cropX,this.event_state.base_y=this.cropY)),this.event_state.mouse_x=(t.clientX||t.pageX||t.originalEvent.touches[0].clientX)+e(window).scrollLeft(),this.event_state.mouse_y=(t.clientY||t.pageY||t.originalEvent.touches[0].clientY)+e(window).scrollTop(),this.event_state.evnt=t}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.saveEventState(t),e(document).on("mousemove",this.moving),e(document).on("mouseup",this.endChangeing)}},{key:"moving",value:function(t){var a={};t.preventDefault(),t.stopPropagation(),a.x=(t.clientX||t.pageX)+e(window).scrollLeft(),a.y=(t.clientY||t.pageY)+e(window).scrollTop();var n=a.x-this.event_state.mouse_x,o=a.y-this.event_state.mouse_y;this.cropX=this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],this.cropY=this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3],this.cropX<this.event_state.min_cropX&&(this.cropX=this.event_state.min_cropX),this.cropX>this.event_state.max_cropX&&(this.cropX=this.event_state.max_cropX),this.cropY<this.event_state.min_cropY&&(this.cropY=this.event_state.min_cropY),this.cropY>this.event_state.max_cropY&&(this.cropY=this.event_state.max_cropY),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"resizeControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.saveEventState(t),e(document).on("mousemove",this.reSizeing),e(document).on("mouseup",this.endChangeing)}},{key:"reSizeing",value:function(t){var a={};t.preventDefault(),t.stopPropagation(),a.x=(t.clientX||t.pageX)+e(window).scrollLeft(),a.y=(t.clientY||t.pageY)+e(window).scrollTop();var n=a.x-this.event_state.mouse_x,o=a.y-this.event_state.mouse_y,i={};if("cropLT"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropRT"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropWidth+this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropLB"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=this.event_state.save_cropHeight+this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropRB"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropWidth+this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=this.event_state.save_cropHeight+this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropTL"==this.event_state.evnt.currentTarget.id||"cropMT"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropX,i.y=this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropBL"==this.event_state.evnt.currentTarget.id||"cropBT"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropWidth+this.event_state.save_cropX,i.y=this.event_state.save_cropHeight+this.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropLL"==this.event_state.evnt.currentTarget.id||"cropLM"==this.event_state.evnt.currentTarget.id?(i.x=this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=this.event_state.save_cropY):"cropRL"!=this.event_state.evnt.currentTarget.id&&"cropRM"!=this.event_state.evnt.currentTarget.id||(i.x=this.event_state.save_cropWidth+this.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=this.event_state.save_cropHeight+this.event_state.save_cropY),i.x<0?i.x=0:i.x>Fotor.mainCanvas.canvas.documentWidth&&(i.x=Fotor.mainCanvas.canvas.documentWidth),i.y<0?i.y=0:i.y>Fotor.mainCanvas.canvas.documentHeight&&(i.y=Fotor.mainCanvas.canvas.documentHeight),this.keepProportions){var s,r,l,c,h=1,d=1,u=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;if("cropLT"==this.event_state.evnt.currentTarget.id||"cropRT"==this.event_state.evnt.currentTarget.id||"cropLB"==this.event_state.evnt.currentTarget.id||"cropRB"==this.event_state.evnt.currentTarget.id)(l=Math.abs(this.event_state.base_x-i.x))/(c=Math.abs(this.event_state.base_y-i.y))<this.event_state.save_cropRatio?(c=c,i.x<=this.event_state.base_x&&i.y<=this.event_state.base_y?(h=this.event_state.save_cropRatio<u?this.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/this.event_state.save_cropRatio,l=(c=Math.min(c,h))*this.event_state.save_cropRatio,s=this.event_state.base_x-l,r=this.event_state.base_y-c):i.x>this.event_state.base_x&&i.y<=this.event_state.base_y?(h=this.event_state.save_cropRatio<u?this.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/this.event_state.save_cropRatio,l=(c=Math.min(c,h))*this.event_state.save_cropRatio,s=this.event_state.base_x+l-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-l:this.event_state.base_x,r=this.event_state.base_y-c):i.x<=this.event_state.base_x&&i.y>this.event_state.base_y?(h=this.event_state.save_cropRatio<u?Fotor.mainCanvas.canvas.documentHeight-this.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/this.event_state.save_cropRatio,l=(c=Math.min(c,h))*this.event_state.save_cropRatio,s=this.event_state.base_x-l,r=this.event_state.base_y+c-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-c:this.event_state.base_y):i.x>this.event_state.base_x&&i.y>this.event_state.base_y&&(h=this.event_state.save_cropRatio<u?Fotor.mainCanvas.canvas.documentHeight-this.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/this.event_state.save_cropRatio,l=(c=Math.min(c,h))*this.event_state.save_cropRatio,s=this.event_state.base_x+l-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-l:this.event_state.base_x,r=this.event_state.base_y+c-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-c:this.event_state.base_y)):(l=l,i.x<=this.event_state.base_x&&i.y<=this.event_state.base_y?(d=this.event_state.save_cropRatio>u?this.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*this.event_state.save_cropRatio,c=(l=Math.min(l,d))/this.event_state.save_cropRatio,s=this.event_state.base_x-l,r=this.event_state.base_y-c):i.x>this.event_state.base_x&&i.y<=this.event_state.base_y?(d=this.event_state.save_cropRatio>u?Fotor.mainCanvas.canvas.documentWidth-this.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*this.event_state.save_cropRatio,c=(l=Math.min(l,d))/this.event_state.save_cropRatio,s=this.event_state.base_x+l-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-l:this.event_state.base_x,r=this.event_state.base_y-c):i.x<=this.event_state.base_x&&i.y>this.event_state.base_y?(d=this.event_state.save_cropRatio>u?this.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*this.event_state.save_cropRatio,c=(l=Math.min(l,d))/this.event_state.save_cropRatio,s=this.event_state.base_x-l,r=this.event_state.base_y+c-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-c:this.event_state.base_y):i.x>this.event_state.base_x&&i.y>this.event_state.base_y&&(d=this.event_state.save_cropRatio>u?Fotor.mainCanvas.canvas.documentWidth-this.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*this.event_state.save_cropRatio,c=(l=Math.min(l,d))/this.event_state.save_cropRatio,s=this.event_state.base_x+l-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-l:this.event_state.base_x,r=this.event_state.base_y+c-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-c:this.event_state.base_y));else"cropTL"==this.event_state.evnt.currentTarget.id||"cropMT"==this.event_state.evnt.currentTarget.id||"cropBL"==this.event_state.evnt.currentTarget.id||"cropBT"==this.event_state.evnt.currentTarget.id?(c=Math.abs(this.event_state.base_y-i.y),this.event_state.save_cropRatio<u?"cropTL"==this.event_state.evnt.currentTarget.id||"cropMT"==this.event_state.evnt.currentTarget.id?h=this.event_state.base_y:"cropBL"!=this.event_state.evnt.currentTarget.id&&"cropBT"!=this.event_state.evnt.currentTarget.id||(h=Fotor.mainCanvas.canvas.documentHeight-this.event_state.base_y):h=Fotor.mainCanvas.canvas.documentWidth/this.event_state.save_cropRatio,l=(c=Math.min(c,h))*this.event_state.save_cropRatio,s=this.event_state.base_x-.5*l,r=i.y<=this.event_state.base_y?this.event_state.base_y-c:this.event_state.base_y):"cropLL"!=this.event_state.evnt.currentTarget.id&&"cropLM"!=this.event_state.evnt.currentTarget.id&&"cropRL"!=this.event_state.evnt.currentTarget.id&&"cropRM"!=this.event_state.evnt.currentTarget.id||(l=Math.abs(this.event_state.base_x-i.x),this.event_state.save_cropRatio>u?"cropLL"==this.event_state.evnt.currentTarget.id||"cropLM"==this.event_state.evnt.currentTarget.id?d=this.event_state.base_x:"cropRL"!=this.event_state.evnt.currentTarget.id&&"cropRM"!=this.event_state.evnt.currentTarget.id||(d=Fotor.mainCanvas.canvas.documentWidth-this.event_state.base_x):d=Fotor.mainCanvas.canvas.documentHeight*this.event_state.save_cropRatio,c=(l=Math.min(l,d))/this.event_state.save_cropRatio,r=this.event_state.base_y-.5*c,s=i.x<=this.event_state.base_x?this.event_state.base_x-l:this.event_state.base_x);s<0&&(s=0),s+l>Fotor.mainCanvas.canvas.documentWidth&&(s=Fotor.mainCanvas.canvas.documentWidth-l),r<0&&(r=0),r+c>Fotor.mainCanvas.canvas.documentHeight&&(r=Fotor.mainCanvas.canvas.documentHeight-c),this.cropX=s,this.cropY=r,this.cropWidth=Math.max(l,1),this.cropHeight=Math.max(c,1)}else i.x<this.event_state.base_x?(this.cropX=i.x,this.cropWidth=Math.max(this.event_state.base_x-i.x,1)):(this.cropX=this.event_state.base_x,this.cropWidth=Math.max(i.x-this.event_state.base_x,1)),i.y<this.event_state.base_y?(this.cropY=i.y,this.cropHeight=Math.max(this.event_state.base_y-i.y,1)):(this.cropY=this.event_state.base_y,this.cropHeight=Math.max(i.y-this.event_state.base_y,1));Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"endChangeing",value:function(t){t.preventDefault(),e(document).off("mousemove",this.reSizeing),e(document).off("mousemove",this.moving),e(document).off("mouseup",this.endChangeing)}},{key:"doCrop",value:function(){this.docropX=this.cropX/Fotor.mainCanvas.canvas.documentWidth,this.docropY=this.cropY/Fotor.mainCanvas.canvas.documentHeight,this.docropWidth=this.cropWidth/Fotor.mainCanvas.canvas.documentWidth,this.docropHeight=this.cropHeight/Fotor.mainCanvas.canvas.documentHeight,this.centerMoveX=.5*Fotor.mainCanvas.canvas.documentWidth-(.5*this.cropWidth+this.cropX),this.centerMoveY=.5*Fotor.mainCanvas.canvas.documentHeight-(.5*this.cropHeight+this.cropY),this.controlDiv.hide(),Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.requestRenderAll(),this.animationStep=0,this.endCropAnimation()}},{key:"endCropAnimation",value:function(){var e=this.docropX*Fotor.mainCanvas.canvas.documentWidth,t=this.docropY*Fotor.mainCanvas.canvas.documentHeight;this.controlDiv.show(),Fotor.mainCanvas.fotorEngine.process_crop([this.docropX,this.docropY],[this.docropWidth,this.docropHeight],!0),Fotor.mainCanvas.resetCanvasSize(this.cropWidth,this.cropHeight),Fotor.mainCanvas.reSetEditorAnimation(),Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!0,null,!0);for(var a=0,n=Fotor.mainCanvas.canvas._objects.length;a<n;a++){var o=Fotor.mainCanvas.canvas._objects[a];o.set({left:o.left-e,top:o.top-t})}Fotor.mainCanvas.applyEditorPic(),Fotor.mainCanvas.canvas.hasCustomControls=!0,this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"refreshDivData",value:function(){if(null!=this.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=Fotor.mainCanvas.canvas.viewportTransform[0]*this.cropX+Fotor.mainCanvas.canvas.viewportTransform[4]-this.circleBarRadius,t=Fotor.mainCanvas.canvas.viewportTransform[3]*this.cropY+Fotor.mainCanvas.canvas.viewportTransform[5]-this.circleBarRadius,a=Fotor.mainCanvas.canvas.viewportTransform[0]*this.cropWidth+2*this.circleBarRadius,n=Fotor.mainCanvas.canvas.viewportTransform[3]*this.cropHeight+2*this.circleBarRadius;this.controlDiv.css({left:e+"px",top:t+"px",width:a+"px",height:n+"px"});var o=.5*a-this.circleBarRadius,i=.5*n-this.circleBarRadius,s=2*this.circleBarRadius,r=2*this.circleBarRadius,l=a-4*this.circleBarRadius,c=n-4*this.circleBarRadius;this.cropMoveDiv.css({left:s+"px",top:r+"px",width:l+"px",height:c+"px"}),this.cropMT.css({left:o+"px"}),this.cropBT.css({left:o+"px"}),this.cropLM.css({top:i+"px"}),this.cropRM.css({top:i+"px"}),this.cropTL.css({top:0,left:"4px",width:a-8+"px",height:2*this.circleBarRadius+"px"}),this.cropBL.css({bottom:0,left:"4px",width:a-8+"px",height:2*this.circleBarRadius+"px"}),this.cropLL.css({top:"4px",left:0,width:2*this.circleBarRadius+"px",height:n-8+"px"}),this.cropRL.css({top:"4px",right:0,width:2*this.circleBarRadius+"px",height:n-8+"px"}),this.forceUpdate()}}},{key:"initUnfoldUI",value:function(){Fotor.mainCanvas.canvas.mouseEnabled=!1,this.refs.dropSelectDom.setValue("Freeform"),this.handleCheckboxNoActive()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isCustomBeforObjectRender=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,this.removeCropControlDiv(),this.afterCropToolFold(),Fotor.mainCanvas.canvas.requestRenderAll(),this.setState({cropWidth:0,cropHeight:0})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.redrawControlLayer,Fotor.mainCanvas.canvas.hasCustomControls=!0,Fotor.mainCanvas.canvas.isCustomBeforObjectRender=!0,Fotor.mainCanvas.canvas.updateViewTransform(),this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight(),isNaN(this.cropX)&&console.log("NAN"+this.cropX),this.createCropControlDiv(),this.afterCropToolUnfold(),Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.progressBar.hide(),this.forceUpdate()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix "},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_crop,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement(Fotor.ui.SelectDrop,{ref:"dropSelectDom",defaultValue:"Freeform",items:this.presetSelect,onChange:this.handleSelectChange.bind(this)}),n.createElement("div",{className:"marginT15 clearfix"},n.createElement("ul",{className:"ul-no-style inline-inputs clearfix"},n.createElement("li",{className:"pull-left"},n.createElement("input",{ref:"inputWidth",className:"custom-input "+(this.state.isError?"custom-input-error":""),"data-type":"width",value:Math.floor(this.cropWidth).toString(),onBlur:this.inputBlur.bind(this),onKeyDown:this.inputKeydown.bind(this),onKeyUp:this.inputKeyup.bind(this),onChange:this.inputValueChange.bind(this)})),n.createElement("li",{className:"icon-x pull-left"}),n.createElement("li",{className:"pull-left"},n.createElement("input",{ref:"inputHeight",className:"custom-input "+(this.state.isError?"custom-input-error":""),"data-type":"height",value:Math.floor(this.cropHeight).toString(),onBlur:this.inputBlur.bind(this),onKeyDown:this.inputKeydown.bind(this),onKeyUp:this.inputKeyup.bind(this),onChange:this.inputValueChange.bind(this)})),n.createElement("li",{className:"pull-right",onClick:this.swapWtoH.bind(this)},n.createElement("div",{className:"icon-34 switch-h "+(this.keepProportions?"":"disable")})))),n.createElement("div",{className:"marginT15"},n.createElement(Fotor.ui.Checkbox,{text:Fotor.globalConfig.lang.editor_workspace_basic_crop_keep_Proportions,ref:"checkbox",onClick:this.handleCheckboxClick.bind(this)})),n.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},n.createElement(Fotor.ui.Button,{className:"apply-btn",text:Fotor.globalConfig.lang.editor_workspace_effect_applyButton,onClick:this.handlerApply.bind(this)})))))}},{key:"handleCheckboxClick",value:function(e){e?(this.keepProportions=!0,this.keepRatio=this.cropWidth/this.cropHeight):(this.refs.dropSelectDom.setValue("Freeform"),this.keepProportions=!1),this.forceUpdate()}},{key:"handleCheckboxActive",value:function(){o.findDOMNode(this.refs.checkbox);this.refs.checkbox.isSelected()||(this.refs.checkbox.setSelect(!0),this.keepProportions=!0,this.keepRatio=this.cropWidth/this.cropHeight)}},{key:"handleCheckboxNoActive",value:function(){o.findDOMNode(this.refs.checkbox);this.refs.checkbox.isSelected()&&(this.refs.checkbox.setSelect(!1),this.keepProportions=!1)}},{key:"handleSelectChange",value:function(e){if("Freeform"==e?(this.refs.checkbox.setSelect(!1),this.handleCheckboxClick(!1)):(this.refs.checkbox.setSelect(!0),this.handleCheckboxClick(!0)),"Freeform"==e)this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight();else if(0==e)this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight();else{this.handleCheckboxActive();var t=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;e<1?e>t?(this.cropWidth=Fotor.mainCanvas.canvas.documentWidth,this.cropHeight=Fotor.mainCanvas.canvas.documentWidth/e):(this.cropWidth=e*Fotor.mainCanvas.canvas.documentHeight,this.cropHeight=Fotor.mainCanvas.canvas.documentHeight):e<t?(this.cropWidth=e*Fotor.mainCanvas.canvas.documentHeight,this.cropHeight=Fotor.mainCanvas.canvas.documentHeight):(this.cropWidth=Fotor.mainCanvas.canvas.documentWidth,this.cropHeight=Fotor.mainCanvas.canvas.documentWidth/e),this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-this.cropWidth),this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-this.cropHeight)}Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"getEventObject",value:function(t){return{e:t,target:t.target,value:e(t.target).val(),parent:e(t.target).parent()}}},{key:"inputKeydown",value:function(e){var t=e.keyCode;return-1!=[8,46,37,39,13].indexOf(t)||(t>=48&&t<=57||(t>=96&&t<=105||(!(!e.ctrlKey&&!e.metaKey||86!=t)||(e.stopPropagation(),e.preventDefault(),!1))))}},{key:"inputKeyup",value:function(t){var a=e(t.target),n=this.getEventObject(t),i=e(n.target).val(),s=o.findDOMNode(this.refs.cropContent),r=e(s).find("input");if(parseInt(i)<1)return e(t.target).val(1),!1;if(13==t.keyCode){if(0==(l=e(r).index(n.target)))return e(r).eq(1).focus(),!1;e(r).blur(),this.handlerApply()}else if(9==t.keyCode){var l;a=t.target,r=e(this.refs.toolContent).find(".custom-input");l=0==(l=e(r).index(e(a)))?1:0,e(r).eq(l).focus()}else this.numberInputOnly(a)}},{key:"inputValueChange",value:function(t){var a=this.getEventObject(t),n=Math.max(this.numberFormat(a.value),1),o=!0;if("width"==e(a.target).data("type")&&(o=!1),this.keepProportions){var i,s,r=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;o?(i=(s=this.keepRatio<r?Math.min(n,Fotor.mainCanvas.canvas.documentHeight):Math.min(n,Fotor.mainCanvas.canvas.documentWidth/this.keepRatio))*this.keepRatio,this.cropX+i>Fotor.mainCanvas.canvas.documentWidth&&(this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-i)),this.cropY+s>Fotor.mainCanvas.canvas.documentHeight&&(this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-s)),this.cropWidth=i,this.cropHeight=s):(s=(i=this.keepRatio>r?Math.min(n,Fotor.mainCanvas.canvas.documentWidth):Math.min(n,Fotor.mainCanvas.canvas.documentHeight*this.keepRatio))/this.keepRatio,this.cropX+i>Fotor.mainCanvas.canvas.documentWidth&&(this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-i)),this.cropY+s>Fotor.mainCanvas.canvas.documentHeight&&(this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-s)),this.cropWidth=i,this.cropHeight=s)}else o?(n=Math.min(n,Fotor.mainCanvas.canvas.documentHeight),this.cropHeight=n):(n=Math.min(n,Fotor.mainCanvas.canvas.documentWidth),this.cropWidth=n);Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"numberInputOnly",value:function(t){var a=e(t).val(),n=a.replace(/\D/g,"");return n=parseInt(n),isNaN(n)&&(n=""),a!=n&&e(t).val(n),n}},{key:"numberFormat",value:function(e){if(""==e||null==e)return"";var t=e.replace(/\D/g,"");return t=parseInt(t),isNaN(t)&&(t=""),t}},{key:"checkWidthHeight",value:function(){return{width:this.refs.inputWidth.getValue(),height:this.refs.inputHeight.getValue()}}},{key:"inputBlur",value:function(e){this.inputValueChange(e),e.stopPropagation(),e.preventDefault()}},{key:"swapWtoH",value:function(){if(this.keepProportions){var e=1/(this.cropWidth/this.cropHeight);e<Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight?(this.cropWidth=Fotor.mainCanvas.canvas.documentHeight*e,this.cropHeight=Fotor.mainCanvas.canvas.documentHeight,this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-this.cropWidth),this.cropY=0):(this.cropWidth=Fotor.mainCanvas.canvas.documentWidth,this.cropHeight=Fotor.mainCanvas.canvas.documentWidth/e,this.cropX=0,this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-this.cropHeight)),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"handlerApply",value:function(){0==Fotor.mainCanvas.saveApplyZoomVal&&(Fotor.mainCanvas.saveApplyZoomVal=Fotor.mainCanvas.getZoom()),this.doCrop()}},{key:"getDefaultHistoryData",value:function(){return{}}},{key:"getCurrentHistoryData",value:function(){return{}}},{key:"loadTempHistoryData",value:function(e){this.refs.dropSelectDom.setValue("Freeform"),this.handleSelectChange("Freeform"),this.handleCheckboxNoActive()}},{key:"cancelHandler",value:function(){this.tryFold()}}]),a}(r.default));t.default=c}).call(this,a(2),a(0),a(18))},861:function(e,t,a){var n=a(862);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},862:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,".cropDiv {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 5; }\n\n.circlesBar {\n  position: absolute;\n  width: 14px;\n  height: 14px; }\n\n#cropLT {\n  left: 4px;\n  top: 4px;\n  background: url("+n(a(162))+") no-repeat; }\n\n#cropRT {\n  right: 4px;\n  top: 4px;\n  background: url("+n(a(163))+") no-repeat; }\n\n#cropLB {\n  left: 4px;\n  bottom: 4px;\n  background: url("+n(a(164))+") no-repeat; }\n\n#cropRB {\n  right: 4px;\n  bottom: 4px;\n  background: url("+n(a(165))+") no-repeat; }\n\n.squareBar {\n  position: absolute;\n  background: url("+n(a(863))+") no-repeat;\n  width: 9px;\n  height: 9px; }\n\n.lineBar {\n  position: absolute; }\n\n.lineBar span {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.6); }\n\n#cropTL span,\n#cropBL span {\n  margin-top: 4px;\n  height: 1px; }\n\n#cropLL span,\n#cropRL span {\n  margin-left: 4px;\n  width: 1px; }\n\n#cropMT {\n  top: 4px; }\n\n#cropBT {\n  bottom: 4px; }\n\n#cropLM {\n  left: 4px; }\n\n#cropRM {\n  right: 4px; }\n\n#cropMT, #cropBT {\n  width: 14px;\n  height: 4px;\n  background: url("+n(a(864))+") no-repeat; }\n\n#cropLM, #cropRM {\n  width: 4px;\n  height: 14px;\n  background: url("+n(a(865))+") no-repeat; }\n\n.cursor-resize-l {\n  cursor: url("+n(a(78))+") 8 8, auto; }\n\n.cursor-resize-r {\n  cursor: url("+n(a(76))+") 8 8, auto; }\n\n.cursor-resize-h {\n  cursor: url("+n(a(77))+") 8 8, auto; }\n\n.cursor-resize-v {\n  cursor: url("+n(a(75))+") 8 8, auto; }\n\n.cursor-resize-move {\n  cursor: url("+n(a(52))+") 8 8, auto; }\n",""])},863:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzFCOEMzNjRDNzREMTFFNkI0NzZFOTNBNzk4M0RBRDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzFCOEMzNjVDNzREMTFFNkI0NzZFOTNBNzk4M0RBRDUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMUI4QzM2MkM3NEQxMUU2QjQ3NkU5M0E3OTgzREFENSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMUI4QzM2M0M3NEQxMUU2QjQ3NkU5M0E3OTgzREFENSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrYA230AAAAnSURBVHjaYvwPBAwEAAuIYGRk9MOlAGjGJiYGIsCQVcRITDgBBBgA3NwMCzLLhOMAAAAASUVORK5CYII="},864:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAECAYAAAC+0w63AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzNGRjZGMzUyOUJEMTFFNzhDRURFQzU2QUE3QTcwMzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzNGRjZGMzYyOUJEMTFFNzhDRURFQzU2QUE3QTcwMzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozM0ZGNkYzMzI5QkQxMUU3OENFREVDNTZBQTdBNzAzOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozM0ZGNkYzNDI5QkQxMUU3OENFREVDNTZBQTdBNzAzOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvv9+iQAAAAkSURBVHjaYvwPBAxkABYQwcjImE6KJqBdM5kYyASM5DoVIMAAR2sMAdDiUj4AAAAASUVORK5CYII="},865:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAOCAYAAAAIar0YAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkVGQUUwNDUyOUJEMTFFNzgwNDNFODk0NkVCOERBOTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkVGQUUwNDYyOUJEMTFFNzgwNDNFODk0NkVCOERBOTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRUZBRTA0MzI5QkQxMUU3ODA0M0U4OTQ2RUI4REE5MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyRUZBRTA0NDI5QkQxMUU3ODA0M0U4OTQ2RUI4REE5MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuM86TYAAAAgSURBVHjaYvwPBAzIACqQBsIgNhMDGhg6AozongMIMAA2ZBDVNSSHTwAAAABJRU5ErkJggg=="},866:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.resizeMaxWidth=0,t.resizeMaxHeight=0,t.resizeWidth=0,t.resizeHeight=0,t.resizeByProp=!1,t.resizeWidthTxt=null,t.resizeHeightTxt=null,t.lock_proportion=!0,t.handleToolFolderClick=t.handleToolFolderClick.bind(t),t.onKeyDownHandler=t.onKeyDownHandler.bind(t),t.lockChanged=t.lockChanged.bind(t),t.handleClickCheckbox=t.handleClickCheckbox.bind(t),t.state={width:2e3,height:2e3,rate:1,isLock:!0,minWidth:1,minHeight:1,maxWidth:1e4,maxHeight:1e4,isError:!1,disable:!1,errorInfo:""},t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),o(a,[{key:"handleClickCheckbox",value:function(e){this.resizeByProp=e,this.checkShowValue(e),this.checkIsError(null)}},{key:"checkShowValue",value:function(t){var a=e(this.refs.toolContent).find(".custom-input"),n=e(a).eq(0).val(),o=e(a).eq(1).val();t?(this.resizeWidthTxt.value=Math.round(n/Fotor.mainCanvas.canvas.documentWidth*100),this.resizeHeightTxt.value=Math.round(o/Fotor.mainCanvas.canvas.documentHeight*100)):(this.resizeWidthTxt.value=Math.round(Math.max(n/100*Fotor.mainCanvas.canvas.documentWidth,1)),this.resizeHeightTxt.value=Math.round(Math.max(o/100*Fotor.mainCanvas.canvas.documentHeight,1))),this.forceUpdate()}},{key:"getDefaultSize",value:function(){this.resizeMaxWidth=this.resizeWidth=Math.round(Fotor.mainCanvas.canvas.documentWidth),this.resizeMaxHeight=this.resizeHeight=Math.round(Fotor.mainCanvas.canvas.documentHeight),this.resizeWidthTxt=e("#widthTxt")[0],this.resizeHeightTxt=e("#heightTxt")[0],this.resizeWidthTxt.value=Math.round(this.resizeWidth),this.resizeHeightTxt.value=Math.round(this.resizeHeight)}},{key:"reSetDefaultSize",value:function(){this.resizeMaxWidth=this.resizeWidth=this.resizeMaxHeight=this.resizeHeight=0,this.resizeWidthTxt=this.resizeHeightTxt=null}},{key:"lockChanged",value:function(e){this.setState({isLock:!this.state.isLock})}},{key:"afterfold",value:function(){Fotor.mainCanvas.canvas.off("resize",this.getDefaultSize,this),this.reSetDefaultSize(),this.resizeByProp=!1,i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.forceUpdate()}},{key:"initUnfoldUI",value:function(){this.getDefaultSize(),this.refs.percentBox.setSelect(!1),this.checkIsError(null)}},{key:"afterUnfold",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.updateViewTransform(),Fotor.mainCanvas.canvas.on("resize",this.getDefaultSize,this),Fotor.progressBar.hide()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_resize,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("ul",{ref:"inputContainer",className:"ul-no-style inline-inputs clearfix"},n.createElement("li",{className:"pull-left"},n.createElement("input",{type:"text",id:"widthTxt",maxLength:5,className:"custom-input custom-input-big "+(this.resizeByProp?"show-percent ":"")+(this.state.isError?"custom-input-error":""),onKeyDown:this.onKeyDownHandler.bind(this),onKeyUp:this.onInputKeyUp.bind(this),onBlur:this.inputBlur.bind(this),onChange:this.inputValueChange.bind(this)})),n.createElement("li",{className:"pull-right"},n.createElement("input",{type:"text",id:"heightTxt",maxLength:5,className:"custom-input custom-input-big "+(this.resizeByProp?"show-percent ":"")+(this.state.isError?"custom-input-error":""),onKeyDown:this.onKeyDownHandler.bind(this),onKeyUp:this.onInputKeyUp.bind(this),onBlur:this.inputBlur.bind(this),onChange:this.inputValueChange.bind(this)})),n.createElement("li",{className:"lock-container",onClick:this.lockChanged},n.createElement("i",{className:"icon-lock "+(this.state.isLock?"locked":"")}))),n.createElement("div",{className:"clearfix paddingT10"},n.createElement(Fotor.ui.Checkbox,{ref:"percentBox",text:Fotor.globalConfig.lang.editor_workspace_basic_resize_percent,onClick:this.handleClickCheckbox.bind(this)})),n.createElement("div",{className:"paddingT5 red",style:{minHeight:"18px",lineHeight:"12px"}},this.state.errorInfo),n.createElement("div",{className:"clearfix marginT0"},n.createElement(Fotor.ui.Button,{ref:"applyBtn",className:"apply-btn text-center",text:Fotor.globalConfig.lang.editor_workspace_effect_applyButton,onClick:this.applyHandler.bind(this)})))))}},{key:"applyHandler",value:function(){0==Fotor.mainCanvas.saveApplyZoomVal&&(Fotor.mainCanvas.saveApplyZoomVal=Fotor.mainCanvas.getZoom());var t=e(this.refs.toolContent).find(".custom-input");this.resizeWidth=e(t).eq(0).val(),this.resizeHeight=e(t).eq(1).val(),this.resizeByProp&&(this.resizeWidth*=Fotor.mainCanvas.canvas.documentWidth/100,this.resizeHeight*=Fotor.mainCanvas.canvas.documentHeight/100);for(var a=this.resizeWidth/Fotor.mainCanvas.canvas.documentWidth,n=this.resizeHeight/Fotor.mainCanvas.canvas.documentHeight,o=0,i=Fotor.mainCanvas.canvas._objects.length;o<i;o++){var s=Fotor.mainCanvas.canvas._objects[o],r=s.left/Fotor.mainCanvas.canvas.documentWidth,l=s.top/Fotor.mainCanvas.canvas.documentHeight;s.set({left:r*this.resizeWidth,top:l*this.resizeHeight,scaleX:s.scaleX*a*(s.flipX?-1:1),scaleY:s.scaleY*n*(s.flipY?-1:1)})}Fotor.mainCanvas.fotorEngine.process_resize(this.resizeWidth,this.resizeHeight),Fotor.mainCanvas.resetCanvasSize(this.resizeWidth,this.resizeHeight),Fotor.mainCanvas.editorZoomFit(),this.resizeByProp?(e(t).eq(0).val(100),e(t).eq(1).val(100)):(e(t).eq(0).val(this.resizeWidth),e(t).eq(1).val(this.resizeHeight)),this.resizeMaxWidth==this.resizeWidth&&this.resizeMaxHeight==this.resizeHeight||Fotor.mainCanvas.applyEditorPic()}},{key:"onKeyDownHandler",value:function(t){var a=t.keyCode,n=e(t.target).val();n=Number(n);return-1!=[8,46,37,39,13].indexOf(a)||(a>=48&&a<=57||(a>=96&&a<=105||(!(!t.ctrlKey&&!t.metaKey||86!=a)||(t.stopPropagation(),t.preventDefault(),!1))))}},{key:"onInputKeyUp",value:function(t){var a=e(t.target),n=e(this.refs.toolContent),o=e(n).find("input");if(13==t.keyCode){if(0==(i=e(o).index(a)))return e(o).eq(1).focus(),!1;e(o).blur(),this.applyHandler()}else if(9==t.keyCode){var i;a=t.target,o=e(this.refs.toolContent).find(".custom-input");i=0==(i=e(o).index(e(a)))?1:0,e(o).eq(i).focus()}else this.numberInputOnly(a);this.checkIsError(t),t.stopPropagation(),t.preventDefault()}},{key:"inputValueChange",value:function(t){var a=e(t.target),n=this.numberInputOnly(a),o=e(this.refs.toolContent),i=e(o).find("input"),s=e(i).index(a),r=e(i).eq(0==s?1:0);this.numberInputOnly(r);if(""!=n){if(this.checkIsError(t),this.state.isLock)if(this.resizeByProp)s=0==s?1:0,e(i).eq(s).val(n);else{var l,c=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;0==s?(l=Math.round(n/c),e(i).eq(1).val(l)):(l=Math.round(n*c),e(i).eq(0).val(l))}}else this.setState({isError:!0});t.stopPropagation(),t.preventDefault()}},{key:"inputBlur",value:function(e){this.inputValueChange(e),e.stopPropagation()}},{key:"checkIsError",value:function(t){var a,n=e(this.refs.toolContent),o=e(n).find("input");a=null!=t?e(t.target):e(o).eq(0);var i=this.numberInputOnly(a),s=e(o).index(a),r=e(o).eq(0==s?1:0),l=this.numberInputOnly(r),c={w:i,h:l};1==s&&(c={w:l,h:i});var h=!1;if(this.resizeByProp)(c.w>100||c.h>100)&&(h=!0,this.setState({errorInfo:Fotor.globalConfig.lang.editor_workspace_basic_resize_maxExcess+" 100% x 100%"})),(c.w<=0||c.h<=0)&&(h=!0,this.setState({errorInfo:Fotor.globalConfig.lang.editor_workspace_basic_resize_minExcess+" 0% x 0%"}));else{if(c.w>this.resizeMaxWidth||c.h>this.resizeMaxHeight){h=!0;var d=this.resizeMaxWidth,u=this.resizeMaxHeight;this.state.errorInfo=Fotor.globalConfig.lang.editor_workspace_basic_resize_maxExcess+" "+d+" x "+u}(c.w<this.state.minWidth||c.h<this.state.minHeight)&&(h=!0,this.state.errorInfo=Fotor.globalConfig.lang.editor_workspace_basic_resize_minExcess+" "+this.state.minWidth+" x "+this.state.minHeight)}h?this.refs.applyBtn.disable():(this.refs.applyBtn.enable(),this.state.errorInfo=""),this.setState({isError:h})}},{key:"numberInputOnly",value:function(t){var a=e(t).val(),n=a.replace(/\D/g,"");return n=parseInt(n),isNaN(n)&&(n=""),a!=n&&e(t).val(n),n}}]),a}(a(72).default);t.default=s}).call(this,a(2),a(0))},867:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.rotateVal=0,t.LeftOrRight=0,t.HVFF=null,t.drawScale=1,t.handleValueChange=t.handleValueChange.bind(t),t.handleValueChanged=t.handleValueChanged.bind(t),t.LeftHandler=t.LeftHandler.bind(t),t.RightHandler=t.RightHandler.bind(t),t.HorizontalHandler=t.HorizontalHandler.bind(t),t.VerticalHandler=t.VerticalHandler.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"helperDrawLiner",value:function(e,t){var a=Fotor.mainCanvas.canvas.documentWidth,n=Fotor.mainCanvas.canvas.documentHeight,o=50/e.viewZoom,i=Math.ceil(a/(2*o)),s=Math.ceil(n/(2*o));t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.strokeStyle="rgba(255, 255, 255, 0.6)",t.save(),t.lineWidth=2/e.viewZoom,t.beginPath(),t.moveTo(0,.5*n),t.lineTo(a,.5*n),t.stroke(),t.beginPath(),t.moveTo(.5*a,0),t.lineTo(.5*a,n),t.stroke(),t.restore(),t.save(),t.lineWidth=1/e.viewZoom;for(var r=0;r<s;r++)Math.round(.5*n+o*r)<n&&(t.beginPath(),t.moveTo(0,Math.round(.5*n+o*r)),t.lineTo(a,Math.round(.5*n+o*r)),t.stroke()),Math.round(.5*n-o*r)>0&&(t.beginPath(),t.moveTo(0,Math.round(.5*n-o*r)),t.lineTo(a,Math.round(.5*n-o*r)),t.stroke());for(var l=0;l<i;l++)Math.round(.5*a+o*l)<a&&(t.beginPath(),t.moveTo(Math.round(.5*a+o*l),0),t.lineTo(Math.round(.5*a+o*l),n),t.stroke()),Math.round(.5*a-o*l)>0&&(t.beginPath(),t.moveTo(Math.round(.5*a-o*l),0),t.lineTo(Math.round(.5*a-o*l),n),t.stroke());t.restore(),t.restore()}},{key:"handleValueChange",value:function(e,t){this.rotateVal=this.refs.rotate.val(),0!=this.rotateVal?this.hadchanged=!0:this.hadchanged=!1,this.drawScale=Fotor.mainCanvas.fotorEngine.process_rotation("intensity",-1*this.rotateVal),!Fotor.mainCanvas.canvas.hasCustomControls&&e?(Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawLiner,Fotor.mainCanvas.canvas.hasCustomControls=!0,Fotor.mainCanvas.canvas.mouseEnabled=!1,Fotor.mainCanvas.canvas.requestRenderAll()):null!=e&&null!=e||(Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"handleValueChanged",value:function(e,t){this.handleValueChange(),this.LeftOrRight=0,this.HVFF=null,Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"LeftHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("RR"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.LeftOrRight=90,this.HVFF=null,this.doRotate(this.LeftOrRight),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"RightHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("LR"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.LeftOrRight=-90,this.HVFF=null,this.doRotate(this.LeftOrRight),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"HorizontalHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("HF"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.HVFF=!0,this.LeftOrRight=0,this.doHVFF(this.HVFF),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"VerticalHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("VF"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.HVFF=!1,this.LeftOrRight=0,this.doHVFF(this.HVFF),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"getDefaultHistoryData",value:function(){var e={rotateVal:0};return e.docWidth=Fotor.mainCanvas.documentWidth,e.docHeight=Fotor.mainCanvas.documentHeight,e.LeftOrRight=0,e.HVFF=null,e.currentStep=-1,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.rotateVal=parseInt(this.refs.rotate.val()),e.docWidth=Fotor.mainCanvas.documentWidth,e.docHeight=Fotor.mainCanvas.documentHeight,e.LeftOrRight=this.LeftOrRight,e.HVFF=this.HVFF,e.currentStep=Fotor.historyManager.currentStep+1,e}},{key:"loadTempHistoryData",value:function(e,t){if(t?(this.hadchanged=!1,this.refs.rotate.setDefault(e.rotateVal),this.rotateVal=e.rotateVal,Fotor.mainCanvas.resetCanvasSize(e.docWidth,e.docHeight),Fotor.mainCanvas.editorZoomFit()):this.hadchanged||(this.hadchanged=!0),0!=e.rotateVal)this.refs.rotate.setDefault(e.rotateVal),this.rotateVal=e.rotateVal,Fotor.mainCanvas.resetCanvasSize(e.docWidth,e.docHeight),Fotor.mainCanvas.editorZoomFit();else if(-1!=e.currentStep)if(e.currentStep>Fotor.historyManager.currentStep)this.LeftOrRight=e.LeftOrRight,0!=this.LeftOrRight&&this.doRotate(this.LeftOrRight),this.HVFF=e.HVFF,null!=this.HVFF&&this.doHVFF(!this.HVFF);else{var a=Fotor.historyManager.readStep(Fotor.historyManager.currentStep);this.LeftOrRight=a.afterData.toolData.LeftOrRight,0!=this.LeftOrRight&&this.doRotate(-1*this.LeftOrRight),this.HVFF=a.afterData.toolData.HVFF,null!=this.HVFF&&this.doHVFF(!this.HVFF)}}},{key:"doRotate",value:function(e){var t=e*Math.PI/180,a=Fotor.mainCanvas.canvas.documentBounds;Fotor.mainCanvas.resetCanvasSize(a.height,a.width);var n=new FotorUtils.Geom.Matrix;n.rotate(t);for(var o=fabric.util.transformRectangle(a,n.toArray()),i=0,s=Fotor.mainCanvas.canvas._objects.length;i<s;i++){var r=Fotor.mainCanvas.canvas._objects[i].calcTransformMatrix(),l=fabric.util.multiplyTransformMatrices(n.toArray(),r),c=fabric.util.qrDecompose(l);console.log(c);var h=Fotor.mainCanvas.canvas._objects[i];h.set({left:c.translateX-o.x,top:c.translateY-o.y,angle:c.angle,scaleX:c.scaleX*(h.flipX?-1:1),scaleY:c.scaleY*(h.flipY?-1:1)})}Fotor.mainCanvas.editorZoomFit()}},{key:"doHVFF",value:function(e){Math.PI;var t=Fotor.mainCanvas.canvas.documentBounds,a=new FotorUtils.Geom.Matrix;a.scale(e?-1:1,e?1:-1);var n=fabric.util.transformRectangle(t,a.toArray());console.log(n);for(var o=0,i=Fotor.mainCanvas.canvas._objects.length;o<i;o++){var s=Fotor.mainCanvas.canvas._objects[o].calcTransformMatrix(),r=fabric.util.multiplyTransformMatrices(a.toArray(),s),l=fabric.util.qrDecompose(r);console.log(l);var c=Fotor.mainCanvas.canvas._objects[o];c.set({left:l.translateX-n.x,top:l.translateY-n.y,angle:l.angle,scaleX:l.scaleX*(c.flipX?-1:1),scaleY:l.scaleY*(c.flipY?-1:1)})}Fotor.mainCanvas.editorZoomFit()}},{key:"initUnfoldUI",value:function(){this.refs.rotate.setDefault(0),this.setState({})}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterUnfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_rotate,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("ul",{id:"colorChannel",className:"inline-list clearfix"},e.createElement("li",{onClick:this.LeftHandler},e.createElement("i",{className:"icon-rotate-34 rotate-left"})),e.createElement("li",{onClick:this.RightHandler},e.createElement("i",{className:"icon-rotate-34 rotate-right"})),e.createElement("li",{onClick:this.HorizontalHandler,className:"pull-right"},e.createElement("i",{className:"icon-rotate-34 flip-h"})),e.createElement("li",{onClick:this.VerticalHandler,className:"pull-right"},e.createElement("i",{className:"icon-rotate-34 flip-v"}))),e.createElement("div",{className:"marginT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_rotateStraighten,e.createElement("span",{className:"pull-right",ref:"rotateSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"rotate",max:"45",min:"-45",default:"0",className:"input-range-grey",bindEle:this.refs.rotateSpan,onChange:this.handleValueChange,onChanged:this.handleValueChanged}))))}}]),a}(i.default));t.default=s}).call(this,a(0))},868:function(e,t,a){"use strict";(function(e,n,o){var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var r=a(72),l=(a(804),a(869)),c=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.curveBoxChange=t.curveBoxChange.bind(t),t.curveBoxChangeEnd=t.curveBoxChangeEnd.bind(t),t.showrgbBox=t.showrgbBox.bind(t),t.showrBox=t.showrBox.bind(t),t.showgBox=t.showgBox.bind(t),t.showbBox=t.showbBox.bind(t),t.reSetAllBox=t.reSetAllBox.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),i(a,[{key:"showrBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var o=n.findDOMNode(this.refs.rBox),i=n.findDOMNode(this.refs.gBox),s=n.findDOMNode(this.refs.bBox),r=n.findDOMNode(this.refs.rgbBox);e(o).css("display","block"),e(i).css("display","none"),e(s).css("display","none"),e(r).css("display","none");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxAddEvent&&l.state.boxAddEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent(),null!=h.state.boxRemoveEvent&&h.state.boxRemoveEvent(),null!=d.state.boxRemoveEvent&&d.state.boxRemoveEvent(),l.setCurvePenColor("#ff0000")}},{key:"showgBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var o=n.findDOMNode(this.refs.rBox),i=n.findDOMNode(this.refs.gBox),s=n.findDOMNode(this.refs.bBox),r=n.findDOMNode(this.refs.rgbBox);e(o).css("display","none"),e(i).css("display","block"),e(s).css("display","none"),e(r).css("display","none");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxAddEvent&&c.state.boxAddEvent(),null!=h.state.boxRemoveEvent&&h.state.boxRemoveEvent(),null!=d.state.boxRemoveEvent&&d.state.boxRemoveEvent(),c.setCurvePenColor("#00ff00")}},{key:"showbBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var o=n.findDOMNode(this.refs.rBox),i=n.findDOMNode(this.refs.gBox),s=n.findDOMNode(this.refs.bBox),r=n.findDOMNode(this.refs.rgbBox);e(o).css("display","none"),e(i).css("display","none"),e(s).css("display","block"),e(r).css("display","none");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent(),null!=h.state.boxAddEvent&&h.state.boxAddEvent(),null!=d.state.boxRemoveEvent&&d.state.boxRemoveEvent(),h.setCurvePenColor("#0000ff")}},{key:"showrgbBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var o=n.findDOMNode(this.refs.rBox),i=n.findDOMNode(this.refs.gBox),s=n.findDOMNode(this.refs.bBox),r=n.findDOMNode(this.refs.rgbBox);e(o).css("display","none"),e(i).css("display","none"),e(s).css("display","none"),e(r).css("display","block");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent(),null!=h.state.boxRemoveEvent&&h.state.boxRemoveEvent(),null!=d.state.boxAddEvent&&d.state.boxAddEvent(),d.setCurvePenColor("#8c8c8c")}},{key:"showNullBox",value:function(){var t=n.findDOMNode(this.refs.rBox),a=n.findDOMNode(this.refs.gBox),o=n.findDOMNode(this.refs.bBox),i=n.findDOMNode(this.refs.rgbBox);e(t).css("display","none"),e(a).css("display","none"),e(o).css("display","none"),e(i).css("display","none");var s=this.refs.rBox,r=this.refs.gBox,l=this.refs.bBox,c=this.refs.rgbBox;null!=s.state.boxRemoveEvent&&s.state.boxRemoveEvent(),null!=r.state.boxRemoveEvent&&r.state.boxRemoveEvent(),null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent()}},{key:"reSetAllBox",value:function(e){var t=this.refs.rBox,a=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox;null!=t.state.reSet&&t.state.reSet(),null!=a.state.reSet&&a.state.reSet(),null!=n.state.reSet&&n.state.reSet(),null!=o.state.reSet&&o.state.reSet();var i=this.pointsToString(o.state.pointsArray),s=this.pointsToString(t.state.pointsArray),r=this.pointsToString(a.state.pointsArray),l=this.pointsToString(n.state.pointsArray);e&&(Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.curve(s,r,l,i)),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()))}},{key:"pointsToString",value:function(e){var t="",a=e.length;if(a>0)for(var n=0;n<a;n++)t+="point "+e[n].x+" "+e[n].y+" ";else 0==a&&(t+="point 0 0 ",t+="point 255 255 ");return t}},{key:"curveBoxChange",value:function(e){this.hadchanged=!0;var t=this.refs.rBox,a=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox,i=this.pointsToString(o.state.pointsArray),s=this.pointsToString(t.state.pointsArray),r=this.pointsToString(a.state.pointsArray),l=this.pointsToString(n.state.pointsArray);Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.curve(s,r,l,i))}},{key:"curveBoxChangeEnd",value:function(e){this.curveBoxChange(e),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"getDefaultHistoryData",value:function(){var e={MasterCurve:[{x:0,y:0},{x:255,y:255}],RedCurve:[{x:0,y:0},{x:255,y:255}],GreenCurve:[{x:0,y:0},{x:255,y:255}],BlueCurve:[{x:0,y:0},{x:255,y:255}],currentBox:"RGB"};return e}},{key:"getCurrentHistoryData",value:function(){var e={},t=this.refs.rBox,a=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox;return e.currentBox=this.refs.dropSelectDom.val(),e.MasterCurve=o.state.pointsArray,e.RedCurve=t.state.pointsArray,e.GreenCurve=a.state.pointsArray,e.BlueCurve=n.state.pointsArray,e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0);var a=this.refs.rBox,n=this.refs.gBox,o=this.refs.bBox,i=this.refs.rgbBox;this.refs.dropSelectDom.setValue(e.currentBox),this.handleSelectChange(e.currentBox),this.boxLoadHistory(i,e.MasterCurve),this.boxLoadHistory(a,e.RedCurve),this.boxLoadHistory(n,e.GreenCurve),this.boxLoadHistory(o,e.BlueCurve)}},{key:"boxLoadHistory",value:function(e,t){e.state.setCurvePts(t)}},{key:"findParentLiDOM",value:function(t){var a=e(t).parent();return e(a).hasClass("inline-list")?t:this.findParentLiDOM(e(a))}},{key:"applyHandler",value:function(){this.fold()}},{key:"preFold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"preFold",this).call(this);var e=this.refs.rBox,t=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox;o.off("change",this.curveBoxChange),e.off("change",this.curveBoxChange),t.off("change",this.curveBoxChange),n.off("change",this.curveBoxChange),o.off("changeEnd",this.curveBoxChangeEnd),e.off("changeEnd",this.curveBoxChangeEnd),t.off("changeEnd",this.curveBoxChangeEnd),n.off("changeEnd",this.curveBoxChangeEnd),this.showNullBox()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this.refs.rBox,t=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox;o.on("change",this.curveBoxChange),e.on("change",this.curveBoxChange),t.on("change",this.curveBoxChange),n.on("change",this.curveBoxChange),o.on("changeEnd",this.curveBoxChangeEnd),e.on("changeEnd",this.curveBoxChangeEnd),t.on("changeEnd",this.curveBoxChangeEnd),n.on("changeEnd",this.curveBoxChangeEnd),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.reSetAllBox(null),this.showrgbBox(null),this.setState({})}},{key:"render",value:function(){return o.createElement("div",{className:"clearfix"},o.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_curves,onClick:this.handleToolFolderClick.bind(this)}),o.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},this.isUnfold&&o.createElement("div",{className:"editor-folder-inner clearfix"},o.createElement(Fotor.ui.SelectDrop,{ref:"dropSelectDom",defaultValue:Fotor.globalConfig.lang.editor_workspace_basic_curvesRGB,items:[Fotor.globalConfig.lang.editor_workspace_basic_curvesRGB,Fotor.globalConfig.lang.editor_workspace_basic_curvesR,Fotor.globalConfig.lang.editor_workspace_basic_curvesG,Fotor.globalConfig.lang.editor_workspace_basic_curvesB],className:"no-scroll",displayItems:5,onChange:this.handleSelectChange.bind(this)}),o.createElement("div",{className:"clearfix"},o.createElement(l,{ref:"rgbBox"}),o.createElement(l,{ref:"rBox"}),o.createElement(l,{ref:"gBox"}),o.createElement(l,{ref:"bBox"})),o.createElement("div",{className:"clearfix editor-folder-btns paddingT5 paddingB5"},o.createElement("a",{className:"btn btn-warning apply-btn",onClick:this.reSetAllBox},Fotor.globalConfig.lang.editor_workspace_basic_curvesRGBResetButton)))))}},{key:"handleSelectChange",value:function(e){switch(e){case Fotor.globalConfig.lang.editor_workspace_basic_curvesRGB:this.showrgbBox();break;case Fotor.globalConfig.lang.editor_workspace_basic_curvesR:this.showrBox();break;case Fotor.globalConfig.lang.editor_workspace_basic_curvesG:this.showgBox();break;case Fotor.globalConfig.lang.editor_workspace_basic_curvesB:this.showbBox()}}}]),a}(r.default);t.default=c}).call(this,a(2),a(18),a(0))},869:function(e,t,a){(function(t,n,o){var i,s=a(16),r=(i=s)&&i.__esModule?i:{default:i};a(870);var l=a(804),c=a(6)({displayName:"curveBox",mixins:[Fotor.Evented],getInitialState:function(){return{curvePts:[],pointsArray:[],curvePenColor:"#8c8c8c",resize:null,reDrawFun:null,boxAddEvent:null,boxRemoveEvent:null,reSet:null,setCurvePts:null,curveboxSize:260}},setCurvePenColor:function(e){this.state.curvePenColor=e,null!=this.state.reDrawFun&&this.state.reDrawFun()},curvePtsPush:function(e){var t=this.state.curvePts;t.push(e),this.setState({curvePts:t})},curvePtsSplice:function(e,t,a){var n=this.state.curvePts;null==a?n.splice(e,t):n.splice(e,t,a),this.setState({curvePts:n})},componentWillUnmount:function(){t(window).off("layoutChange",this.resizeFuc),Fotor.app.off(r.default.THEME_CHANGE,this.resizeFuc)},componentDidMount:function(){var e=this,a=this.refs.curveBackGroundHolder,o=this.refs.curveBackLineHolder,i=this.refs.curveBoxDisplayHolder,s=n.findDOMNode(a),c=t(s).parent().width(),h=t(s).parent().height(),d=new jsDraw2DX.jxGraphics(a),u=new jsDraw2DX.jxGraphics(o),v=new jsDraw2DX.jxGraphics(i),p="black"==Fotor.globalConfig.theme,f="#1e1e1e",m=p?"#323232":"#f5f5f5",g=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(f),.01),C=new jsDraw2DX.jxBrush(new jsDraw2DX.jxColor(m)),b=new jsDraw2DX.jxRect(new jsDraw2DX.jxPoint(0,0),c,h,g,C);b.draw(d);var y=p?"#3c3c3e":"#d2d2d2",_="#ac975e",F=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(y),1),E=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(_),1),w=(new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(0,h),new jsDraw2DX.jxPoint(c,0),E),5),A=5,x=[];function k(e){var t=c/w,a=h/A,n=w-1,o=A-1;if(e){for(var i=0;i<x.length;i++)x[i].remove();x=[]}for(var s=0;s<n;s++){var r=t*(s+1);(d=new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(r,0),new jsDraw2DX.jxPoint(r,h),F)).draw(u),x.push(d)}for(var l=0;l<o;l++){var d,v=a*(l+1);(d=new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(0,v),new jsDraw2DX.jxPoint(c,v),F)).draw(u),x.push(d)}var p=new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(0,h),new jsDraw2DX.jxPoint(c,0),E);p.draw(u),x.push(p)}k(!1);var M,P,T,S,D=4,N="#a0a0a0",I="#a0a0a0",R=1,B=0,O=0,H=(e=this,!1),j=!1,z=!1,G=!1,U=null,L=-1,W=!1;function Y(t,a){var n,o=K(event.offsetX,event.offsetY),i=function(t){if(t.x<=0)return 0;if(t.x>=255)return e.state.curvePts.length-1;var a=Math.max(0,Math.min(255,X().calculateY(t.x)));if(Math.abs(a-t.y)<=20){for(var n,o=0,i=-1,s=10;o<e.state.curvePts.length&&((n=Math.abs(e.state.curvePts[o].x-t.x))<s&&(s=n,i=o),!(e.state.curvePts[o].x>t.x));)o++;return i}return-2}(o);i>-2&&(i>=0?L=i:-1!=(n=function(t){for(var a=0;a<e.state.curvePts.length;a++){if(e.state.curvePts[a].x>=t)return a}return-1}(o.x))&&(V(n,o),L=n,ee(),U=null),L>-1&&(W=!0))}function V(t,a){t>=0&&t<=e.state.curvePts.length&&e.curvePtsSplice(t,0,a)}function Q(e,t){W&&(H=!0,L>-1&&(W=!1,j||ee()),M=-1,P=-1,j=!1,L=-1)}function Z(t){B=event.offsetX,O=event.offsetY,B<0&&(B=0),O<0&&(O=0),B>c&&(B=c),O>h&&(O=h);var a=!1,n=K(B,O);if(n.x=Math.round(n.x),n.y=Math.round(n.y),L>-1){var o=0,i=255;L>0&&(o=e.state.curvePts[L-1].x+2);var s=L+(j?0:1);if(s<e.state.curvePts.length&&(i=e.state.curvePts[s].x-2),a=!1,(L>0&&L<e.state.curvePts.length-1||j)&&(a=n.x<o-1||n.x>i+1||n.y<0||n.y>255),a!=j&&(a?(M=-1,P=-1,e.curvePtsSplice(L,1),G=!0,ee(),U=null):V(L,new jsDraw2DX.jxPoint(0,0)),j=a),!j){var r=e.state.curvePts[L];M=Math.max(Math.min(Math.round(n.x),i),o),P=Math.max(Math.min(Math.round(n.y),255),0),r.x=M,r.y=P,z=!0,ee(),U=null}}}function X(){if(null==U){U=l.createNew();for(var t=0;t<e.state.curvePts.length;t++){var a=e.state.curvePts[t];U.add(a.x,a.y)}}return U}function q(){e.state.curvePts=[],e.curvePtsPush(new jsDraw2DX.jxPoint(0,0)),e.curvePtsPush(new jsDraw2DX.jxPoint(255,255)),null!=U&&(U=null),ee()}function J(e,t){var a=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(N),.01),n=new jsDraw2DX.jxBrush(new jsDraw2DX.jxColor(I));e<D&&(e=D),e>c-D&&(e=c-D),t<D&&(t=D),t>h-D&&(t=h-D);var o=new jsDraw2DX.jxCircle(new jsDraw2DX.jxPoint(e,t),D,a,n);o.draw(v),S.push(o)}function K(e,t){var a=255*e/(c-1),n=255*(c-1-t)/(c-1);return new jsDraw2DX.jxPoint(a,n)}function $(e,t){var a=e*(c-1)/255,n=c-1-t*(c-1)/255;return new jsDraw2DX.jxPoint(a,n)}function ee(){if(null!=X()){var t=e.state.curvePts.length;if(S&&0!=S.length){for(var a=0;a<S.length;a++)S[a].remove();S=[]}else S=[];for(var n=0;n<t;n++){var o=$(e.state.curvePts[n].x,e.state.curvePts[n].y);J(o.x,o.y)}for(var i=new Array,s=0;s<e.state.curvePts.length;s++){var r=e.state.curvePts[s];i.push({x:r.x,y:r.y})}e.state.pointsArray=i,function(t){if(T&&0!=T.length){for(var a=0;a<T.length;a++)T[a].remove();T=[]}else T=[];var n,o,i,s,r=new jsDraw2DX.jxPoint(0,0),l=new jsDraw2DX.jxPoint(0,0);for((r=K(l.x,l.y)).y=Math.max(Math.min(t.calculateY(r.x),255),0);r.x<=255;){l.x++;var c=K(l.x,l.y);c.y=Math.max(Math.min(t.calculateY(r.x),255),0);var h=$(r.x,r.y),d=$(c.x,c.y),u=(n=h,o=d,i=void 0,s=void 0,i=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(e.state.curvePenColor),R),(s=new jsDraw2DX.jxLine(n,o,i)).draw(v),s);T.push(u),r.x=c.x,r.y=c.y}}(X()),(G||z)&&(G=z=!1,e.trigger("change")),H&&(e.trigger("changeEnd"),H=!1)}}this.curvePtsPush(new jsDraw2DX.jxPoint(0,0)),this.curvePtsPush(new jsDraw2DX.jxPoint(255,255)),e.state.resize=function(){c=e.state.curveboxSize,h=e.state.curveboxSize;var t="black"==Fotor.globalConfig.theme;f="#1e1e1e",m=t?"#323232":"#ebebeb",g=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(f),.01),C=new jsDraw2DX.jxBrush(new jsDraw2DX.jxColor(m)),b=new jsDraw2DX.jxRect(new jsDraw2DX.jxPoint(0,0),c,h,g,C),y=t?"#3c3c3e":"#d2d2d2",_="#ac975e",F=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(y),1),E=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(_),1),w=5,A=5,b.remove(),(b=new jsDraw2DX.jxRect(new jsDraw2DX.jxPoint(0,0),c,h,g,C)).draw(d),k(!0),ee()},e.state.reDrawFun=ee,e.state.boxAddEvent=function(){i.addEventListener("mousemove",Z),i.addEventListener("mousedown",Y),i.addEventListener("mouseup",Q),t(document).on("mouseup",Q)},e.state.boxRemoveEvent=function(){i.removeEventListener("mousemove",Z),i.removeEventListener("mousedown",Y),i.removeEventListener("mouseup",Q),t(document).on("mouseup",Q)},e.state.reSet=q,e.state.setCurvePts=function(t){if(t)if(t.length>0){e.state.curvePts=[];for(var a=0;a<t.length;a++)e.curvePtsPush(new jsDraw2DX.jxPoint(t[a].x,t[a].y));null!=U&&(U=null),ee()}else q()},this.resizeFuc(),t(window).on("layoutChange",this.resizeFuc),Fotor.app.on(r.default.THEME_CHANGE,this.resizeFuc)},resizeFuc:function(){var e=260;t(window).width()<Fotor.holderWidth()&&(e=196),this.setState({curveboxSize:e});var a=this;setTimeout((function(){a.state.resize()}),200)},render:function(){return o.createElement("div",{className:"curvebox clearfix"},o.createElement("div",{ref:"curveBackGroundHolder",style:{position:"absolute",width:this.state.curveboxSize,height:this.state.curveboxSize}}),o.createElement("div",{ref:"curveBackLineHolder",style:{position:"absolute",width:this.state.curveboxSize,height:this.state.curveboxSize}}),o.createElement("div",{ref:"curveBoxDisplayHolder",style:{position:"absolute",width:this.state.curveboxSize,height:this.state.curveboxSize}}))}});e.exports=c}).call(this,a(2),a(18),a(0))},870:function(e,t,a){var n=a(871);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},871:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,".curvebox {\n  position: relative;\n  margin-top: 4px;\n  width: 100%;\n  padding-top: 100%; }\n  .curvebox div {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%; }\n",""])},872:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.intensity_value=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"handleIntensityChange",value:function(e){this.hadchanged=!0,this.intensity_value=this.refs.intensity.val(),e&&this.updataProcess()}},{key:"handleIntensityChanged",value:function(){this.handleIntensityChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=.008*this.intensity_value,t=Fotor.EngineAction.vignette(e);Fotor.mainCanvas.fotorEngine.process_rule(t)}},{key:"getDefaultHistoryData",value:function(){var e={intensity:0};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.intensity=parseInt(this.refs.intensity.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.intensity.setDefault(e.intensity),this.intensity_value=this.refs.intensity.val()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){this.hadchanged&&(Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1),o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.refs.intensity.setDefault(0),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_vignette||"vignette",onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_vignette_intensity||"intensity",e.createElement("span",{ref:"intensitySpan",className:"pull-right"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"intensity",type:"range",max:"100",min:"0",default:"0",bindEle:this.refs.intensitySpan,className:"input-range-grey",onChange:this.handleIntensityChange.bind(this),onChanged:this.handleIntensityChanged.bind(this)}))))}}]),a}(a(72).default);t.default=i}).call(this,a(0))},899:function(e,t,a){var n=a(900);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},900:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,".basic-hdr {\n  position: relative;\n  z-index: 11;\n  display: block;\n  margin-top: 8px;\n  margin-left: 4px;\n  width: 300px;\n  height: 210px;\n  background: url("+n(a(901))+");\n  background-size: cover;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  cursor: pointer; }\n\n.basic-hdr_zh_CN {\n  background-image: url("+n(a(902))+"); }\n\n.basic-hdr_de_DE {\n  background-image: url("+n(a(903))+"); }\n\n.basic-hdr_fr_FR {\n  background-image: url("+n(a(904))+"); }\n\n.basic-hdr_ja_JP {\n  background-image: url("+n(a(905))+"); }\n\n.basic-hdr_ru_RU {\n  background-image: url("+n(a(906))+"); }\n\n.basic-hdr_zh_TW {\n  background-image: url("+n(a(907))+"); }\n\n.basic-hdr_es_ES {\n  background-image: url("+n(a(908))+"); }\n\n.basic-hdr_pt_BR {\n  background-image: url("+n(a(909))+"); }\n\n@media (max-width: 1279px) {\n  body.no-ads .basic-hdr {\n    width: 226px;\n    height: 158px; } }\n\n@media (max-width: 1439px) {\n  body.ads .basic-hdr {\n    width: 226px;\n    height: 158px; } }\n",""])},901:function(e,t,a){e.exports=a.p+"images/en_US6384b88574a9fd2812abd29e4c4fae03.png"},902:function(e,t,a){e.exports=a.p+"images/zh_CNf2028ee7d92884ba2f947a9764d39aea.png"},903:function(e,t,a){e.exports=a.p+"images/de_DE2e5f55c421aa95bce476ffe1e8dc73d9.png"},904:function(e,t,a){e.exports=a.p+"images/fr_FRdc350de23880c798e6b5452a3c16a2cc.png"},905:function(e,t,a){e.exports=a.p+"images/ja_JP00e6357397be5e7ac10668c21c772828.png"},906:function(e,t,a){e.exports=a.p+"images/ru_RUb2af4f98d8cf80f6606ccea3045efabb.png"},907:function(e,t,a){e.exports=a.p+"images/zh_TW8510480b2bfddbd1ab2db5d4fee3b9b1.png"},908:function(e,t,a){e.exports=a.p+"images/es_ESf079f5b4452ee979192b310a6ec7ae55.png"},909:function(e,t,a){e.exports=a.p+"images/pt_BRdbb34044e85aeee969408cfadc3a394a.png"},910:function(e,t,a){(function(t,n){var o,i=b(a(911)),s=(b(a(912)),b(a(928))),r=b(a(948)),l=b(a(951)),c=b(a(952)),h=b(a(954)),d=b(a(959)),u=b(a(964)),v=b(a(965)),p=b(a(153)),f=b(a(7)),m=b(a(8)),g=b(a(16)),C=b(a(760));function b(e){return e&&e.__esModule?e:{default:e}}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(966);var _=a(21).default,F=a(6)((y(o={displayName:"EffectList",mixins:[Fotor.mixin],ismount:!1,actionNewbieGuideName:"editorEffectList",newbieGuideUpdateId:0,getInitialState:function(){return{scrollArea:null,langChange:!1,newbieGuide:!1,effectList:["Artistic","Returned","Classic","Warmwinter","Christmas","Festive","Cinematic","Sunnedup","Lomo","Chromed","Mono","Vintage","Filmatic","Disposable","Serenity","Funky","Cool","Scenes","Bandw","Analog","Groovy","Mellow","Grayscale","Purity","Retro","Oilpainted","Refreshing","Spring","Faded","Vignetteparty"]}},componentDidMount:function(){this.ismount=!0,this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.favoriteManager.on(p.default.UPDATE,this.updateData),Fotor.app.on(p.default.UPDATE,this.updateData),Fotor.mainCanvas?this.init():Fotor.app.on(f.default.APP_INIT,this.init)},componentWillUnmount:function(){this.ismount=!1,Fotor.favoriteManager.off(p.default.UPDATE,this.updateData),Fotor.app.off(p.default.UPDATE,this.updateData),Fotor.app.off(g.default.LANGUAGE_CHANGE,this.updateLang),Fotor.mainCanvas.off(m.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.off(m.default.EXIT_EDITOR_MODE,this.updateData)},init:function(){Fotor.mainCanvas.on(m.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.on(m.default.EXIT_EDITOR_MODE,this.updateData),Fotor.app.on(g.default.LANGUAGE_CHANGE,this.updateLang),this.newbieGuideDetect()},newbieGuideDetect:function(){Fotor.newbieGuide&&!Fotor.newbieGuide.guide.editor.effect&&this.refs.scrollArea&&Fotor.mainCanvas&&Fotor.mainCanvas.editorMode&&!Fotor.plusEditorMode&&!Fotor.isSampleRouter?Fotor.newbieGuide.doAction({name:this.actionNewbieGuideName,show:this.showNewbieGuide,hide:this.hideNewbieGuide}):this.hideNewbieGuide()},showNewbieGuide:function(){var e=this;setTimeout((function(){return e.refs.scrollArea.scrollBottom()}),1200),this.setState({newbieGuide:!0}),this.updateLang(),this.newbieGuideUpdateId=setInterval(this.updateNewbieGuidPosition,50)},updateNewbieGuidPosition:function(){if(t("#tiltShiftTool").length>0&&t("#effect-newbie-guide").length>0){var e=t("#tiltShiftTool").offset(),a=t("#effect-newbie-guide").height();t("#effect-newbie-guide").css("top",e.top-a/2-64-20),t("#effect-newbie-guide").css("display","block")}},updateData:function(){this.ismount&&(this.forceUpdate(),this.newbieGuideDetect())},updateLang:function(){var e=this;this.ismount&&(this.setState({langChange:!0}),setTimeout((function(){e.ismount&&e.setState({langChange:!1})}),300))}},"componentWillUnmount",(function(){Fotor.favoriteManager.off(p.default.UPDATE,this.updateData),Fotor.app.off(f.default.APP_INIT,this.init),Fotor.mainCanvas.off(m.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.off(m.default.EXIT_EDITOR_MODE,this.updateData),Fotor.app.off(g.default.LANGUAGE_CHANGE,this.updateLang),this.hideNewbieGuide(),Fotor.newbieGuide&&Fotor.newbieGuide.removeActionByName(this.actionNewbieGuideName)})),y(o,"handleScroll",(function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200)})),y(o,"render",(function(){var e=this;return n.createElement("div",{id:"toolbar"},n.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),n.createElement("div",{className:"toolbar-loading"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),n.createElement(C.default,{ref:"helpTip"}),n.createElement("div",{className:"toolbar"},n.createElement("div",{className:"toolbar-list"},n.createElement(_,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},!Fotor.plusEditorMode&&!Fotor.frameMode&&n.createElement("a",{href:"http://goart.fotor.com/pc/",target:"_blank",className:"goartLink "+FotorUtils.I18N.getLocale()}),n.createElement(v.default,{className:"marginT0",scroller:this.state.scrollArea,langChange:this.state.langChange}),this.state.effectList.map((function(t){return n.createElement(i.default,{toolName:t,effectGroupId:t,key:t,scroller:e.state.scrollArea,langChange:e.state.langChange})})),n.createElement(s.default,{toolName:"MagicBrush",effectGroupId:"MagicBrush",scroller:this.state.scrollArea,langChange:this.state.langChange}),n.createElement(h.default,{toolName:"LensFlare",effectGroupId:"LensFlare",scroller:this.state.scrollArea,langChange:this.state.langChange}),n.createElement(u.default,{toolName:"Particles",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide}),n.createElement(r.default,{toolName:"ColorSplash",effectGroupId:"ColorSplash",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(l.default,{toolName:"Pixelate",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide}),n.createElement(d.default,{toolName:"TiltShift",ref:"TiltShift",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(c.default,{toolName:"PhotoBlur",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement("div",{style:{height:"50px"}},""))),this.state.newbieGuide&&!Fotor.plusEditorMode&&n.createElement("div",{id:"effect-newbie-guide",className:"active"},n.createElement("a",{className:"close",onClick:this.handleCloseNewbieGuide}),Fotor.globalConfig.lang.newbieGuide_editor_effect_special_tip,n.createElement("div",{className:"clearfix paddingT10"},n.createElement("a",{className:"skip",onClick:this.handleSkip},Fotor.globalConfig.lang.newbieGuide_skip_btn),n.createElement("a",{onClick:this.handleCloseNewbieGuide},Fotor.globalConfig.lang.newbieGuide_readBtn)))))})),y(o,"handleCloseNewbieGuide",(function(){this.hideNewbieGuide(),Fotor.newbieGuide&&(Fotor.newbieGuide.guide.editor.effect=!0,Fotor.newbieGuide.saveGuide(),Fotor.newbieGuide.removeActionByName(this.actionNewbieGuideName))})),y(o,"handleSkip",(function(){this.handleCloseNewbieGuide(),Fotor.newbieGuide&&Fotor.newbieGuide.skip()})),y(o,"hideNewbieGuide",(function(){clearInterval(this.newbieGuideUpdateId),this.newbieGuideUpdateId=0,this.setState({newbieGuide:!1}),this.updateLang(),t("#effect-newbie-guide").css("display","none")})),y(o,"showHelpTip",(function(e,t,a,n){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,n)})),y(o,"hideHelpTip",(function(){this.refs.helpTip&&this.refs.helpTip.hide()})),o));e.exports=F}).call(this,a(2),a(0))},911:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(806)),r=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state.groupData=null,t.state.deEffect=!1,t.state.thumbImg=null,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),n(i,[{key:"loadData",value:function(e){var t=a(151)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t].state.beSelected&&this.refs["webglEffectItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["webglEffectItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t]&&this.refs["webglEffectItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"afterfold",this).call(this),this.setState({deEffect:!1})}},{key:"afterUnfold",value:function(){var e=this;setTimeout((function(){e.creatImgThumb((function(){for(var t=e.state.groupData.items.length,a=0;a<t;a++)e.refs["webglEffectItem_"+a].updataThumbImage();e.setState({deEffect:!0}),Fotor.progressBar.hide()}))}),100),e.setState({deEffect:!0})}},{key:"creatImgThumb",value:function(e){var t=this;Fotor.mainCanvas.requestDocumentToolThumb().then((function(a){Fotor.mainCanvas.doEffectCanvas||(Fotor.mainCanvas.doEffectCanvas=document.createElement("canvas")),Fotor.mainCanvas.doEffectCanvas.getContext("2d").clearRect(0,0,Fotor.mainCanvas.doEffectCanvas.width,Fotor.mainCanvas.doEffectCanvas.height),Fotor.mainCanvas.doEffectCanvas.setAttribute("width",a.width),Fotor.mainCanvas.doEffectCanvas.setAttribute("height",a.height),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,null,!0),Fotor.mainCanvas.effectThumb=a.toDataURL("image/jpeg",.7),t.state.thumbImg=Fotor.mainCanvas.effectThumb,e&&e()}))}},{key:"componentWillReceiveProps",value:function(e){e&&null==this.state.groupData&&this.setState({groupData:this.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"loadTempHistoryData",value:function(e,t){var a=this;a.creatImgThumb((function(){for(var e=a.state.groupData.items.length,t=0;t<e;t++)a.refs["webglEffectItem_"+t]&&(a.refs["webglEffectItem_"+t].cancelHandler(),a.refs["webglEffectItem_"+t].updataThumbImage());a.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}))}},{key:"doItemUnFold",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)null==e||null==e||"toBig"==e||"updataThumb"==e?null==e||null==e||"toBig"==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):null!=e&&null!=e&&"updataThumb"!=e||this.refs["webglEffectItem_"+a].updataThumbImage():this.refs["webglEffectItem_"+a]!=e&&this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a].setState({beSelected:!1}):this.refs["webglEffectItem_"+a]!=e||this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a]==e&&this.refs["webglEffectItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({deEffect:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title]?Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase():"NO KEY: "+this.state.groupData.title,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map((function(a,n){return e.createElement(s,{ref:"webglEffectItem_"+n,unFoldFun:t.doItemUnFold.bind(t),data:a,doEffect:t.state.deEffect,key:n,vip:t.state.groupData.isVip,effectGroupId:t.props.effectGroupId,thumbImg:t.state.thumbImg,scroller:t.props.scroller})})))):e.createElement("div",null)}}]),i}(i.default);t.default=r}).call(this,a(0))},912:function(e,t,a){"use strict";(function(e,n,o){var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0}),a(913);var r=a(72),l=a(916),c=a(8),h=function(t){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state.groupData=null,t.state.stickerGroup=null,t.state.btnImageSrc=null,t.state.faceDeformer=null,t.state.loadNextFun=null,t.state.loadNextIndex=null,t.state.jsLoadComplete=!1,t.state.faceFoundComplete=!1,t.state.picHasFace=!1,t.state.hadUsedVip=!1,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t.state.hideHelpTipTimeId=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),i(r,[{key:"loadData",value:function(e){var t=a(151)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"loadImageSrc",value:function(e){if(e){for(var t=[],n=0;n<e.items.length;n++){var o=a(755)("./"+e.items[n].btnSrc+".png");t.push(o)}return t}}},{key:"loadStickerData",value:function(){var e=a(925);return"string"==typeof e?""!==e&&(e=JSON.parse(e)):e=e,e}},{key:"applyHandler",value:function(){s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"applyHandler",this).call(this);this.state.hadUsedVip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.fotorEngine.clean();var t=document.createElement("canvas");e(t).attr({width:Fotor.mainCanvas.editorCanvasEle[0].width,height:Fotor.mainCanvas.editorCanvasEle[0].height}),t.getContext("2d")&&(t.getContext("2d").drawImage(Fotor.mainCanvas.editorCanvasEle[0],0,0),t.getContext("2d").drawImage(Fotor.mainCanvas.beautyCanvasEle[0],0,0)),Fotor.mainCanvas.fotorEngine.set_image(t,t.width,t.height,Fotor.mainCanvas.engineFluentSize,Fotor.mainCanvas.engineStep),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.state.hadUsedVip&&Fotor.vipResManager.resetWaterMark(),this.tryFold()}},{key:"applyfold",value:function(){this.preFold(),this.afterfold(),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"fold",this).call(this);var t=this,a=n.findDOMNode(this.refs.toolTitle),o=n.findDOMNode(this.refs.toolContent);t.refs.toolTitle&&t.refs.toolTitle.deactivate&&this.refs.toolTitle.deactivate(),"block"==e(o).css("display")&&(e(o).slideUp("fast",(function(){t.scrollerUpFix(t.props.scroller)})),e(a).removeClass("title-drop-active"))}},{key:"afterfold",value:function(){e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),this.state.loadNextFun=null,this.state.loadNextIndex=null,this.state.jsLoadComplete=!1,this.state.faceFoundComplete=!1,this.state.picHasFace=!1,this.state.hadUsedVip=!1,Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(c.default.CONTENT_CHANGE),s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"afterfold",this).call(this)}},{key:"afterUnfold",value:function(){FotorAnalytic.pageView("/editorTool/effect/halloween/afterUnfold",Fotor.routerManager.getToolPath()),Fotor.progressBar.hide();var e=this;a.e(16).then(function(){window.clm=a(1508),Fotor.common.utils.LoadScript("//pub-static.haozhaopian.net/static/web/share/js/libs/clmtrackr-dev/auto_face_deformer.js?version=1.86",e.afterJsLoad.bind(e))}.bind(null,a)).catch(a.oe),this.state.loadNextFun=null,this.state.loadNextIndex=null}},{key:"afterJsLoad",value:function(){this.state.jsLoadComplete=!0,Fotor.mainCanvas.enterBeautyMode(!1,!1),document.addEventListener("faceFound",this.faceFoundHandler.bind(this)),document.addEventListener("faceNotFound",this.faceNotFoundHandler.bind(this)),this.state.faceDeformer=new autoFaceDeformer,this.state.faceDeformer.loadImage(Fotor.mainCanvas.editorCanvasEle[0]),this.state.faceDeformer.startDetection()}},{key:"faceFoundHandler",value:function(){this.state.picHasFace=!0,this.state.faceFoundComplete=!0,this.state.loadNextFun&&this.state.loadNextIndex&&this.state.loadNextFun(this.state.loadNextIndex),this.forceUpdate(),this.forceUpdate()}},{key:"faceNotFoundHandler",value:function(){this.state.picHasFace=!1,this.state.faceFoundComplete=!0,this.popNoFaceFrame(),this.forceUpdate(),this.forceUpdate()}},{key:"popNoFaceFrame",value:function(){Fotor.progressBar.hide(),e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),Fotor.popup.doPopup({content:Fotor.globalConfig.lang.editor_workspace_effect_halloween_noface,confirmBtnText:Fotor.globalConfig.lang.newbieGuide_readBtn},(function(){}))}},{key:"componentWillReceiveProps",value:function(e){if(e&&null==this.state.groupData){var t=this.loadData(e.effectGroupId),a=this.loadStickerData(),n=this.loadImageSrc(t);this.setState({groupData:t,btnImageSrc:n,stickerGroup:a})}}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"randomHalloweenEffect",value:function(){Fotor.progressBar.show(!0),e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),this.state.jsLoadComplete&&this.state.faceFoundComplete?this.state.picHasFace?this.daRandomHalloweenEffect():this.popNoFaceFrame():(this.state.loadNextFun=this.daRandomHalloweenEffect.bind(this),this.state.loadNextIndex=999)}},{key:"daRandomHalloweenEffect",value:function(){FotorAnalytic.pageView("/editorTool/effect/halloweenTool/tryRandom",Fotor.routerManager.getToolPath());var e=this,t=[],n=new Image,o=new Image,i=new Image,s=new Image;n.crossOrigin="anonymous",o.crossOrigin="anonymous",i.crossOrigin="anonymous",s.crossOrigin="anonymous",n.onload=function(){if(t.push({img:n,points:e.state.groupData.items[0].commond,special:e.state.groupData.items[0].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},o.onload=function(){if(t.push({img:o,points:e.state.groupData.items[1].commond,special:e.state.groupData.items[1].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},i.onload=function(){if(t.push({img:i,points:e.state.groupData.items[2].commond,special:e.state.groupData.items[2].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},s.onload=function(){if(t.push({img:s,points:e.state.groupData.items[3].commond,special:e.state.groupData.items[3].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},Promise.resolve().then(function(){n.src=a(755)("./"+e.state.groupData.items[0].faceSrc+".png"),o.src=a(755)("./"+e.state.groupData.items[1].faceSrc+".png"),i.src=a(755)("./"+e.state.groupData.items[2].faceSrc+".png"),s.src=a(755)("./"+e.state.groupData.items[3].faceSrc+".png")}.bind(null,a)).catch(a.oe),this.state.hadUsedVip=!1,this.state.hadUsedVip?Fotor.vipResManager.setEditorWaterMark():(Fotor.vipResManager.unsetEditorVip(),Fotor.vipResManager.resetWaterMark())}},{key:"findParentDOM",value:function(t){if(e(t).hasClass("halloweenImageDiv"))return t;var a=e(t).parent();return this.findParentDOM(a)}},{key:"doHalloweenEffect",value:function(t){var a=this.findParentDOM(e(t.target)),n=e(a).attr("data-index");e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),e(a).find(".halloweenImage ").addClass("effectSelected"),Fotor.progressBar.show(!0),this.state.jsLoadComplete&&this.state.faceFoundComplete?this.state.picHasFace?this.doHalloweenEffectByIndex(n):this.popNoFaceFrame():(this.state.loadNextFun=this.doHalloweenEffectByIndex.bind(this),this.state.loadNextIndex=n)}},{key:"doHalloweenEffectByIndex",value:function(e){FotorAnalytic.pageView("/editorTool/effect/halloweenTool/tryEffectById"+e,Fotor.routerManager.getToolPath());var t=this,n=new Image;n.crossOrigin="anonymous",n.onload=function(){var a=[{img:n,points:t.state.groupData.items[e].commond,special:t.state.groupData.items[e].special}];t.state.faceDeformer.drawToCanvas(a);var o=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(o.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),o.drawImage(t.state.faceDeformer.getCanvas(),0,0)):console.log("..."),t.state.loadNextFun=null,t.state.loadNextIndex=null,Fotor.progressBar.hide()},Promise.resolve().then(function(){n.src=a(755)("./"+t.state.groupData.items[e].faceSrc+".png")}.bind(null,a)).catch(a.oe),this.state.hadUsedVip=t.state.groupData.items[e].isVip,this.state.hadUsedVip?Fotor.vipResManager.setEditorWaterMark():(Fotor.vipResManager.unsetEditorVip(),Fotor.vipResManager.resetWaterMark())}},{key:"showStickerHelpTip",value:function(t){if(this.state.showHelpTip=!this.state.showHelpTip,this.state.showHelpTip){clearTimeout(this.state.hideHelpTipTimeId);var n=e(this.refs.stickerhelpTip).offset();this.props.showHelpTip&&this.props.showHelpTip(a(926),Fotor.globalConfig.lang.editor_workspace_effect_halloween_stackers_tip,n.top-64,n.left-70)}t.stopPropagation()}},{key:"hideStickerHelpTip",value:function(){var e=this;clearTimeout(this.state.hideHelpTipTimeId),this.state.hideHelpTipTimeId=setTimeout((function(){e.state.showHelpTip=!1,e.props.hideHelpTip&&e.props.hideHelpTip()}),300)}},{key:"render",value:function(){var e=this;if(null!=this.state.groupData){var t=this.state.stickerGroup.background;t&&""!=t&&"-1"==t.indexOf("#")&&(t="#"+t);var n={margin:"10px 0 0 0",display:"block",backgroundColor:t};return o.createElement("div",null,o.createElement(Fotor.ui.TitleDrop,{specialIcon:window.specialIcon&&window.specialIcon[window.specialIcon.festival],ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,helpTip:Fotor.globalConfig.lang.editor_workspace_effect_halloween_tip,helpTipGif:a(927),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,text:Fotor.globalConfig.lang[this.state.groupData.title]?Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase():"NO KEY: "+this.state.groupData.title,onClick:this.handleToolFolderClick.bind(this)}),o.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},o.createElement("div",{style:{margin:"0 8px 8px 4px"}},o.createElement("div",{className:"clearfix marginT20"},o.createElement("div",{className:"halloween_faceText pull-left"},Fotor.globalConfig.lang.editor_workspace_effect_halloween_label_face),o.createElement(Fotor.ui.Button,{className:"halloween_randomBtn pull-right",ref:"uploadFileBtn",text:Fotor.globalConfig.lang.editor_workspace_effect_halloween_btn_random,onClick:e.randomHalloweenEffect.bind(this)})),o.createElement("div",{className:"clearfix halloween_t_line marginT20"}),o.createElement("div",{className:"clearfix"},this.state.groupData.items.map((function(t,a){return o.createElement("div",{className:"halloweenImageDiv",key:a,"data-index":t.index},o.createElement("div",{className:"halloweenImage",onClick:e.doHalloweenEffect.bind(e),style:{background:"url("+e.state.btnImageSrc[t.index]+") center"}}),o.createElement("div",{className:"halloweenName"}," ",Fotor.globalConfig.lang[t.name]))}))),o.createElement("div",{className:"clearfix effect-item-btns paddingT20"},o.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler.bind(e)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),o.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler.bind(e)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)),o.createElement("div",{className:"clearfix halloween_b_line marginT30"}),o.createElement("div",null,o.createElement("div",{style:{display:"inline-block"}},Fotor.globalConfig.lang.editor_workspace_effect_halloween_label_stackers),o.createElement("span",{className:"halloween-help-tip",ref:"stickerhelpTip",onMouseOver:e.showStickerHelpTip.bind(e),onMouseOut:e.hideStickerHelpTip.bind(e),onClick:function(e){return e.stopPropagation()}})),o.createElement("div",{className:"clearfix clearfix sticker-group sticker-group-4",style:n},this.state.stickerGroup.items.map((function(e,t){return o.createElement(l,{data:e,display:!0,key:e.id,cols:4})}))))))}return o.createElement("div",null)}}]),r}(r.default);t.default=h}).call(this,a(2),a(18),a(0))},913:function(e,t,a){var n=a(914);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},914:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,"/*-----------------------------------------\n * Base Settings\n * ----------------------------------------*/\n/*-----------------------------------------\n * Layout\n * ----------------------------------------*/\n/*-----------------------------------------\n * Mixin\n * ----------------------------------------*/\n.halloween_faceText {\n  font-size: 14px;\n  cursor: default;\n  color: #1e1e1e;\n  line-height: 30px;\n  vertical-align: middle; }\n\n.halloween_randomBtn {\n  line-height: 10px;\n  font-size: 12px; }\n\n.halloween_t_line {\n  width: 100%;\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.3);\n  margin-bottom: 20px; }\n\n.halloween_b_line {\n  width: 100%;\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.3);\n  margin-bottom: 30px; }\n\n.halloweenImageDiv {\n  display: inline-block;\n  position: relative;\n  width: 100px;\n  margin-right: 30px;\n  margin-left: 20px; }\n  .halloweenImageDiv .halloweenImage {\n    display: block;\n    cursor: pointer;\n    width: 100%;\n    height: 100px;\n    margin-top: 10px;\n    margin-bottom: 10px; }\n  .halloweenImageDiv .halloweenName {\n    width: 100%;\n    text-align: center;\n    color: #646464; }\n  .halloweenImageDiv:hover .halloweenImage {\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3);\n    -webkit-box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3);\n    -moz-box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3); }\n  .halloweenImageDiv:hover .effectSelected {\n    box-shadow: 0 0 0 1px #ac9753;\n    -webkit-box-shadow: 0 0 0 1px #ac9753;\n    -moz-box-shadow: 0 0 0 1px #ac9753; }\n  .halloweenImageDiv:hover .halloweenName {\n    color: #646464; }\n  .halloweenImageDiv:active .halloweenImage {\n    box-shadow: 0 0 0 1px #ac975e;\n    -webkit-box-shadow: 0 0 0 1px #ac975e;\n    -moz-box-shadow: 0 0 0 1px #ac975e; }\n  .halloweenImageDiv:active .effectSelected {\n    box-shadow: 0 0 0 1px #ac9753;\n    -webkit-box-shadow: 0 0 0 1px #ac9753;\n    -moz-box-shadow: 0 0 0 1px #ac9753; }\n  .halloweenImageDiv:active .halloweenName {\n    color: #ac975e; }\n  .halloweenImageDiv .effectSelected {\n    box-shadow: 0 0 0 1px #ac9753;\n    -webkit-box-shadow: 0 0 0 1px #ac9753;\n    -moz-box-shadow: 0 0 0 1px #ac9753; }\n\n.halloween-help-tip {\n  position: relative;\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  margin-left: 10px;\n  margin-bottom: 2px;\n  vertical-align: middle;\n  background: url("+n(a(915))+") top no-repeat;\n  cursor: default; }\n\n@media (max-width: 1279px) {\n  body.no-ads .halloweenImageDiv {\n    width: 75px;\n    margin-right: 18px;\n    margin-left: 18px; }\n    body.no-ads .halloweenImageDiv .halloweenImage {\n      height: 75px; } }\n\n@media (max-width: 1439px) {\n  body.ads .halloweenImageDiv {\n    width: 75px;\n    margin-right: 18px;\n    margin-left: 18px; }\n    body.ads .halloweenImageDiv .halloweenImage {\n      height: 75px; } }\n",""])},915:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjQ5MDc5NkNCM0ZCMTFFNzg3MjVBREQzMzIxRjlFOUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjQ5MDc5NkRCM0ZCMTFFNzg3MjVBREQzMzIxRjlFOUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NDkwNzk2QUIzRkIxMUU3ODcyNUFERDMzMjFGOUU5QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NDkwNzk2QkIzRkIxMUU3ODcyNUFERDMzMjFGOUU5QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptq+H/8AAAFUSURBVHjabNLLK4RRGMfxl2aSS2TBRmwUFlbKWEgxQ24rKdmymIWNXDZjIzb+A6spk4XbaiiRhMSCKTZGwgobJUVuofg++k2mw1OfzTnPr3Pe8z6+WCzmqXJRh27UokTr1zhEHAd4tsXMtNAI5pBEm4KmA2eYV4/1ej5kYBBDOvEchajR3i2msakTPzFlwSqMIoALFCGKVjwq2KubBBSOZ+qkMYWs2lEtxcjHuPasJ2JXtmAL1r3fmkU5LlGPD5yk7a8hZMEyXHl/qwt72MBk2voNSi34gpx/giGsYMBZL8CDPc6RXnDXaYjoVd2yb0/aiQvoQ5bTsIxTZ816+rFowRk0I+yEj7HvhMLqjdpV3zRm2/jCEu41JVZ+DUSP/XgELePTps1io65dgR3NqF9j14BONCHxM3J5r1upqySesoM2csOYQCXeNYKrNo703qWavwUYAPHUThYUfDwrAAAAAElFTkSuQmCC"},916:function(e,t,a){(function(t,n){var o=a(50).default,i=a(6)({displayName:"HalloweenStickerItem",hanldeClick:function(e,a){var n=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())n.doClickAction(e,a);else{var o=t.Deferred();o.promise().then((function(){n.doClickAction(e,a)}));var i=Fotor.vipResManager.getUpgradeContent("resource");Fotor.common.User.useVipResource(i,o,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var n=FotorUtils.Object.simpleClone(this.props.data);if(n.innerCategory=Number(n.innerCategory),n.hasBorder=!1,n.fileScale=n.scale,n=FotorUtils.Object.simpleClone(n),a){var o=t("#canvas").offset(),i={x:(e.pageX?e.pageX:e.clientX)-o.left,y:(e.pageY?e.pageY:e.clientY)-o.top};i.x=i.x<-50?-50:i.x,Fotor.mainCanvas.placeObject("fotor/sticker",n,i)}else Fotor.mainCanvas.placeObject("fotor/sticker",n);FotorAnalytic.pageView("/editorTool/halloween/sticker/"+n.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){var a=this;if(!(this.props.data.vip||this.props.groupData&&this.props.groupData.vip)||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragAction(e);else{var n=t.Deferred();n.promise().then((function(){a.doDragAction(e)}));var o=Fotor.vipResManager.getUpgradeContent("resource");Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragAction:function(e){var t="//pub-static.haozhaopian.net"+this.props.data.thumb,a=(this.props.data.url,document.createElement("img"));a.src=t;var n=FotorUtils.Object.simpleClone(this.props.data);n.innerCategory=parseInt(n.innerCategory),n.hasBorder=!1;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";Fotor.dragHelper.setCurrentDragObject(n,"fotor/sticker"),e.dataTransfer.setData("text","fotor/sticker"),FotorAnalytic.pageView("/editorTool/halloween/sticker/"+n.id+"/click",Fotor.routerManager.getToolPath())},render:function(){return n.createElement("div",{className:"sticker-item-wrapper"},n.createElement("div",{className:"sticker-item",ref:"stickerItem",draggable:"true",onClick:this.hanldeClick,onDragStart:this.handleDragStart},this.props.data.vip&&n.createElement("span",{className:"search-vip"}),n.createElement(o,{"data-display":this.props.display},n.createElement("img",{src:"//pub-static.haozhaopian.net"+this.props.data.thumb}))))}});e.exports=i}).call(this,a(2),a(0))},917:function(e,t,a){e.exports=a.p+"images/halloweenBtn_043e0984884d754355a578211484e3f40.png"},918:function(e,t,a){e.exports=a.p+"images/halloweenBtn_1f9a22ad22ab9f08868fbef212bfb24f5.png"},919:function(e,t,a){e.exports=a.p+"images/halloweenBtn_216952f708150eca9f6959ab4bea13581.png"},920:function(e,t,a){e.exports=a.p+"images/halloweenBtn_3b63b2b473c9db4a1f029cb58f6bb48a5.png"},921:function(e,t,a){e.exports=a.p+"images/halloween_09341456295b1736315137c2daa54e309.png"},922:function(e,t,a){e.exports=a.p+"images/halloween_11f35d26a1aa85aa72034ca7ec2770a3f.png"},923:function(e,t,a){e.exports=a.p+"images/halloween_29f57f5aef1f85e0efa15d75a37cc99f2.png"},924:function(e,t,a){e.exports=a.p+"images/halloween_316d48a8ba632e53099f9da29c87783aa.png"},925:function(e){e.exports=JSON.parse('{"background":"fadede","items":[{"cacheAble":false,"thumb":"/assets/stickers/hf1/5375f484-f87b-46ee-a920-3d6f26585cfb_thumb.png","scale":0.5,"updateTime":1508319516000,"label":null,"url":"/assets/stickers/hf1/5375f484-f87b-46ee-a920-3d6f26585cfb.svg","innerCategory":"0","createTime":1508296485000,"name":"hf1","width":90,"sortNum":5353,"id":"7e9f0ea8-5a24-41b7-85e7-ad94f0bac6cd","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf2/79c6749d-a10c-4922-992a-a7b02a163053_thumb.png","scale":0.5,"updateTime":1508319732000,"label":null,"url":"/assets/stickers/hf2/79c6749d-a10c-4922-992a-a7b02a163053.svg","innerCategory":"0","createTime":1508296500000,"name":"hf2","width":80,"sortNum":5354,"id":"d65cb874-4432-4ffb-b6f0-6746b06d9a5c","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf3/b4f1cf30-0dfc-42ad-8dab-e037c03723d6_thumb.png","scale":0.5,"updateTime":1508319582000,"label":null,"url":"/assets/stickers/hf3/b4f1cf30-0dfc-42ad-8dab-e037c03723d6.svg","innerCategory":"0","createTime":1508296515000,"name":"hf3","width":184,"sortNum":5355,"id":"82961bf2-cd73-420b-aea4-b90c66574de3","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf4/70e0854a-ca0d-48e3-9f94-6ef987b1f43a_thumb.png","scale":0.5,"updateTime":1508319587000,"label":null,"url":"/assets/stickers/hf4/70e0854a-ca0d-48e3-9f94-6ef987b1f43a.svg","innerCategory":"0","createTime":1508296533000,"name":"hf4","width":188,"sortNum":5356,"id":"b31bfcc2-4a71-4c63-854e-37ba9266199b","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf6/e1e57153-adab-4906-b94e-fe9798748f57_thumb.png","scale":0.5,"updateTime":1508319597000,"label":null,"url":"/assets/stickers/hf6/e1e57153-adab-4906-b94e-fe9798748f57.svg","innerCategory":"0","createTime":1508296548000,"name":"hf6","width":118,"sortNum":5357,"id":"7a970d63-99e7-497b-bae5-054ac9747f50","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf5/ad0bca9c-ebd2-4882-88e4-303ffeaa5c74_thumb.png","scale":0.5,"updateTime":1508319602000,"label":null,"url":"/assets/stickers/hf5/ad0bca9c-ebd2-4882-88e4-303ffeaa5c74.svg","innerCategory":"0","createTime":1508296572000,"name":"hf5","width":42,"sortNum":5358,"id":"a41f0009-d1c4-45c1-9ef1-7adde20815eb","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf7/083423f7-0523-4085-8383-b1029f355d53_thumb.png","scale":0.5,"updateTime":1508319612000,"label":null,"url":"/assets/stickers/hf7/083423f7-0523-4085-8383-b1029f355d53.svg","innerCategory":"0","createTime":1508296593000,"name":"hf7","width":192,"sortNum":5359,"id":"8112acce-0b04-4061-ae19-a590676e6b05","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf8/28024526-ee29-49cc-8e74-1d50647c8a19_thumb.png","scale":0.5,"updateTime":1508319616000,"label":null,"url":"/assets/stickers/hf8/28024526-ee29-49cc-8e74-1d50647c8a19.svg","innerCategory":"0","createTime":1508296605000,"name":"hf8","width":200,"sortNum":5360,"id":"970ba2be-de18-42c5-8730-edcacacd3d59","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf9/f1dbd126-1def-4ab1-86f0-fcba61a6bafd_thumb.png","scale":0.5,"updateTime":1508319627000,"label":null,"url":"/assets/stickers/hf9/f1dbd126-1def-4ab1-86f0-fcba61a6bafd.svg","innerCategory":"0","createTime":1508296618000,"name":"hf9","width":200,"sortNum":5361,"id":"bf5c62e4-a653-47de-8c0d-3d8e0ec06a55","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":104},{"cacheAble":false,"thumb":"/assets/stickers/hf10/40728525-c24d-47b9-9f92-c0e6693368f0_thumb.png","scale":0.5,"updateTime":1508319631000,"label":null,"url":"/assets/stickers/hf10/40728525-c24d-47b9-9f92-c0e6693368f0.svg","innerCategory":"0","createTime":1508296631000,"name":"hf10","width":200,"sortNum":5362,"id":"ea63d56c-0ade-4da9-b811-362db493f4d8","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":168},{"cacheAble":false,"thumb":"/assets/stickers/hf11/0b76df71-8a3e-43d2-9e12-9b75f490f22a_thumb.png","scale":0.5,"updateTime":1508319641000,"label":null,"url":"/assets/stickers/hf11/0b76df71-8a3e-43d2-9e12-9b75f490f22a.svg","innerCategory":"0","createTime":1508296645000,"name":"hf11","width":26,"sortNum":5363,"id":"969086f6-3c52-466d-aca9-e30b0f3bccf6","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf12/2068f8f0-bade-46df-a33e-9c48d14dfaca_thumb.png","scale":0.5,"updateTime":1508319645000,"label":null,"url":"/assets/stickers/hf12/2068f8f0-bade-46df-a33e-9c48d14dfaca.svg","innerCategory":"0","createTime":1508296662000,"name":"hf12","width":200,"sortNum":5364,"id":"cd33fb01-4946-4fb1-80e1-8e741a78b632","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":96},{"cacheAble":false,"thumb":"/assets/stickers/hf13/10ce40f5-6bfe-41ee-afb4-94df9dcbdffb_thumb.png","scale":0.5,"updateTime":1508319728000,"label":null,"url":"/assets/stickers/hf13/10ce40f5-6bfe-41ee-afb4-94df9dcbdffb.svg","innerCategory":"0","createTime":1508296676000,"name":"hf13","width":200,"sortNum":5365,"id":"5eba781c-5949-4bbb-a3a5-b6f706344c7e","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":104},{"cacheAble":false,"thumb":"/assets/stickers/hf14/48584b13-8e26-4bfe-b80a-abdcdd020bab_thumb.png","scale":0.5,"updateTime":1508319659000,"label":null,"url":"/assets/stickers/hf14/48584b13-8e26-4bfe-b80a-abdcdd020bab.svg","innerCategory":"0","createTime":1508296689000,"name":"hf14","width":198,"sortNum":5366,"id":"4677c959-bf53-4c61-bec4-a0ed4058b599","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/hf15/9eb7bc28-c1fd-4f29-a2bb-feef16c4b436_thumb.png","scale":0.5,"updateTime":1508319685000,"label":null,"url":"/assets/stickers/hf15/9eb7bc28-c1fd-4f29-a2bb-feef16c4b436.svg","innerCategory":"0","createTime":1508296703000,"name":"hf15","width":200,"sortNum":5367,"id":"66a3d93e-257a-46a9-95e5-a8ec658729ff","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":116},{"cacheAble":false,"thumb":"/assets/stickers/hf17/1bd521c8-38d5-4eb9-8718-139eee096918_thumb.png","scale":0.5,"updateTime":1508319674000,"label":null,"url":"/assets/stickers/hf17/1bd521c8-38d5-4eb9-8718-139eee096918.svg","innerCategory":"0","createTime":1508296731000,"name":"hf17","width":200,"sortNum":5369,"id":"09398018-1663-458a-bc4a-4c7155550b1e","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":174},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_05/3c50786e-c74d-41fa-acd0-e3f159e5e266_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_05/41a329be-d409-423c-80dc-884c55e00ed7.png","innerCategory":"0","createTime":1485069401000,"name":"halloween_cl_20170122_05","width":768,"sortNum":2969,"id":"7ef08fef-00d3-428a-97ad-ea91f327ce03","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_06/dbeccb28-bdd6-4d9b-9e28-c4c356ef83ad_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_06/eb4cd4b1-c4bc-4b81-b3ac-895eeafbea2a.png","innerCategory":"0","createTime":1485069417000,"name":"halloween_cl_20170122_06","width":767,"sortNum":2970,"id":"a8b04af1-0638-4df0-8b26-b15fc7a5ac34","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_07/5eef1404-d838-4e8f-8d0d-a16837cc8eb6_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_07/53c00f70-ee88-49c2-b464-bf2de1832d94.png","innerCategory":"0","createTime":1485069434000,"name":"halloween_cl_20170122_07","width":768,"sortNum":2971,"id":"f40d9501-ed5a-4412-b78d-40d81bc4b268","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":767},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_08/66ef0436-30e0-4668-ba4d-d392788fd518_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_08/220ee09c-1490-4046-bbba-d4da26bfce20.png","innerCategory":"0","createTime":1485069456000,"name":"halloween_cl_20170122_08","width":767,"sortNum":2972,"id":"bbb543ee-a45c-4d46-9abe-07a58b0a868c","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":767},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_09/60a0af69-4742-4e6e-9529-0a24cd6b4c42_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_09/e766f330-7038-4aac-93a5-eb1778d98cc0.png","innerCategory":"0","createTime":1485069474000,"name":"halloween_cl_20170122_09","width":619,"sortNum":2973,"id":"2148a4a0-962e-4dee-ab56-9d462e2a1f77","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_10/94425913-3f87-4271-bd95-5cdc28a03566_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_10/0b9c52e1-6e96-4e7a-b548-05482be43a4b.png","innerCategory":"0","createTime":1485069489000,"name":"halloween_cl_20170122_10","width":656,"sortNum":2974,"id":"83818e56-a0cd-44e8-be47-d75480f632e6","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_03/9f99e819-f6b8-40b7-b986-3fe67dd1e86b_thumb.png","scale":0.5,"updateTime":1488959946000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_03/9c8b72f6-e30a-47bc-ad1d-094170934762.svg","innerCategory":"0","createTime":1485054461000,"name":"spooky_cl_20170122_03","width":140,"sortNum":5,"id":"a78df28b-e7f5-463f-a7ef-63c61ce37da6","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_12/c9d19ac3-f5d5-4c72-b523-48fb2a469d56_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_12/a75a4aa7-ae4d-4275-beaa-0120b2fac48d.png","innerCategory":"0","createTime":1485069520000,"name":"halloween_cl_20170122_12","width":616,"sortNum":2976,"id":"2680fa1d-4d3a-4b4d-a6e5-457b5c73d4d1","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_13/42f8f7c4-804b-4b85-b739-eef7d03b679c_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_13/62f63b86-b082-47b5-81bc-7ade16ae1382.png","innerCategory":"0","createTime":1485069539000,"name":"halloween_cl_20170122_13","width":1024,"sortNum":2977,"id":"a6331923-b97c-4cb9-91b6-fa407ed18752","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":745},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_14/93635aff-32cc-4c3e-aeb6-7535043f0a89_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_14/df924008-6636-4eaa-9458-055706f9247d.png","innerCategory":"0","createTime":1485069557000,"name":"halloween_cl_20170122_14","width":1024,"sortNum":2978,"id":"ae5c1ef4-363a-4610-8282-25b1f3940aa7","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":419},{"cacheAble":true,"thumb":"/assets/stickers/halloween_cl_20170122_15/73588af4-c02d-46de-8232-ae45ff7ceddc.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_15/73588af4-c02d-46de-8232-ae45ff7ceddc.png","innerCategory":"0","createTime":1485069572000,"name":"halloween_cl_20170122_15","width":1024,"sortNum":2979,"id":"378f2d12-20ab-4b5e-b18e-1c928027613d","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":382},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_16/515b313e-2e84-4218-a79f-877ad1614884_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_16/08bffb4f-4036-4a15-9a27-af6082b6c29a.png","innerCategory":"0","createTime":1485069589000,"name":"halloween_cl_20170122_16","width":1024,"sortNum":2980,"id":"d1d5677d-d23d-4bf1-a7fa-26cee113a59a","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":548},{"cacheAble":true,"thumb":"/assets/stickers/halloween_cl_20170122_17/faad5521-5cb4-4897-b5d7-9d8cb473ea47_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_17/d4d407aa-cd97-4805-815e-bafa07fd4613.png","innerCategory":"0","createTime":1485069607000,"name":"halloween_cl_20170122_17","width":387,"sortNum":2981,"id":"2d37c782-ddb9-4b2f-ab2b-69a4616e2efd","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":191},{"cacheAble":true,"thumb":"/assets/stickers/halloween_cl_20170122_18/4c5db2f4-1327-45b2-80fd-2fccd567db61_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_18/4c5db2f4-1327-45b2-80fd-2fccd567db61.png","innerCategory":"0","createTime":1485069624000,"name":"halloween_cl_20170122_18","width":322,"sortNum":2982,"id":"37247025-2bf5-4856-82f2-9658ebb9879e","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":339},{"cacheAble":true,"thumb":"/assets/stickers/halloween_cl_20170122_19/1ddba3e1-75a7-4ce4-a2f3-2b593f5c5143_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_19/b3c7b6d1-7cdd-4dee-a557-267d03992789.png","innerCategory":"0","createTime":1485069648000,"name":"halloween_cl_20170122_19","width":391,"sortNum":2983,"id":"60eca0f5-4652-4f55-add5-4a3013a9aa14","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":256},{"cacheAble":true,"thumb":"/assets/stickers/halloween_cl_20170122_20/ee8550f4-c8e0-47d9-ba12-3eb6c0d222aa_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_20/c89d02e4-f8b7-4481-a9a3-f81a55d64a76.png","innerCategory":"0","createTime":1485069663000,"name":"halloween_cl_20170122_20","width":358,"sortNum":2984,"id":"380231f6-76e0-4676-a7a7-20af9b45a4db","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":274},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_04/d8b88011-d8b1-4e73-965c-0d5e787edd72_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_04/d8b88011-d8b1-4e73-965c-0d5e787edd72.svg","innerCategory":"0","createTime":1485049933000,"name":"Gothic_cl_20170122_04","width":92,"sortNum":1,"id":"b10d2963-a0d4-4a68-b0f0-9bf4a0fbda89","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_06/d3010eec-5c37-4a2c-a463-df7b62611a09_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_06/36e67384-ea13-47b4-954a-dd6315c4943c.svg","innerCategory":"0","createTime":1485049988000,"name":"Gothic_cl_20170122_06","width":79,"sortNum":2,"id":"3d030546-4f1e-423b-8563-8353b871764e","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_05/3d7d8b83-9b39-49e1-92e8-72851078639e_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_05/3d7d8b83-9b39-49e1-92e8-72851078639e.svg","innerCategory":"0","createTime":1485049961000,"name":"Gothic_cl_20170122_05","width":109,"sortNum":3,"id":"9748c57a-c363-4e2b-b3a6-0378a805f545","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_09/59bca591-ea0e-4e9a-bdc2-88b7457089d2_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_09/ba7953f0-57fc-4501-9151-3c3599695313.svg","innerCategory":"0","createTime":1485050503000,"name":"Gothic_cl_20170122_09","width":200,"sortNum":4,"id":"4bf13a4e-51cd-40aa-a92a-dd8dba1a9e41","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":113},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_08/6be2a500-4695-4960-9393-862c6ef86d62_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_08/6be2a500-4695-4960-9393-862c6ef86d62.svg","innerCategory":"0","createTime":1485050481000,"name":"Gothic_cl_20170122_08","width":168,"sortNum":5,"id":"f5810086-bf53-4b0e-b7a6-48d2f23595c0","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_003/54454c8a-8dcf-48de-8d7a-cb838b821589_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_003/54454c8a-8dcf-48de-8d7a-cb838b821589.svg","innerCategory":"0","createTime":1485049914000,"name":"Gothic_cl_20170122_03","width":200,"sortNum":6,"id":"6d1ea7f8-30ae-4876-8498-c587c2a21c93","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":44},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_07/cd4842d4-90b3-405c-8502-8f2d55b36d83_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_07/68d1beb0-8301-4171-b935-a58388de0391.svg","innerCategory":"0","createTime":1485050008000,"name":"Gothic_cl_20170122_07","width":200,"sortNum":7,"id":"f261c092-87fc-48a2-a5ab-e918cc5a8acb","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":167},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_02/a9ae5eb4-e6c6-45a4-9812-db307172e9c2_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_02/a9ae5eb4-e6c6-45a4-9812-db307172e9c2.svg","innerCategory":"0","createTime":1485049893000,"name":"Gothic_cl_20170122_02","width":200,"sortNum":8,"id":"fbc5e685-9aaa-4329-ac74-89a9aa6b3761","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":180},{"cacheAble":true,"thumb":"/assets/stickers/Gothic_cl_20170122_01/0c6f5335-30ce-40f8-bbc4-507c4f6bf4a9_thumb.png","scale":0.5,"updateTime":1498016181000,"label":null,"url":"/assets/stickers/Gothic_cl_20170122_01/ce2c44ac-f824-47a8-ab59-613922cdf43a.svg","innerCategory":"0","createTime":1485049872000,"name":"Gothic_cl_20170122_01","width":155,"sortNum":9,"id":"8ba0cf62-e451-4ee4-8024-c4491743c516","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_07/f4517101-0ad6-42f5-a243-fb640c8d2ccb_thumb.png","scale":0.5,"updateTime":1492568215000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_07/f4517101-0ad6-42f5-a243-fb640c8d2ccb.svg","innerCategory":"0","createTime":1485054528000,"name":"spooky_cl_20170122_07","width":177,"sortNum":1,"id":"35054ccd-6cf8-462d-83d4-74f58e3bca40","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_06/edb63a14-5fd1-41e8-b3dd-4ebfbd118745_thumb.png","scale":0.5,"updateTime":1488941459000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_06/edb63a14-5fd1-41e8-b3dd-4ebfbd118745.svg","innerCategory":"0","createTime":1485054515000,"name":"spooky_cl_20170122_06","width":200,"sortNum":2,"id":"7e75c16f-113d-4626-ae6e-df77c4b191e3","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":96},{"cacheAble":false,"thumb":"/assets/stickers/hf16/d9842d94-2b22-4823-8fe5-d2ce3082edcc_thumb.png","scale":0.5,"updateTime":1508319680000,"label":null,"url":"/assets/stickers/hf16/d9842d94-2b22-4823-8fe5-d2ce3082edcc.svg","innerCategory":"0","createTime":1508296718000,"name":"hf16","width":200,"sortNum":5368,"id":"8ce1d646-7a75-4c05-8216-47ee998659c0","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":94},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_05/9776a5f4-0c7e-47d1-85b1-6bc30283bd37_thumb.png","scale":0.5,"updateTime":1492741961000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_05/e1085462-4139-45ca-bdd5-e03e4307f271.svg","innerCategory":"0","createTime":1485054502000,"name":"spooky_cl_20170122_05","width":200,"sortNum":3,"id":"db4182e1-adb5-4f98-8b9c-52227e72ae44","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":111},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_04/593dbcb8-7650-4945-b90b-307927e6ffda_thumb.png","scale":0.5,"updateTime":1492742288000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_04/593dbcb8-7650-4945-b90b-307927e6ffda.svg","innerCategory":"0","createTime":1485054484000,"name":"spooky_cl_20170122_04","width":200,"sortNum":4,"id":"02c6cdfd-a802-4f55-b361-cea763060efb","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":200},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_11/0d7ab761-857c-4e4c-a4a7-1c51fd7da7c7_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_11/ff46b30d-0e31-45e6-be52-2a612bf0be2f.png","innerCategory":"0","createTime":1485069504000,"name":"halloween_cl_20170122_11","width":716,"sortNum":2975,"id":"a4cda646-19cb-443c-be0d-0354c3d3c47c","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":767},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_02/b9663a1f-6511-40c9-824b-114dbc3504ba_thumb.png","scale":0.5,"updateTime":1488260580000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_02/91e8983a-9d36-4846-9cf3-6f48091108e5.svg","innerCategory":"0","createTime":1485054447000,"name":"spooky_cl_20170122_02","width":200,"sortNum":6,"id":"31070e9e-87e2-4956-ac5f-70594a452ed2","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":199},{"cacheAble":false,"thumb":"/assets/stickers/spooky_cl_20170122_01/dab17249-cac5-4b89-8ce1-b71a5f754bb4_thumb.png","scale":0.5,"updateTime":1488266337000,"label":null,"url":"/assets/stickers/spooky_cl_20170122_01/df313239-3d41-43d6-9993-fd7f8ef46450.svg","innerCategory":"0","createTime":1485054433000,"name":"spooky_cl_20170122_01","width":200,"sortNum":7,"id":"40d03853-2435-4a1e-add8-3640e1d3460e","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":192},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_01/8d59410c-6107-4a7c-a0be-707d85f59605_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_01/f5992ac0-3539-430e-906c-eb2cafe1c5a2.png","innerCategory":"0","createTime":1485069257000,"name":"halloween_cl_20170122_01","width":887,"sortNum":2965,"id":"d7d72908-a2a4-48f1-893a-bec4191d8b87","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":767},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_02/3b1523a7-ec28-4f93-99c1-1f372b6b7126_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_02/9eba6bf4-551d-4c73-ba0a-ac9e606745e9.png","innerCategory":"0","createTime":1485069324000,"name":"halloween_cl_20170122_02","width":691,"sortNum":2966,"id":"fda3689b-8264-4f27-bb6b-2f2d86ed8f50","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_03/4a6896d3-5777-412e-9661-d6b04ec41f17_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_03/34d4a46b-22a0-46d7-820a-794caf1826c8.png","innerCategory":"0","createTime":1485069340000,"name":"halloween_cl_20170122_03","width":845,"sortNum":2967,"id":"b393e93d-1824-4ae1-8e82-9c85879c669c","hasBorder":false,"stickerType":"png","state":0,"vip":false,"stretchMode":"equal","height":768},{"cacheAble":false,"thumb":"/assets/stickers/halloween_cl_20170122_04/b7d8f2b7-38c3-4735-8fac-373e7a8a8c84_thumb.png","scale":0.5,"updateTime":1495678425000,"label":null,"url":"/assets/stickers/halloween_cl_20170122_04/b7d8f2b7-38c3-4735-8fac-373e7a8a8c84.svg","innerCategory":"0","createTime":1485069379000,"name":"halloween_cl_20170122_04","width":806,"sortNum":2968,"id":"4177ad3f-71c1-4948-a6a7-77450577d75c","hasBorder":false,"stickerType":"svg","state":0,"vip":false,"stretchMode":"equal","height":768}]}')},926:function(e,t,a){e.exports=a.p+"images/halloween5eddbe9d5bcb4fe185ae607d549278aa.jpg"},927:function(e,t,a){e.exports=a.p+"images/halloween649f3cd5ce7ea3fc140b8dd43b86a225.gif"},928:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(929)),r=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state.groupData=null,t.state.showItem=!1,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),n(i,[{key:"loadData",value:function(e){var t=a(151)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["MagicBrushItem_"+t].state.beSelected&&this.refs["MagicBrushItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["MagicBrushItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["MagicBrushItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"afterfold",this).call(this),this.setState({showItem:!1})}},{key:"afterUnfold",value:function(){this.setState({showItem:!0}),Fotor.progressBar.hide()}},{key:"componentWillReceiveProps",value:function(e){e&&null==this.state.groupData&&this.setState({groupData:this.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[],swtichMode:!1};return e}},{key:"loadTempHistoryData",value:function(e,t){for(var a=this.state.groupData.items.length,n=0;n<a;n++)this.refs["MagicBrushItem_"+n].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}},{key:"doItemUnFold",value:function(e){Fotor.historyManager.mergeTempStep();for(var t=this.state.groupData.items.length,a=0;a<t;a++)null==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["MagicBrushItem_"+a]!=e&&this.refs["MagicBrushItem_"+a].state.beSelected?(this.refs["MagicBrushItem_"+a].exitMagicBrushMode(),this.refs["MagicBrushItem_"+a].setState({beSelected:!1})):this.refs["MagicBrushItem_"+a]!=e||this.refs["MagicBrushItem_"+a].state.beSelected?this.refs["MagicBrushItem_"+a]==e&&this.refs["MagicBrushItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({showItem:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase(),onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map((function(a,n){return e.createElement(s,{ref:"MagicBrushItem_"+n,unFoldFun:t.doItemUnFold.bind(t),data:a,showItem:t.state.showItem,key:n,vip:t.state.groupData.isVip,scroller:t.props.scroller})})))):e.createElement("div",null)}}]),i}(i.default);t.default=r}).call(this,a(0))},929:function(e,t,a){(function(t,n){var o,i=a(8),s=(o=i)&&o.__esModule?o:{default:o};a(50).default;var r=a(6)({displayName:"MagicBrushItem",getInitialState:function(){return{beSelected:!1,unFoldFun:null,last_Point:null,canvas_Point:null,circel_Point:null,canvas_isDrawing:!1,brush_Size:0,brush_opacity:100,isMoving:!1,hadchanged:!1,brushPoints:[],thumbSrc:"",opacity:0}},componentDidMount:function(){this.props&&(this.state.unFoldFun=this.props.unFoldFun,""==this.state.thumbSrc&&(this.state.thumbSrc=a(756)("./"+this.props.data.thumb+".jpg")))},clickHandler:function(e){this.state.unFoldFun&&this.state.unFoldFun(this);var t=this;if(this.state.beSelected)t.exitMagicBrushMode();else{Fotor.mainCanvas.fotorEngine.clean();var n=Math.max(this.props.data.outsideRadius,this.props.data.innerRadius);this.state.brush_Size=n,this.refs.brushSize.setDefault(this.props.data.defaultSize),this.state.brush_opacity=this.props.data.blendOpacity,this.refs.intensity.setDefault(this.state.brush_opacity),Fotor.mainCanvas.canvas.mouseEnabled=!1,Fotor.mainCanvas.fotorEngine.process_rule("",!0),Fotor.progressBar.show(!0);try{var o=new Image;o.crossOrigin="anonymous","star4x4_01"==t.props.data.fileName?o.src=a(773):"star4x4_05"==t.props.data.fileName?o.src=a(774):"star4x4_04"==t.props.data.fileName?o.src=a(775):"star4x4_03"==t.props.data.fileName&&(o.src=a(776)),o.complete&&(Fotor.mainCanvas.fotorEngine.set_magic_resource(o,t.props.data.fileName),t.enterMagicBrushMode()),o.onload=function(){Fotor.mainCanvas.fotorEngine.set_magic_resource(o,t.props.data.fileName),t.enterMagicBrushMode()}}catch(e){console.log("")}Fotor.vipResManager.setEditorWaterMark()}var i=!this.state.beSelected;this.setState({beSelected:i});t=this;setTimeout((function(){i?t.scrollerFix():t.scrollerUpFix()}),300)},enterMagicBrushMode:function(){Fotor.mainCanvas.trigger(s.default.ENGINELAYER_CHANGE),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,t(".upper-canvas").on("mousedown",this.moveControlDown),t(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()},exitMagicBrushMode:function(){this.state.hadchanged=!1,this.state.brushPoints=[],Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(s.default.CONTENT_CHANGE),t(".upper-canvas").off("mousedown",this.moveControlDown),t(document).off("mousemove",this.drawMoving),t(document).off("mouseup",this.endChangeing)},drawBeauty:function(){var e={};e.pModel=this.props.data.pModel,e.opacity=this.props.data.opacity,Math.max(this.props.data.outsideRadius,this.props.data.innerRadius)==this.props.data.outsideRadius?(e.outsideRadius=this.state.brush_Size,e.innerRadius=this.props.data.innerRadius/this.props.data.outsideRadius*e.outsideRadius,e.texSize=this.props.data.texSize/this.props.data.outsideRadius*e.outsideRadius,e.pointStride=this.props.data.pointStride/this.props.data.outsideRadius*e.outsideRadius):(e.innerRadius=this.state.brush_Size,e.outsideRadius=this.props.data.outsideRadius/this.props.data.innerRadius*e.innerRadius,e.texSize=this.props.data.texSize/this.props.data.innerRadius*e.innerRadius,e.pointStride=this.props.data.pointStride/this.props.data.innerRadius*e.innerRadius),e.numRatio=this.props.data.numRatio,e.fileName=this.props.data.fileName,e.blendModel=this.props.data.blendModel,e.blendOpacity=this.props.data.blendOpacity,null!=this.props.data.angle&&(e.angle=this.props.data.angle),e.points=[this.state.last_Point,this.state.canvas_Point],Fotor.mainCanvas.fotorEngine.process_magic_painter_rule(e,(function(){})),this.state.last_Point=this.state.canvas_Point},moveControlDown:function(e){e.preventDefault(),e.stopPropagation(),this.state.hadchanged=!0,this.getEventPoint(e)&&(this.state.canvas_isDrawing=!0,t(document).on("mouseup",this.endChangeing),this.state.last_Point=this.state.canvas_Point,this.drawBeauty())},drawMoving:function(e){if(this.getEventPoint(e)){if(this.state.isMoving||(this.state.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.state.circel_Point=this.state.canvas_Point,null!=this.state.last_Point&&null!=this.state.last_Point)Fotor.EngineAction.distanceBetween(this.state.last_Point,this.state.canvas_Point)>.75*this.props.data.pointStride&&this.state.canvas_isDrawing&&this.drawBeauty();Fotor.mainCanvas.canvas.requestRenderAll()}else this.state.isMoving&&(this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.state.isMoving=!1},endChangeing:function(e){this.state.canvas_isDrawing&&(this.state.canvas_isDrawing=!1,this.getEventPoint(e)&&this.drawBeauty(),Fotor.mainCanvas.trigger(s.default.BEAUTYLAYER_CHANGE)),t(document).off("mouseup",this.endChangeing)},getEventPoint:function(e){this.state.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.state.canvas_Point.x>n&&this.state.canvas_Point.x<n+i&&(t=(this.state.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.state.canvas_Point.y>o&&this.state.canvas_Point.y<o+s&&(a=(this.state.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.state.canvas_Point={x:t,y:a},!0)},helperDrawCursorCircel:function(e,t){if(this.state.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.state.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.state.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.state.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.restore()}},handleBrushSizeChange:function(e){var t=this.refs.brushSize.val(),a=Math.max(this.props.data.outsideRadius,this.props.data.innerRadius);this.state.brush_Size=.01*t*a*2,this.state.isMoving=!0,this.state.circel_Point={},this.state.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.state.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()},handleBrushSizeChanged:function(e){this.handleBrushSizeChange(e),this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()},handleRecoveredChange:function(e){if(this.state.brush_opacity=this.refs.intensity.val(),this.refs.IntensitySpan&&t(this.refs.IntensitySpan).html(this.state.brush_opacity),this.state.hadchanged){var a={};a.pModel=this.props.data.pModel,a.blendOpacity=this.state.brush_opacity,a.fileName=this.props.data.fileName,a.blendModel=this.props.data.blendModel,Fotor.mainCanvas.fotorEngine.process_magic_painter_rule(a,(function(){}))}},handleRecoveredChanged:function(e){this.handleRecoveredChange(e)},componentWillReceiveProps:function(e){e&&e.showItem&&(this.state.unFoldFun=e.unFoldFun,""==this.state.thumbSrc&&(this.state.thumbSrc=a(756)("./"+this.props.data.thumb+".jpg")))},applyHandler:function(e){this.props.vip&&Fotor.vipResManager.setEditorVip(),this.doApplyHandler(e)},doApplyHandler:function(e){this.state.hadchanged?Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler):this.cancelHandler()},afterApplyHandler:function(){this.state.unFoldFun(this),this.exitMagicBrushMode(),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.exitMagicBrushMode(),this.setState({beSelected:!1}),Fotor.vipResManager.resetWaterMark()},render:function(){return n.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(this.state.beSelected?"active active-278":"")},this.props.data.isVip?n.createElement("span",{className:"vip"}):"",n.createElement("div",{"data-display":this.props.doEffect},n.createElement("div",{className:"effect-item-img clearfix",onClick:this.clickHandler},n.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[this.props.data.name].toUpperCase()),n.createElement("img",{ref:"itemImg",src:this.state.thumbSrc,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),n.createElement("div",{className:"effect-item-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:""},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"SizeSpan"},"100"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",className:"input-range-grey",bindEle:this.refs.SizeSpan,onChange:this.handleRecoveredChange,onChanged:this.handleRecoveredChanged})),n.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size,n.createElement("div",{className:"pull-right",ref:"RecoveredSpan"},"100")),n.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:this.props.data.maxSize,min:this.props.data.minSize,className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleBrushSizeChange,onChanged:this.handleBrushSizeChanged}),n.createElement("div",{className:"clearfix effect-item-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){this.imageInterval=setInterval(this.showImage,30)},showImage:function(){var e=this.state.opacity+.1;this.setState({opacity:e}),e>=1&&clearInterval(this.imageInterval)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),n=t(this.refs.item).offset(),o=t(".toolbar-list").height(),i=t(".toolbar-list").offset(),s=-e.state.topPosition,r=a;if(n.top<80){var l=n.top-i.top-s;e.scrollYTo(l)}else if(n.top+r>o+i.top){l=n.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),n=e.state.topPosition,o=a.realHeight-a.containerHeight;n>o?t(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}});e.exports=r}).call(this,a(2),a(0))},930:function(e,t,a){e.exports=a.p+"images/default_01a7ed755615ebccdf9de154136e31fc67.jpg"},931:function(e,t,a){e.exports=a.p+"images/default_0208d03523285e562f0688235b8a5d4d6e.jpg"},932:function(e,t,a){e.exports=a.p+"images/default_03859befd1243cb9832b39322c80647ca6.jpg"},933:function(e,t,a){e.exports=a.p+"images/default_04f2cd62f246588f2c5f4819f276f5ff35.jpg"},934:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNfaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZDRkJBNzlEQzEzMTExRTZBQzdEQzRFNDQxODg3RTIyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZDRkJBNzlDQzEzMTExRTZBQzdEQzRFNDQxODg3RTIyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RThDMUI1RTBDMThERTUxMTg4RTNENzlGRTMzNUQ1NUYiIHN0UmVmOmRvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAWgEsAwERAAIRAQMRAf/EAJQAAAICAwEBAAAAAAAAAAAAAAECAAMEBQYHCAEBAAIDAQAAAAAAAAAAAAAAAAEFAgMEBhAAAQMDAgMFBgUCAwkAAAAAAQACAxEEBRIGITFBUYEiEwdhcZEyYhShsUJSI6IIwVMV0XKCM0Njc4MmEQEAAgICAgEDBQEBAAAAAAAAAQIRAxIEITFRQWEFcbEiMhOBI//aAAwDAQACEQMRAD8A8tBQO0oHBQEIHBQMCgcFBY1yC1rkDhyBw5BYHIHDkDAoGBQMCg2eB27nM/cutsRZvu3s/wCdIKNiir1lldRjfjX2IOnbsPb+OdTcW5I2zAitlio/uXjt1Svoz+lBsLfHek4dpjs8ndfXLc+XXuZQJM4IbBm1PTO7Hhs8jaE8nx3Jf+Dw4LD/AEr8wy4z8MG89JLe4GrAZtkrzytcizyX07BLHVvxas2Li87t7OYG6Ftl7N9q93CKU+KGT2xyt8Lvz9iDW6kA1IBqQAuQAuQAlANSBS9BNSAFyAVQKXIAXIFLkClyAauKDngUDgoHaUDVQMCgYFA7SgaqB2vNeKCwOQWNKB2uQOHIHa5BYDxQddtraVicfHuLc0rrbBEn7OzjqLm/c08mfsh7X9enags3Dv6b7H7aB0WC2/HVsOOtf42H3hvikeepWnbvrTx7n4dGnrW2evXy8+u99wtOjH2xk/7s5p8GN/xXLbZst9eMfZZaujrj3/KW825Jum+LbmecWtseLWsYGl3u9iqOz2IjxEzMrWnW11jzWHfWOWuIWhrw2QDqRQ/ELg/3v8td+rSfs39lm7Z48bSKc6cSO5dOrv2q4dvSdDDdW17YOtLqOPI4uYUktJwHsPuryIV51u/W/tV7etNZeVepmwbrAW0u4Nvt+6263xXdu8l1xZVNCT/mQ1Pzc29eHFWLmeYu3BcdGtHcgrOfuuhA7kCHPXf7/wAECnOXf7ygX/W7r/MKB2Z25B4ur7Cgy4c3E/hIKe0IM1k7Ht1MdUILBJVBC5ApcgUuQDUgBKBdSDQoC0oHBQOCgYIGBQOCgcFAw5IGBQOHILGuQWAlBaxB1Oydu2d/Nc5jMN/+cw4El+3kbiVwrFas6nXzf9PvQYu+t8STzOyV/Qyub5ePsGcI4428GsaB8rG9e1cu7dOeNff7O3q9Xl/K39f3eVX2Rvslc+ddSGWQ8G9GtHY0dAtNaxVaR58Q63Zu1WTUvbtmqIH+Nh/Ue33Kr7van+tVhq18YzPt6DGQ0AAUA5AKqbML2SKJhGF8cxa4OaaEdViiYbWyyc9s4TwH/wAsf6T3LKl5rOYc2zTFvEu2xGVhuIRPEA+KQFlxbvAcHAijmPaeBBHxXo+h3YtGJUXa600l8/8Aq9sGLamejuMZFo25lgZMaAdQhkbxltT18HzMr+n3K3cTgXFAqAEoFJQBBA8jkgyra+kicCCg3dteNmaCD4uoQZIkqghcgBcECl6BS4oBX2oNMAgNEBHBAwKBwUDhAQUDgoGDkDBA4qgsYCgdpQWayBUAud0aOZPQD2lB6LujTgcLjdqufpjx0P3+acOTryca31/3BRoWnft4Vz9W7r6ud4h4ZmsnNk8hJcycAfDEzo1g+VoXLrriPPtcziPEMjAYx17fRQgeEkF59g5rR2dvGsy6evTMvWbeNkMTY4xpY0UAHYF5+05d64OKxDNciFjZCFAy7WbxFteBCiYYWhtMDlnWWQaHOpBKdMo9/I9y2adnC2XP2dPOv3dHvfb7dzbIy2HDBJdsiN7iz1bcwAvbQ/UKt9tV6/q7edMvMba4l8ph2tocARUVoeYXQ1ogQlAEEQKUAQZNpdOjeOPDqg3sM4e0HtQXaj2oBVANSBaoJqQawtQRAaIIEDBAwKBgUDgoCCg6nZ3p9mt0smms5oLS1gcI3XFwXUc+lS1jGAk0HMoOxi/t/wA0Rx3BYg9nkToHH9v24K+HO48++O4H+BQI7+37dQILctjXdlDMPj4UGwwnoTnbHL2OQyd/YzY+zuI57qCEyuke2N2oNaS0N+YDmg4L1Qy8s4yd2538uRunNr9APH8AuDsznZFfhadCmKzZ5ZHGXO4BTMuuId9sSwaGy3BbxqGNP5qn7t8zhY6YxV2zIvYq/DObLWxt7EwxmxvLHYmEcgMQ7FGGXI0TC19exYpmyOcQ5RhMPStqX7pbewuDxc0hj69dPBeh/EbMxh5v8hr42fMG+MUzEb0z2MjFI7W+mbGPoe7zG/g9XKvaIlAEEKAFAEClAGmhQbbHT1bpPRBsmvqEB1IFLkALkA1IMOqBSgIKAoICgaqCVQOHUQMHCqD2n0guombViZGQJm3Vz5/e5pZ/Sg9Hiu5KDiEF/wB46gHDh1HVAW3jq8SgyLi9abKZhPjcx2mnbpKD5e9SIXeVYtoaOfI4+9Vm6cbZ/Rc9KP8Ay/642C2q8ABarXddavRtpQCPHDhxLiqrsTmzsj06JooFzkycVRicIg7Wg9aIZMWACnM9qxmCJY8w59vRQ2Vl6DtIWzLVjYauibMPL1GtagF39SvPxURynHpRfkZmZ8+3gHrO5h9UtxFnLz2Vp+7ymVV4q3FIJVAtUAQAlACUC1QZdhJR4CDcRv4IG1FANRQCqAVQYetBNSCa0DByCVQEOQNqqglUBDkG1w+6c5h45I8dciFkjtb2uYHjVSlRVBtWeqO+Gcr+OntgYguj9WN8N53MD/fCB+TkGXD6x7yYRqitJQO0SM/JxQb/AGz6z3mR3Hjsdk8eLeC8mbbuuo5NTGuk8LSQQDp1UCDXep2Gey0DtJra3DmO4cg7kqruxi+flb/jrZrNXCWloAKlvGq5JlYx7drt5xFnoHDS5cW322ty1zhwB4LSnwcKEGAUIybiiTji0jqiCOYSQmGUS9C2dZlllZsd4Q4mQk8KAmtVffiNeKzKh/IXzd8t7yzAzG8c5lGmsd3fTPjP0Nd5bfwYrdXtRVAEAQAlAKoFKAFBkWfzhBto3cEFmtANSAFxQCqDA1IG1IDqQEOQNVBKoCHIG1ICEAKCVogYPHVA4lCAmQto+N2mRhD43djmmrT3EIPdpH2+8drQZRlB/q0FJgOPl3kPhkaf+MLk7mrlTMe4dHV28LxLzJ+NkgkfFI0tkjJa9p6EKmy9BExPltMK/Q4xn9XELTshnluwtGErGkqMIysBUYDBMIysY1YmWZjbB15eRwN/WfGexo5lZ0pNpxH1a9mzjGW/9RdxxbU9PspkmOEd3PF9hi2nmZpxoFB9LauPZRes6+rhSIec2X5Wy+TmeFjWt4gAAV58FuYLWuqEBQCqAFAEAQBBlWjeNUGyYaAIG1IBqQCpQSpQYNUEqgIKBgUDAoDWqCIGBQMCgKBHmiCsvQVOl4oIZvCg7v0i37Bhsm/AZWQMwuXlb5dw40ba3Z8LJDXgGScGv7DQoPTt4bTlmkfeQMpdxD+eID52jk9vbwVN2+vNJzHpadTtRjjLhmwujkDgKEFcM+VpEtxA8SMDhz6haJjCcr2rEOEwLWNJ6LFEyyYYHvc2NjS57jRrRxJKYYTbHl3G38Iyygc+ZzWPLS+5mcQGxsaKmrjwAHUq86HT4/ysqO12OXiPT5p9ZvUmLee6WR455O3MQHQYzoJnnhLdU+umln0+9WzhcXG6rUFrHILKoASgBKBUEQRoqaIM+3ZQIMxvIIIgBKAFyAa+KDDBQGqCICCgYFAQUDhBEBqgJdQIK3GvNBVITRBSQ48kCO1BBjycQQ4VB4EHkg9W9MfWmLGW9vt7djnvx0RDLDNVL5LVh+WOcfM+JvRw4tHOoUTETGJIesZbamPysLL+1lZpnbqivbekkEoPJ3h4d4Vbu6GfNXbp7k18T6czNtnMWTyfK82Lq+M6h/tCrdmi9fcLGnZpb6rjiMiK1gJA5lrmuHKv6SVpnXZsjdX5G1xtxcOIibyFS5xDQO8rCtZlNtsR7bm02rdyMDi8MqaGrTQDtBNK9wXRTqXt6c1+3WHQ22NxWCx82Svp47S0t26rrI3LgxjW+88B+ZVr1uhFPM+1fu7U3/R87+sPrs/dccu2dr67bbFaXl66rZr8NNQ3TwMcNRWnN3Wg4KxcrypjqFqDNhegyAUFgdwQSqAIIgiC6GPigzoxQBBbqoEALkCkoASgXUgxwgKAoIgIQGqBgUDghBECPdRAo4oFcgjWhBTLzQY7xwQYknAoN1tPfe69pzl+CyD7eFxrLYyfy2slP3Qu8I97aFB63hv7lca9jW5/b8kU/wCu4xsrSz3+XLR1fZVB1Vv65+k1yNT766t3Hm25s3avi0OWE66z9ITyn5Gf149KbVpdHeXd079ttaPqe9+gJGusfSDlLkdw/wB0kcMT2bZ2xI+4NQy7ycrSwD93kw8a+wuWaHh2899b23fd/cbivprlrTWG0aPLtovZHC3wD380GmsGEElw+KDNcynEIL4q8EGUCaIHaeiB0EQQNJQWxx/FBlRsogtBogmpANSCVKBaoJUIKGoCgKCIGHJAUBQFAUCOQTogUoCeSDGk5oKnckGJKgpQFAw70EHegZvMc0FjuX6e9AI//X3oJJy/6SClnd3IMhnyoHbzQWICEFrO5BczuQXD5UEQRAEEQKUAQf/Z"},935:function(e,t,a){e.exports=a.p+"images/default_066baf863dfef038a7ec2cf4d5ed57266d.jpg"},936:function(e,t,a){e.exports=a.p+"images/default_0789f901b29c461b8f20a3401726815119.jpg"},937:function(e,t,a){e.exports=a.p+"images/magic_164afb45a801b0c04c004a0b5826eb780.jpg"},938:function(e,t,a){e.exports=a.p+"images/magic_2936b6d0cc0b2a2e6836e16c37aee255c.jpg"},939:function(e,t,a){e.exports=a.p+"images/magic_31fe89f152460580867ad7941e672cef9.jpg"},940:function(e,t,a){e.exports=a.p+"images/magic_4e4dc772bf2f6f9437d1077d5ec0f1161.jpg"},941:function(e,t,a){e.exports=a.p+"images/pressed_018d8095b44f9d29a662327811c1aa4731.jpg"},942:function(e,t,a){e.exports=a.p+"images/pressed_02b4db5df309ec23071abb0cc82a16ebd8.jpg"},943:function(e,t,a){e.exports=a.p+"images/pressed_035f705dc4906bc11c13efc9b98d528fa7.jpg"},944:function(e,t,a){e.exports=a.p+"images/pressed_049650bb32f61c1c01e0a32a537ed2f5f7.jpg"},945:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNfaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY5MTc1QUNFQzEzMTExRTY4NjQ0OEVGRTZBREUxNkY5IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY5MTc1QUNEQzEzMTExRTY4NjQ0OEVGRTZBREUxNkY5IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RThDMUI1RTBDMThERTUxMTg4RTNENzlGRTMzNUQ1NUYiIHN0UmVmOmRvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAWgEsAwERAAIRAQMRAf/EAKUAAAICAwEBAAAAAAAAAAAAAAECAAMEBgcFCAEBAQADAQEBAAAAAAAAAAAAAAECAwUEBgcQAAEDAgUCAwUEBgcJAAAAAAEAAgMRBCExEgUGQQdRgSJhcTJCE6GxMxTwkVJyIwjB0eFigiQVorLCY3ODVCUWEQEAAgIABAMHAwIHAAAAAAAAAQIRAyExEgRBUQVhcZHRMhMGgbEiQiOhwYIzFDQV/9oADAMBAAIRAxEAPwDlwKLJmlEOCgIQOCgdpQMCUFrXILGuQWByBw5A4cgcOQMCgYFAwQepsXGt+3+Z8Wz2b7r6P481QyGL/qSuo0e7P2Ly91pm8cOcPo/xz1Wna7LRsnGu0e/jHL4toh4NxDbSP/oeSiacH1WW0M+pT2GZ4IPk0LxfapH1Wz7nb7j8qvPDTr/W/wAo+csmGw7Vh1I7DcbgdHS3ej7GAJnV5T8XPv8AkXfz/VSPdX5vQi4x2yu6f5K/tvbHdl/2ODlf7U+E/FjX8j76v9VJ99Y/yU33aXbLkF/H97pIcW2m4sDcPASxj72pOik/Tb4vf235daOG7X+tPlPzaNvvG9/2GUR7vYyWoc7THOfVBIf+XK2rTX9fsWi+u1OcPquz9R0dzGdVot7OVo98c3malg9mQ1IqakALkUNSIFSoASqF1omQ1KGQLkUC5EAuQyUuRMgXKmSlyAakR4IK+gfiMmBRDtKBqoGBQMCgdpQMCgdrjVBaHIHDkFgKBg5BY1yBwfHLqg3HjnEdvisIuQ8sdJBssuO37fES25vj4imMcP8Aezd0oMwr5T3Gl/IttTJHs+xRem2222H04w0dCG+qR3iVJjJEuZX3cN5fo263BaMpJq4/4WrmzoxPF1dd+qIl7PHZuU3xFxdzC2tzi1jGBpd+vovFu21jhD301Rji3qy3a4hABDHgdSKH9YXk+9aFnt6y2LbuRR4awQOtMSPJbad1Mc3m2dr5NvsN1tr2xfaztiv9unGmW1mAkjcPChyK6OrfEx5w8U1trtFqzNbxymOEuZ9yu3txslnJv/Gmuu9jZ6r2ydWSezH7YOckI6k4t61GS+iPqry8vJ9h6X+S22Y17sdfhbl1e/2/u5YeQXFMGtofYtP23dn1CfIh3+69g8k+2k+oWId+u/2vsT7bD/0LFO93f7av20/9Cxf9auv2yn20/wCfbzOzfLkHF1fep9tlX1CzKh3tjsJGge0LGaPTTvonmzY7iOQVY7UFhh663ieSwSVRnEoXKKBciFLlQC5EKXIZDUiZeGvoH4nJmlEOCgcFAwQMCgYFA4KBuiBgUDhyCxrkFgKC1maDbOD8f267fdb5vjS7j2z6TPD/AOVcvFYrUV6H4n+zDqg8juBz6d077+8P1LmarbOzbhHHG3BrWgfCxowwzQchvb+93G5M91KZZHZVyaPBo6BBtnD+LslAvrtmqMfhMPU+JXP9QzFMw6Xp146prLfmEAAAUAXCl2cLmyLFV8cxaQ5poRkVEmHq2O6XFq8XNu6jspYz8LvJZUvNZzDVfXFuEuicc36O5ibcQkEkaZoXY55tcOtV1u3354w5G/TNZxLh3eTt/DxjeY9x2qLRx3dyX2jRlbzjGS29g+aP2YdFu2UiOMcpfS+ld9O6nTaf7lf8Y8/m52StbqSRGMgSqhSUYgSqiBxChFsMi3vZI3Ag0WNq5enT3M1l7VretmbnR3ULRNcOzp3xeGW2SqxeiLDqRclJQyBciZKXImQ1IZeQAvoH4rI0RBCBwUDAoHCBgUDAoHBQMEDCqCxoPggdpQWB7/kbqkNAxgzc44Nb5nBB0PnE9vsO1bfxiM6YNlgE+5vFP4l7K3XM51My0nSg+et33Kfcr+W6lJq8+hpPwsHwtCDJ2DbDfX8cPyk1efYM0HV4I2RxNjYKMaAAB4BYbKRasxPiz13mtomPBZVfL3pNZmJ8H09LRaImPEwcViyO2SimBk202JByIUS0PW2Dd3bfuTHk/wAGT0TD2HI+Sz1bOi2Wnfq66+1vnJtjbyrhm6bFgZ5YvzO3uzpcweuOn71NPmu3rnqiauX2+77O2t/Ln7vF8o1NPUC1wwc05gjMH3LU+2yBRiQqoBKMQVQEQCiZX21w6N4IKxtXL0aN01l7sE4e0OC88w7uvZmMrw9Yt2ULkMlLkTIFyGQ1ImXnlq+gfjEoEQaIIEDBAwKBgUDgoGBQbbxHttyDk9ob20lt7Sz1ujZNcOdV7m/FpYwF1AcKoNpj/l/5AW1/13b6+H05/wCpA47Acnr6d424+8Tt+9qBHdgOZNI07htrq5UkkH/Ag9TjvZDkO1b3t27btdWMm3WNwy4uIYXve9/06ua0VaB8YCDlvdbdpphdyucTJf3Ty89SNRd/Ug5axhc5BvvBbANbNcEYmjQg3RkfsQOYwuP6jpxMWjxdb0/dwmvkOgeC5uHR6g+mFMMuo0TSHLHC5FziCphlDqnBtxdJZ2U1avZRhPtaaLqdnfhDi95TFph87dytrj2rn/ILCIUhjvJHxDwbNSUf7637IxaX0/p+yb6KTPl+3BrJWL1lRjkFUBEREkpRjIA0KpEvT26f5StN4dXtNvg9Rr8FpdOth1IyyBciZKXIZDUiZYxXffjclqiCCgJQQFA1UEDggcOQM1wQd17WXMbOI7e2Iio+r9X9/wCq6v2UQb7HdvIGSC784aAUApmanFAW3hr4ILb+7DttuG19ZjeW08Q00QfJnc6F/wBazZjT1u80GnQW3qoAg6LxWARbc3xJKD324IGWrfq66TVt07Oi0SIXzkw78SdrQViZMWAD2+KixKmQKYbIl0fgjbdlo5sZLmNewx1NcXNBkGHgV0O0iOLl95MzPFxbvg5h7q78WZaoK+/6DKr17fql3vSf+tX9f3aKVre+S1VQKoiIgVRCkqsQVGRZvpIFrvD1drbFnsRvwWiYdqlllVGzIVRMgXImU1IZYmtd5+PSmpEQOQMHIJqQMHIDWqA1oggcg9zZua8h2a1/K7fOxkIcXhskYfQuxOZCD1G92ecNwF1bn324/ocgtZ3g5w3OS1f74SPucgzbfvXyphH1rK1lAz0ukYT+vUg2LineJu9cjsdovbCSz/PPNvHNqa+P6j2nSDShAJwqg03urtL2CGTT+FM+MoNHtbQAVLcSc0G6bA6lmGig0lB6zXOGAOCBwgJGK4vfaum+Y5S6/Z7equJ8EBIXhexY04U6qBXNqphlEumdvrBw2+2wxlcX+RP9i6XZU4OX3l/5S+dO5G7x7r3A5BfRGsMl49kTuhbDSIH/AGFuvOZl9L6fSa6KRPl+7XKrF6wRERMgSiFVQEQCiLbb8RSzdo+p68TsF55dqkrdSjbkNSGQ1ImUqhlhal3X5DIhyIIcgYOQGqCAoGDkB1ID0QRANSBg8IHbKEDx3M1vLHc27tNxA9s0LsqPjIc37Qg7ZyawteVcdg3W0AMe6QMuoiMmzU9bfJ4IQcj/ACLonOa5ulzCQ5p6EZhB62zP0OdH44hB7IQO0miB8wvP3WrrpPnDf22zov7EC4OHaysa3NYzBll7fYS3t3FbRirpDT3DqfJWKTM4hLXisZb/AMp3uHhvAtx3htBLbQC229h+a4l/hx09xOryXapXoq5muk7dsV854vkoPccS7U44uccyTiT5rS+yieB2uqFFFESqIVVARERAVF9q31VWFno7eOL04zQLRLrUPqRsympEyXUhlNSJlh1XcfkspVEEOQMCgYFA1aoJkgIKBgUBQI4gIKy9BW6bHNBHTnTmg6P2Z5xb210/ie7TBljuEmvaZnn0w3jviiJPwtm6f3veg2bm/DZYZpL62io4E/moQMQR84H3oNKjjdHIHN6eCD2IXNkYHDzQXAIHAQENNaLhd1q6L+yXX7fb1V9rJiicS1rQS9xoGgVJK8zdl0Th3FzatE8wpdSt9Vco2ZkV+9dPte36f5TzeDuN/Vwjk4R317lRcm5BHsm1Stk49sr3NilYatubmmmSavVrfhZ5nqt95y9/p+no/lPOXO4nVatMu9rngtY7FRsPVRAKqAiIiAqIMShDMtmUWq0vforhmtyWp76iSjLIEoxyGpEyGpUyxqrtvyeUqgiAgoGBQMCgZAUBqghdQIK3GqCmQlBUdXRAji4ZoMeSjgQ7EHog7R21702dxDBx/mU/0powIrDf5DVrwMGxXZ6O6CTI/Nig3TkXbqKd35myLYHyDWKYwyA4hzS3KviMEGnz7FvG2yUuLZwYTTW0amn3EIMiTbNwhJbLbSMc34hp1UqK5t1DJAbTb7q6cW28ZlLRV1CAAPEkkBB7FjxPcrmMPj04uoRjRo8S6lPILy91o668OcPR2+3onjybjsnFbDaYn311K1v0WF015OWxxRtGZq4hrR7SVq09rFOM82W3uJtwhxXvH37i3OG54lwyT/1jqx7lvbSWuuAPiit8qRHJz/m6YZ+ieTLRrzbi4qwgaR4LVLt0nDOhctcvfrsvBxWLetBwUERAREQBUWxR1KxmW7XRnRNoFql0NdV1Vg3gSqZAlEyUlEyFVUyoC7T8qkUBQRAyAoCCgeoQRAj3IFCBXY4II1qCiXNBjyDBBiSDMHEHAgoNr4V3T5jxCkG3XQutrr6tqvKywf8Abx1RH9009iDrOyfzF8PuwGb5td1tUp+KW2pdwE+70vA94QbZa9ze0FyysfIrKKuJZNE6F2PiC0IBP3Q7P2LdR3+zkIxDLeJ0rvINag1LkX80PF7Frmce2K83eYfDNef5SAHx0jXI77EHDOfd1+dc3d9Lerox7a12qLarZpitWkZFzc5HDxeStc83ppXhlq9i31GvuWF3r7eOLNcwjJanRhfETgsZevXLLaTRa3riTtKKdREQShKGDsjqpMttKMqNlFrmXspRcMFi9EDqUXIalTIFyJkC5GOQqqZVBdl+WyZBEEQN4ICgKBkEQVuQMgrOaBjkgxn5oKnfCgw5UFXVAwQHogLf0ogIzGaCS/4fNeXfzd30v/bn3qo+v4S1fF7o/wBIyZfJ5KwW/Qsf6UVZUZLMlhL115HbmsWaxQFCDsUltqvYsJeii5uSxl6KmRmCgCqIiAUQOqI//9k="},946:function(e,t,a){e.exports=a.p+"images/pressed_06ee6659dc4c884f4ce897f961b82867dd.jpg"},947:function(e,t,a){e.exports=a.p+"images/pressed_075f1556acfe419d708581484968f4b330.jpg"},948:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(949)),r=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state.groupData=null,t.state.showItem=!1,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),n(i,[{key:"loadData",value:function(e){var t=a(151)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["colorSplashItem_"+t].state.beSelected&&this.refs["colorSplashItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["colorSplashItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["colorSplashItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"afterfold",this).call(this),this.setState({showItem:!1})}},{key:"afterUnfold",value:function(){this.setState({showItem:!0}),Fotor.progressBar.hide()}},{key:"componentWillReceiveProps",value:function(e){e&&null==this.state.groupData&&this.setState({groupData:this.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[],swtichMode:!1};return e}},{key:"loadTempHistoryData",value:function(e,t){var a=this.state.groupData.items.length;if(this.hadItemUnfold()){for(var n=0;n<a;n++)if(this.refs["colorSplashItem_"+n].state.beSelected)return void this.refs["colorSplashItem_"+n].loadTempHistoryData(e,t)}else{for(var o=0;o<a;o++)this.refs["colorSplashItem_"+o].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}}},{key:"doItemUnFold",value:function(e){Fotor.historyManager.mergeTempStep();for(var t=this.state.groupData.items.length,a=0;a<t;a++)null==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["colorSplashItem_"+a]!=e&&this.refs["colorSplashItem_"+a].state.beSelected?(this.refs["colorSplashItem_"+a].exitColorSplashMode(),this.refs["colorSplashItem_"+a].setState({beSelected:!1})):this.refs["colorSplashItem_"+a]!=e||this.refs["colorSplashItem_"+a].state.beSelected?this.refs["colorSplashItem_"+a]==e&&this.refs["colorSplashItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({showItem:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_effect_ColorSplash_tip,helpTipGif:a(950),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map((function(a,n){return e.createElement(s,{ref:"colorSplashItem_"+n,unFoldFun:t.doItemUnFold.bind(t),data:a,showItem:t.state.showItem,key:n,scroller:t.props.scroller})})))):e.createElement("div",null)}}]),i}(i.default);t.default=r}).call(this,a(0))},949:function(e,t,a){(function(t,n){var o,i=a(8),s=(o=i)&&o.__esModule?o:{default:o};a(50).default;var r=a(6)({displayName:"ColorSplashItem",getInitialState:function(){return{beSelected:!1,unFoldFun:null,last_Point:null,canvas_Point:null,circel_Point:null,canvas_isDrawing:!1,brush_Size:0,brush_opacity:100,isMoving:!1,hadchanged:!1,savedOrgImg:null,eraserPat:null,isEraserMode:!1,brushPoints:[],beSwapLayer:!1,frontDefaultOpacity:100,backDefaultOpacity:100,itemIcon:"",defaultIcon:"",actionIcon:"",opacity:0}},componentDidMount:function(){this.props&&(this.state.unFoldFun=this.props.unFoldFun,null!=this.props.data.frontDefaultBlend&&null!=this.props.data.frontDefaultBlend?this.state.frontDefaultOpacity=parseInt(this.props.data.frontDefaultBlend):this.state.frontDefaultOpacity=100,null!=this.props.data.backDefaultBlend&&null!=this.props.data.backDefaultBlend?this.state.backDefaultOpacity=parseInt(this.props.data.backDefaultBlend):this.state.backDefaultOpacity=100,""==this.state.defaultIcon&&(this.state.defaultIcon=a(756)("./"+this.props.data.defaultIcon+".jpg")),""==this.state.actionIcon&&(this.state.actionIcon=a(756)("./"+this.props.data.actionIcon+".jpg")),""==this.state.itemIcon&&(this.state.itemIcon=this.state.defaultIcon))},clickHandler:function(e){this.state.unFoldFun&&this.state.unFoldFun(this);var t=this;if(this.state.beSelected)this.state.itemIcon=this.state.defaultIcon,t.exitColorSplashMode();else{this.state.itemIcon=this.state.actionIcon,Fotor.progressBar.show(!0);var a=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.state.brush_Size=Math.round(240*a*.001),this.refs.brushSize.setDefault(240),this.state.brush_opacity=100,this.refs.intensity.setDefault(this.state.brush_opacity),this.refs.switchBox.setSelect(!1),this.state.isEraserMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!1,setTimeout((function(){t.enterColorSplashMode()}),500)}var n=!this.state.beSelected;this.setState({beSelected:n});t=this;setTimeout((function(){n?t.scrollerFix():t.scrollerUpFix()}),300)},toggleEraserMode:function(){this.state.isEraserMode=!this.state.isEraserMode},enterColorSplashMode:function(){this.state.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.frontCommond,this.enterModeSetpCallBack_0,this.state.frontDefaultOpacity,"effect")},enterModeSetpCallBack_0:function(){Fotor.mainCanvas.enterBeautyMode(),this.savedEraserPattern();var e="layer top start;"+this.props.data.backCommond+"layer top swap;"+this.props.data.frontCommond+"blend layer top opacity 100;";Fotor.mainCanvas.fotorEngine.process_commond(e,this.enterModeSetpCallBack_1,this.state.backDefaultOpacity,"effect")},enterSwitchColorSplashMode:function(){this.state.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.backCommond,this.enterSwitchColorSplashMode_0,this.state.frontDefaultOpacity,"effect")},enterSwitchColorSplashMode_0:function(){Fotor.mainCanvas.enterBeautyMode(),this.savedEraserPattern();var e="layer top start;"+this.props.data.frontCommond+"layer top swap;"+this.props.data.backCommond+"blend layer top opacity 100;";Fotor.mainCanvas.fotorEngine.process_commond(e,this.enterModeSetpCallBack_1,this.state.backDefaultOpacity,"effect")},savedEraserPattern:function(){var e=this,t=new Image;t.width=Fotor.mainCanvas.fotorEngine.get_canvas().width,t.height=Fotor.mainCanvas.fotorEngine.get_canvas().height,t.onload=function(){e.state.savedOrgImg=t;var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");e.state.eraserPat=a.createPattern(e.state.savedOrgImg,"no-repeat")},t.src=Fotor.mainCanvas.fotorEngine.get_canvas().toDataURL()},enterModeSetpCallBack_1:function(){var e=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d"),a=this.state.brushPoints.length;if(a>0)for(var n=0;n<a;n++)if("hardEraser"==this.state.brushPoints[n].model)for(var o=0;o<this.state.brushPoints[n].points.length-1;o++)e.save(),e.strokeStyle=this.state.eraserPat,e.lineJoin=e.lineCap="round",e.lineWidth=this.state.brushPoints[n].size/Fotor.mainCanvas.editorCanvasScale,e.beginPath(),e.moveTo(this.state.brushPoints[n].points[o].x,this.state.brushPoints[n].points[o].y),e.lineTo(this.state.brushPoints[n].points[o+1].x,this.state.brushPoints[n].points[o+1].y),e.stroke(),e.restore();else if("lucency"==this.state.brushPoints[n].model)for(var i=0;i<this.state.brushPoints[n].points.length-1;i++){var r=Fotor.EngineAction.distanceBetween(this.state.brushPoints[n].points[i],this.state.brushPoints[n].points[i+1]),l=Math.max(.13*this.state.brushPoints[n].size,1),c=Math.floor(Math.max(Math.ceil(r)/l,1)),h={x:this.state.brushPoints[n].points[i+1].x-this.state.brushPoints[n].points[i].x,y:this.state.brushPoints[n].points[i+1].y-this.state.brushPoints[n].points[i].y},d={x:h.x/c,y:h.y/c};e.save();for(var u=.5*this.state.brushPoints[n].size*1.15/Fotor.mainCanvas.editorCanvasScale,v=2*u,p=0;p<c;p++){var f=this.state.brushPoints[n].points[i].x+d.x*p,m=this.state.brushPoints[n].points[i].y+d.y*p,g=e.createRadialGradient(f,m,0,f,m,u);g.addColorStop(0,"rgba(0,0,0,0.32)"),g.addColorStop(.2,"rgba(0,0,0,0.205)"),g.addColorStop(.4,"rgba(0,0,0,0.12)"),g.addColorStop(.7,"rgba(0,0,0,0.04)"),g.addColorStop(.83,"rgba(0,0,0,0.03)"),g.addColorStop(.89,"rgba(0,0,0,0.004)"),g.addColorStop(1,"rgba(0,0,0,0)"),e.globalCompositeOperation="destination-out",e.lineJoin=e.lineCap="round",e.fillStyle=g,e.fillRect(f-u,m-u,v,v)}e.restore()}Fotor.mainCanvas.trigger(s.default.ENGINELAYER_CHANGE),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,t(".upper-canvas").on("mousedown",this.moveControlDown),t(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()},exitColorSplashMode:function(){this.state.savedOrgImg=null,this.state.eraserPat=null,this.state.hadchanged=!1,this.state.brushPoints=[],Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(s.default.CONTENT_CHANGE),t(".upper-canvas").off("mousedown",this.moveControlDown),t(document).off("mousemove",this.drawMoving),t(document).off("mouseup",this.endChangeing)},drawBeauty:function(){var e=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(this.state.isEraserMode)e.save(),e.strokeStyle=this.state.eraserPat,e.lineJoin=e.lineCap="round",e.lineWidth=this.state.brush_Size/Fotor.mainCanvas.editorCanvasScale,e.beginPath(),e.moveTo(this.state.last_Point.x,this.state.last_Point.y),e.lineTo(this.state.canvas_Point.x,this.state.canvas_Point.y),e.stroke(),e.restore();else{var t=Fotor.EngineAction.distanceBetween(this.state.last_Point,this.state.canvas_Point),a=Math.max(.13*this.state.brush_Size,1),n=Math.floor(Math.max(Math.ceil(t)/a,1)),o={x:this.state.canvas_Point.x-this.state.last_Point.x,y:this.state.canvas_Point.y-this.state.last_Point.y},i={x:o.x/n,y:o.y/n};e.save();for(var s=.5*this.state.brush_Size*1.15/Fotor.mainCanvas.editorCanvasScale,r=0;r<n;r++){var l=this.state.last_Point.x+i.x*r,c=this.state.last_Point.y+i.y*r,h=e.createRadialGradient(l,c,0,l,c,s);h.addColorStop(0,"rgba(0,0,0,0.32)"),h.addColorStop(.2,"rgba(0,0,0,0.205)"),h.addColorStop(.4,"rgba(0,0,0,0.12)"),h.addColorStop(.7,"rgba(0,0,0,0.04)"),h.addColorStop(.83,"rgba(0,0,0,0.03)"),h.addColorStop(.89,"rgba(0,0,0,0.004)"),h.addColorStop(1,"rgba(0,0,0,0)"),e.globalCompositeOperation="destination-out",e.lineJoin=e.lineCap="round",e.fillStyle=h,e.fillRect(l-s,c-s,2*s,2*s)}e.restore()}null!=this.state.brushPoints[this.state.brushPoints.length-1]&&this.state.brushPoints[this.state.brushPoints.length-1].points&&this.state.brushPoints[this.state.brushPoints.length-1].points.push(this.state.canvas_Point),this.state.last_Point=this.state.canvas_Point},moveControlDown:function(e){if(e.preventDefault(),e.stopPropagation(),this.getEventPoint(e)){this.state.canvas_isDrawing=!0,t(document).on("mouseup",this.endChangeing),this.state.last_Point=this.state.canvas_Point;var a={opacity:.5};a.size=this.state.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.state.isEraserMode?"hardEraser":"lucency",this.state.brushPoints[this.state.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}},drawMoving:function(e){this.getEventPoint(e)?(this.state.isMoving||(this.state.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.state.circel_Point=this.state.canvas_Point,this.state.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.state.isMoving&&(this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.state.isMoving=!1)},endChangeing:function(e){this.state.canvas_isDrawing&&(this.state.canvas_isDrawing=!1,this.getEventPoint(e)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(s.default.BEAUTYLAYER_CHANGE)),t(document).off("mouseup",this.endChangeing)},getEventPoint:function(e){this.state.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.state.canvas_Point.x>n&&this.state.canvas_Point.x<n+i&&(t=(this.state.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.state.canvas_Point.y>o&&this.state.canvas_Point.y<o+s&&(a=(this.state.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.state.canvas_Point={x:t,y:a},!0)},helperDrawCursorCircel:function(e,t){if(this.state.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.state.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.state.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.state.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.state.isEraserMode||(t.save(),this.state.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}},mouseOverHandler:function(e){this.state.beSelected||(this.state.itemIcon=this.state.actionIcon),this.setState({})},mouseOutHnadler:function(e){this.state.beSelected||(this.state.itemIcon=this.state.defaultIcon),this.setState({})},handleBrushSizeChange:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.state.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.state.isMoving=!0,this.state.circel_Point={},this.state.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.state.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()},handleBrushSizeChanged:function(e){this.handleBrushSizeChange(e),this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()},handleRecoveredChange:function(e){this.state.brush_opacity=this.refs.intensity.val(),this.refs.IntensitySpan&&t(this.refs.IntensitySpan).html(this.state.brush_opacity);var a="layer top start;"+this.props.data.backCommond+"layer top swap;"+this.props.data.frontCommond+"blend layer top opacity "+this.state.brush_opacity+";";Fotor.mainCanvas.fotorEngine.process_commond(a,this.comondCallBack,this.state.backDefaultOpacity,"effect")},handleRecoveredChanged:function(e){this.handleRecoveredChange(e)},comondCallBack:function(){Fotor.mainCanvas.trigger(s.default.ENGINELAYER_CHANGE)},componentWillReceiveProps:function(e){e&&e.showItem&&(this.state.unFoldFun=e.unFoldFun,null!=e.data.frontDefaultBlend&&null!=e.data.frontDefaultBlend?this.state.frontDefaultOpacity=parseInt(e.data.frontDefaultBlend):this.state.frontDefaultOpacity=100,null!=e.data.backDefaultBlend&&null!=e.data.backDefaultBlend?this.state.backDefaultOpacity=parseInt(e.data.backDefaultBlend):this.state.backDefaultOpacity=100,""==this.state.defaultIcon&&(this.state.defaultIcon=a(756)("./"+this.props.data.defaultIcon+".jpg")),""==this.state.actionIcon&&(this.state.actionIcon=a(756)("./"+this.props.data.actionIcon+".jpg")),""==this.state.itemIcon&&(this.state.itemIcon=this.state.defaultIcon))},getDefaultHistoryData:function(){var e={brushPoints:[],swtichMode:!1};return e},getCurrentHistoryData:function(){var e={};return e.brushPoints=this.state.brushPoints,e.swtichMode=this.refs.switchBox.isSelected(),e},loadTempHistoryData:function(e,t){if(this.state.brushPoints=e.brushPoints,this.refs.switchBox.isSelected()!=e.swtichMode)this.refs.switchBox.setSelect(e.swtichMode),Fotor.progressBar.show(!0),e.swtichMode?this.enterSwitchColorSplashMode():this.enterColorSplashMode();else{var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.state.savedOrgImg,0,0),n.restore(),t)this.state.hadchanged&&(this.state.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo());else if(a>0){this.state.hadchanged||(this.state.hadchanged=!0);for(var o=0;o<a;o++)if("hardEraser"==e.brushPoints[o].model)for(var i=0;i<e.brushPoints[o].points.length-1;i++)n.save(),n.strokeStyle=this.state.eraserPat,n.lineJoin=n.lineCap="round",n.lineWidth=e.brushPoints[o].size/Fotor.mainCanvas.editorCanvasScale,n.beginPath(),n.moveTo(e.brushPoints[o].points[i].x,e.brushPoints[o].points[i].y),n.lineTo(e.brushPoints[o].points[i+1].x,e.brushPoints[o].points[i+1].y),n.stroke(),n.restore();else if("lucency"==e.brushPoints[o].model)for(var s=0;s<e.brushPoints[o].points.length-1;s++){var r=Fotor.EngineAction.distanceBetween(e.brushPoints[o].points[s],e.brushPoints[o].points[s+1]),l=Math.max(.13*e.brushPoints[o].size,1),c=Math.floor(Math.max(Math.ceil(r)/l,1)),h={x:e.brushPoints[o].points[s+1].x-e.brushPoints[o].points[s].x,y:e.brushPoints[o].points[s+1].y-e.brushPoints[o].points[s].y},d={x:h.x/c,y:h.y/c};n.save();for(var u=.5*e.brushPoints[o].size*1.15/Fotor.mainCanvas.editorCanvasScale,v=2*u,p=0;p<c;p++){var f=e.brushPoints[o].points[s].x+d.x*p,m=e.brushPoints[o].points[s].y+d.y*p,g=n.createRadialGradient(f,m,0,f,m,u);g.addColorStop(0,"rgba(0,0,0,0.32)"),g.addColorStop(.2,"rgba(0,0,0,0.205)"),g.addColorStop(.4,"rgba(0,0,0,0.12)"),g.addColorStop(.7,"rgba(0,0,0,0.04)"),g.addColorStop(.83,"rgba(0,0,0,0.03)"),g.addColorStop(.89,"rgba(0,0,0,0.004)"),g.addColorStop(1,"rgba(0,0,0,0)"),n.globalCompositeOperation="destination-out",n.lineJoin=n.lineCap="round",n.fillStyle=g,n.fillRect(f-u,m-u,v,v)}n.restore()}}}},applyHandler:function(e){if(this.state.hadchanged){var t=this.state.brushPoints.length;if(Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale),t>0)for(var a=0;a<t;a++){if(this.refs.switchBox.isSelected()){var n="layer top start;"+this.props.data.frontCommond+"layer top swap;"+this.props.data.backCommond+"blend layer top opacity "+this.state.brush_opacity+";";Fotor.mainCanvas.fotorEngine.process_painter_rule(this.state.brushPoints[a],n,!1,!1,this.props.data.backCommond)}else{var o="layer top start;"+this.props.data.backCommond+"layer top swap;"+this.props.data.frontCommond+"blend layer top opacity "+this.state.brush_opacity+";";Fotor.mainCanvas.fotorEngine.process_painter_rule(this.state.brushPoints[a],o,!1,!1,this.props.data.frontCommond)}Fotor.mainCanvas.fotorEngine.refresh_record()}else this.refs.switchBox.isSelected()?Fotor.mainCanvas.fotorEngine.process_rule(this.props.data.backCommond,!0):Fotor.mainCanvas.fotorEngine.process_rule(this.props.data.frontCommond,!0);Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler)}else this.cancelHandler()},handleTransparentBorder:function(e){Fotor.progressBar.show(!0),e?(Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),this.enterSwitchColorSplashMode()):(Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),this.enterColorSplashMode())},afterApplyHandler:function(){this.state.unFoldFun(this),this.exitColorSplashMode(),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.exitColorSplashMode(),this.setState({beSelected:!1})},render:function(){return n.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(this.state.beSelected?"active active-310":"")},this.props.data.isVip?n.createElement("span",{className:"vip"}):"",n.createElement("div",{"data-display":this.props.doEffect},n.createElement("div",{className:"effect-item-img clearfix",onClick:this.clickHandler},n.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[this.props.data.name].toUpperCase()),n.createElement("img",{ref:"itemImg",onMouseOver:this.mouseOverHandler,onMouseOut:this.mouseOutHnadler,src:this.state.itemIcon,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),n.createElement("div",{className:"effect-item-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode})),n.createElement("div",{className:"container-leave-34"},n.createElement("div",{className:""},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size),n.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"550",min:"10",default:"240",className:"input-range-grey",onChange:this.handleBrushSizeChange,onChanged:this.handleBrushSizeChanged}))),n.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"100"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",default:"100",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange,onChanged:this.handleRecoveredChanged}),n.createElement("div",{className:"paddingT15"},n.createElement(Fotor.ui.Checkbox,{ref:"switchBox",text:Fotor.globalConfig.lang.editor_effect_colorsplash_switchCheckbox,onClick:this.handleTransparentBorder})),n.createElement("div",{className:"clearfix effect-item-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){this.imageInterval=setInterval(this.showImage,30)},showImage:function(){var e=this.state.opacity+.1;this.setState({opacity:e}),e>=1&&clearInterval(this.imageInterval)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),n=t(this.refs.item).offset(),o=t(".toolbar-list").height(),i=t(".toolbar-list").offset(),s=-e.state.topPosition,r=a;if(n.top<80){var l=n.top-i.top-s;e.scrollYTo(l)}else if(n.top+r>o+i.top){l=n.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),n=e.state.topPosition,o=a.realHeight-a.containerHeight;n>o?t(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}});e.exports=r}).call(this,a(2),a(0))},950:function(e,t,a){e.exports=a.p+"images/color-splasha33d845d857164f96be86114dc859638.gif"},951:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=15,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),o(a,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.setState({}),i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(110*e*.001),this.refs.brushSize.setDefault(110),this.beauty_opacity=15,this.refs.recovered.setDefault(15),this.brushPoints=[],this.hadchanged=!1,this.isEraserMode=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.setState({})}},{key:"afterUnfold",value:function(){var t=this;i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(!0),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.5};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){var e=105-this.beauty_opacity;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.pixelate(e),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t)this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo());else if(a>0){(new Date).getTime();this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a)}}},{key:"applyHandler",value:function(){if(i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=105-this.beauty_opacity,n=0;n<e;n++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[n],Fotor.EngineAction.pixelate(t),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold),FotorAnalytic.pageView("/editor/effect/pixelateTool",Fotor.routerManager.getToolPath())}else this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_pixelate,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"effect-group clearfix"},n.createElement("div",{className:"effect-item active active-no-img"},n.createElement("div",{className:"effect-item-inner"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"550",min:"20",default:"110",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Pixel_Size,n.createElement("span",{className:"pull-right",ref:"RecoveredSpan"},"50")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"5",default:"15",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix effect-item-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))))}}]),a}(s.default));t.default=l}).call(this,a(2),a(0))},952:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.blur_opacity=100,t.beauty_opacity=100,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.setState({}),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(110*e*.001),this.refs.brushSize.setDefault(110),this.blur_opacity=100,this.refs.blurRange.setDefault(100),this.beauty_opacity=100,this.refs.recovered.setDefault(100),this.hadchanged=!1,this.isEraserMode=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.setState({})}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode}},{key:"drawBeauty",value:function(){this.hadchanged=!0,this.isEraserMode?Fotor.mainCanvas.fotorEngine.process_blur_brush_rule({points:[this.last_Point,this.canvas_Point],size:this.brush_Size/Fotor.mainCanvas.editorCanvasScale,opacity:3,model:"lucency"},Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1):Fotor.mainCanvas.fotorEngine.process_blur_brush_rule({points:[this.last_Point,this.canvas_Point],size:this.brush_Size/Fotor.mainCanvas.editorCanvasScale,opacity:.6,model:"eraser"},Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1),this.last_Point=this.canvas_Point}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),Fotor.mainCanvas.fotorEngine.process_blur_brush_rule(null,Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1)}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"handleBlurChange",value:function(e){this.blur_opacity=this.refs.blurRange.val(),Fotor.mainCanvas.fotorEngine.process_blur_brush_rule(null,Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1)}},{key:"handleBlurChanged",value:function(e){this.handleBlurChange(e)}},{key:"drawCanvas",value:function(){this.hadchanged=!0;var e=this.beauty_opacity;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.photoBlur(e),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_photoBlur.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_effect_photoBlur_tip,helpTipGif:a(953),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,vip:!0,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"effect-group clearfix"},n.createElement("div",{className:"effect-item active active-278"},n.createElement("div",{className:"effect-item-inner"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"550",min:"20",default:"110",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_photoBlur_brushIntensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"blurSpan"},"50"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"blurRange",max:"100",min:"5",default:"15",className:"input-range-grey",bindEle:this.refs.blurSpan,onChange:this.handleBlurChange.bind(this),onChanged:this.handleBlurChanged.bind(this)}),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_photoBlur_blurIntensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"50"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"5",default:"15",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix effect-item-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))))}}]),s}(s.default);t.default=l}).call(this,a(2),a(0))},953:function(e,t,a){e.exports=a.p+"images/shift-brush3f7f7f94cac19246405224a0133b2a4f.gif"},954:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(955)),r=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.state.groupData=null,t.state.deEffect=!1,t.state.thumbImg=null,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),n(i,[{key:"loadData",value:function(e){var t=a(151)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["lensFlareItem_"+t].state.beSelected&&this.refs["lensFlareItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["lensFlareItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["lensFlareItem_"+t]&&this.refs["lensFlareItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"afterfold",this).call(this),this.setState({deEffect:!1})}},{key:"afterUnfold",value:function(){var e=this,t=!1;null!=e.state.thumbImg&&(t=!0),setTimeout((function(){e.creatImgThumb((function(){if(t)for(var a=e.state.groupData.items.length,n=0;n<a;n++)e.refs["lensFlareItem_"+n].updataThumbImage();e.setState({deEffect:!0}),Fotor.progressBar.hide()}))}),100),e.setState({deEffect:!0})}},{key:"creatImgThumb",value:function(e){var t=this;Fotor.mainCanvas.requestDocumentToolThumb().then((function(a){Fotor.mainCanvas.doEffectCanvas||(Fotor.mainCanvas.doEffectCanvas=document.createElement("canvas")),Fotor.mainCanvas.doEffectCanvas.getContext("2d").clearRect(0,0,Fotor.mainCanvas.doEffectCanvas.width,Fotor.mainCanvas.doEffectCanvas.height),Fotor.mainCanvas.doEffectCanvas.setAttribute("width",a.width),Fotor.mainCanvas.doEffectCanvas.setAttribute("height",a.height),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,null,!0),Fotor.mainCanvas.effectThumb=a.toDataURL("image/jpeg",.7),t.state.thumbImg=Fotor.mainCanvas.effectThumb,e&&e()}))}},{key:"componentWillReceiveProps",value:function(e){e&&null==this.state.groupData&&this.setState({groupData:this.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"loadTempHistoryData",value:function(e){var t=this;t.creatImgThumb((function(){for(var e=t.state.groupData.items.length,a=0;a<e;a++)t.refs["lensFlareItem_"+a]&&(t.refs["lensFlareItem_"+a].cancelHandler(),t.refs["lensFlareItem_"+a].updataThumbImage());t.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}))}},{key:"doItemUnFold",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)null==e||null==e||"toBig"==e||"updataThumb"==e?null==e||null==e||"toBig"==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):null!=e&&null!=e&&"updataThumb"!=e||this.refs["lensFlareItem_"+a].updataThumbImage():this.refs["lensFlareItem_"+a]!=e&&this.refs["lensFlareItem_"+a].state.beSelected?(this.refs["lensFlareItem_"+a].cancelEffectFun(),this.refs["lensFlareItem_"+a].setState({beSelected:!1})):this.refs["lensFlareItem_"+a]!=e||this.refs["lensFlareItem_"+a].state.beSelected?this.refs["lensFlareItem_"+a]==e&&this.refs["lensFlareItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({deEffect:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase(),onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map((function(a,n){return e.createElement(s,{ref:"lensFlareItem_"+n,unFoldFun:t.doItemUnFold.bind(t),data:a,doEffect:t.state.deEffect,key:n,thumbImg:t.state.thumbImg,scroller:t.props.scroller})})))):e.createElement("div",null)}}]),i}(i.default);t.default=r}).call(this,a(0))},955:function(e,t,a){(function(t,n,o){var i,s=a(8),r=(i=s)&&i.__esModule?i:{default:i};a(50).default,a(956);var l=a(6)({displayName:"LensFlareItem",tabDown:!1,getInitialState:function(){return{beSelected:!1,isDoneEffect:!1,doneEffectImg:null,unFoldFun:null,commondOpacity:80,effectThumbViewResult:0,controlDiv:null,lensFlareMoveDiv:null,event_state:{},circleX:0,circleY:0,circleRadius:0,OverOrOut:0,opacity:0,applyCommond:""}},componentWillUnmount:function(){t(document).off("keydown",this.handleKeydown),t(document).off("keyup",this.handleKeyup)},componentDidMount:function(){this.props&&!this.state.isDoneEffect&&this.props.doEffect&&Fotor.mainCanvas.effectEngine&&(this.state.isDoneEffect=!0,this.state.doneEffectImg=this.props.thumbImg,this.state.unFoldFun=this.props.unFoldFun,null!=this.props.data.defaultBlend&&null!=this.props.data.defaultBlend?this.state.commondOpacity=parseInt(this.props.data.defaultBlend):this.state.commondOpacity=80,Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.setEffectImg,this.state.commondOpacity,"effect",!0)),t(document).on("keydown",this.handleKeydown),t(document).on("keyup",this.handleKeyup)},handleKeydown:function(e){9==e.keyCode&&(this.tabDown=!0)},handleKeyup:function(e){this.tabDown=!1},hanldeClick:function(e){if(!this.tabDown){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelEffectFun():this.doEffectFun();var t=!this.state.beSelected;this.setState({beSelected:t});var a=this;setTimeout((function(){t?a.scrollerFix():a.scrollerUpFix()}),300)}},doEffectFun:function(){this.refs.intensity.setDefault(this.state.commondOpacity),this.refs.brushSize.setDefault(50),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect"),this.state.circleX=Math.round(.5*Fotor.mainCanvas.canvas.documentWidth),this.state.circleY=Math.round(.5*Fotor.mainCanvas.canvas.documentHeight),this.state.circleRadius=.5*Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight),Fotor.mainCanvas.canvas.customControlsFun=this.redrawControlLayer,Fotor.mainCanvas.canvas.hasCustomControls=!0,this.createLensFlareControlDiv(),Fotor.mainCanvas.on(r.default.CONTENT_CHANGE,this.onContentChange),Fotor.mainCanvas.canvas.requestRenderAll()},cancelEffectFun:function(e){e&&this.state.unFoldFun(this),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,this.removeCropControlDiv(),Fotor.mainCanvas.off(r.default.CONTENT_CHANGE,this.onContentChange),Fotor.mainCanvas.canvas.requestRenderAll()},createLensFlareControlDiv:function(){null==this.state.controlDiv&&(this.state.controlDiv=t("<div class='lensFlareDiv'><div id='target-bar' class=' moveBar cursor-resize-move lensFlareMoveDiv'><div class='round'></div><span class='v'></span><span class='h'></span></div></div>").appendTo(t(".canvas-container")),this.state.lensFlareMoveDiv=t(".lensFlareMoveDiv"),t("#target-bar .round").css({left:"33.3%",top:"33.3%",width:"33.3%",height:"33.3%"}),this.refreshDivHolderSize(),t(".lensFlareMoveDiv").on("mousedown",this.moveControlDown))},checkFadeIn:function(){this.state.lensFlareMoveDiv&&(this.state.lensFlareMoveDiv.css({opacity:1}),this.state.lensFlareMoveDiv.show())},checkFadeOut:function(){var e=this;this.state.lensFlareMoveDiv&&this.state.lensFlareMoveDiv.fadeOut("fast",(function(){e.state.lensFlareMoveDiv.show(),e.state.lensFlareMoveDiv.css({opacity:0})}))},refreshDivHolderSize:function(){if(null!=this.state.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=Fotor.mainCanvas.canvasHolderEle.width(),t=Fotor.mainCanvas.canvasHolderEle.height();this.state.controlDiv.css({position:"absolute",left:"0px",top:"0px",width:e+"px",height:t+"px"}),this.refreshDivData()}},saveEventState:function(e){this.state.event_state.save_circleX=this.state.circleX,this.state.event_state.save_circleY=this.state.circleY,this.state.event_state.mouse_x=(e.clientX||e.pageX||e.originalEvent.touches[0].clientX)+t(window).scrollLeft(),this.state.event_state.mouse_y=(e.clientY||e.pageY||e.originalEvent.touches[0].clientY)+t(window).scrollTop(),this.state.event_state.evnt=e},moveControlDown:function(e){e.preventDefault(),e.stopPropagation(),this.saveEventState(e),t(document).on("mousemove",this.moving),t(document).on("mouseup",this.endChangeing),this.checkFadeIn()},moving:function(e){var a={};e.preventDefault(),e.stopPropagation(),a.x=(e.clientX||e.pageX)+t(window).scrollLeft(),a.y=(e.clientY||e.pageY)+t(window).scrollTop();var n=a.x-this.state.event_state.mouse_x,o=a.y-this.state.event_state.mouse_y;this.state.circleX=this.state.event_state.save_circleX+n/Fotor.mainCanvas.canvas.viewportTransform[0],this.state.circleY=this.state.event_state.save_circleY+o/Fotor.mainCanvas.canvas.viewportTransform[3],Fotor.mainCanvas.canvas.requestRenderAll()},endChangeing:function(e){e.preventDefault(),t(document).off("mousemove",this.moving),t(document).off("mouseup",this.endChangeing),setTimeout(this.checkFadeOut,200)},removeCropControlDiv:function(){if(null!=this.state.controlDiv){t(".lensFlareMoveDiv").off("mousedown",this.moveControlDown),t(".canvas-container")[0].removeChild(this.state.controlDiv[0]),this.state.controlDiv=null,this.state.lensFlareMoveDiv=null}},redrawControlLayer:function(e,t,a){Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight;t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),null!=e.viewportTransform&&t.transform.apply(t,e.viewportTransform),t.globalAlpha=.01*this.state.commondOpacity;for(var n=t.createRadialGradient(this.state.circleX,this.state.circleY,0,this.state.circleX,this.state.circleY,this.state.circleRadius),o=this.props.data.radialData.length,i=0;i<o;i++)n.addColorStop(this.props.data.radialData[i].ratio,this.props.data.radialData[i].color);t.fillStyle=n;var s=this.state.circleX-this.state.circleRadius,r=this.state.circleY-this.state.circleRadius;t.fillRect(s,r,2*this.state.circleRadius,2*this.state.circleRadius),t.restore(),null!=a&&null!=a||this.refreshDivData()},refreshDivData:function(){if(null!=this.state.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=this.state.circleX-this.state.circleRadius,t=this.state.circleY-this.state.circleRadius,a=e=Fotor.mainCanvas.canvas.viewportTransform[0]*e+Fotor.mainCanvas.canvas.viewportTransform[4],n=t=Fotor.mainCanvas.canvas.viewportTransform[3]*t+Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.viewportTransform[0]*this.state.circleRadius*2,i=Fotor.mainCanvas.canvas.viewportTransform[3]*this.state.circleRadius*2;this.state.lensFlareMoveDiv.css({left:a+"px",top:n+"px",width:o+"px",height:i+"px"}),Fotor.mainCanvas.trigger(r.default.STATICLAYER_CHANGE)}},onContentChange:function(){Fotor.mainCanvas.canvas.requestRenderAll()},handleIntensityValueChange:function(e){this.state.commondOpacity=this.refs.intensity.val(),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect"),Fotor.mainCanvas.canvas.requestRenderAll()},handleIntensityValueChanged:function(e){this.handleIntensityValueChange(e)},handleBrushSizeChange:function(e){this.checkFadeIn();var t=this.refs.brushSize.val();t=.01*parseInt(t),this.state.circleRadius=Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)*t,Fotor.mainCanvas.canvas.requestRenderAll()},handleBrushSizeChanged:function(e){this.checkFadeOut();var t=this.refs.brushSize.val();t=.01*parseInt(t),this.state.circleRadius=Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)*t,Fotor.mainCanvas.canvas.requestRenderAll()},setEffectImg:function(e){this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var t=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(t)){var a=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,t);this.setState({isDoneEffect:!0,doneEffectImg:a})}},componentWillReceiveProps:function(e){e&&!this.state.isDoneEffect&&e.doEffect&&Fotor.mainCanvas.effectEngine&&(this.state.isDoneEffect=!0,this.state.doneEffectImg=e.thumbImg,this.state.unFoldFun=e.unFoldFun,null!=e.data.defaultBlend&&null!=e.data.defaultBlend?this.state.commondOpacity=parseInt(e.data.defaultBlend):this.state.commondOpacity=80,Fotor.mainCanvas.effectEngine.process_commond(e.data.commond,this.setEffectImg,this.state.commondOpacity,"effect",!0))},updataThumbImage:function(){Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.setEffectImg,this.state.commondOpacity,"effect",!0)},comondCallBack:function(){Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)},applyHandler:function(e){this.cancelEffectFun();for(var t=this.state.circleX/Fotor.mainCanvas.canvas.documentWidth,a=this.state.circleY/Fotor.mainCanvas.canvas.documentHeight,n=this.state.circleRadius/Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight),o=this.props.data.radialData.length,i="",s=0;s<o;s++){var r=this.props.data.radialData[s].color.length-6,l=this.props.data.radialData[s].color.substr(5,r).split(",");i+=" ratio "+this.props.data.radialData[s].ratio+" color "+l[0]+" "+l[1]+" "+l[2]+" "+(255*parseFloat(l[3])).toString()}i+=";",this.state.applyCommond=this.props.data.commond+"basicAdjust lensFlare radius "+n+" pos "+t+" "+a+i,Fotor.mainCanvas.fotorEngine.process_commond(this.state.applyCommond,this.comondApplyCallBack,this.state.commondOpacity,"effect")},comondApplyCallBack:function(){Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler)},afterApplyHandler:function(){this.state.unFoldFun("toBig"),this.comondCallBack(),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.state.applyCommond,this.applyThumbHandler,this.state.commondOpacity,"effect",!0)},applyThumbHandler:function(e){var t=this;this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var a=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(a)){var o=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,a);Fotor.mainCanvas.effectThumb=o,n(o,(function(e){Fotor.mainCanvas.effectEngine.set_image(e,e.width,e.height,Fotor.mainCanvas.engineFluentSize,null,!0),t.state.unFoldFun("updataThumb"),t.setState({effectThumbViewResult:0,beSelected:!1})}))}},cancelHandler:function(e){this.cancelEffectFun(e),this.setState({effectThumbViewResult:0,beSelected:!1})},render:function(){return null==this.state.doneEffectImg&&null!=this.props.thumbImg&&(this.state.doneEffectImg=this.props.thumbImg),o.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(this.state.beSelected?"active active-278":"")},this.props.data.isVip?o.createElement("span",{className:"vip"}):"",o.createElement("div",{"data-display":this.props.doEffect},o.createElement("div",{className:"effect-item-img clearfix",onClick:this.hanldeClick,onMouseDown:this.handleMouseDown},o.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[this.props.data.name].toUpperCase()),o.createElement("img",{ref:"itemImg",src:this.state.doneEffectImg,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),o.createElement("div",{className:"effect-item-inner clearfix"},o.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,o.createElement("div",{className:"pull-right"},o.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),o.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",default:"80",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleIntensityValueChange,onChanged:this.handleIntensityValueChanged}),o.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Size,o.createElement("span",{className:"pull-right",ref:"blushSizeSpan"},"50")),o.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"100",min:"10",default:"50",className:"input-range-grey",bindEle:this.refs.blushSizeSpan,onChange:this.handleBrushSizeChange,onChanged:this.handleBrushSizeChanged}),o.createElement("div",{className:"clearfix effect-item-btns paddingT10"},o.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),o.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){this.imageInterval=setInterval(this.showImage,30)},showImage:function(){var e=this.state.opacity+.1;this.setState({opacity:e}),e>=1&&clearInterval(this.imageInterval)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),n=t(this.refs.item).offset(),o=t(".toolbar-list").height(),i=t(".toolbar-list").offset(),s=-e.state.topPosition,r=a;if(n.top<80){var l=n.top-i.top-s;e.scrollYTo(l)}else if(n.top+r>o+i.top){l=n.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),n=e.state.topPosition,o=a.realHeight-a.containerHeight;n>o?t(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}});e.exports=l}).call(this,a(2),a(24),a(0))},956:function(e,t,a){(function(t,n){a(957);var o=a(6)({displayName:"TargetBar",getInitialState:function(){return{display:!1,bg:"#000",x:200,y:200,width:50,radius:25}},componentDidMount:function(){},parentOffset:function(){this.offset=t(this.refs.TargetBar).parent().offset()},offset:null,show:function(){this.setState({display:!0})},updateTarget:function(e,t,a){null!=a&&(this.state.bg=a),null!=t&&(this.state.radius=t),null==this.offset&&this.parentOffset(),this.setState({x:e.x-this.offset.left,y:e.y-this.offset.top})},hide:function(){this.setState({display:!1})},render:function(){return n.createElement("div",{id:"target-bar",ref:"TargetBar",style:{display:this.state.display?"block":"none",left:this.state.x,top:this.state.y}},n.createElement("span",{className:"round",style:{width:2*this.state.radius,height:2*this.state.radius,marginLeft:-this.state.radius,marginTop:-this.state.radius,borderColor:this.state.bg}}),n.createElement("span",{className:"v",style:{background:this.state.bg}}),n.createElement("span",{className:"h",style:{background:this.state.bg}}))}});e.exports=o}).call(this,a(2),a(0))},957:function(e,t,a){var n=a(958);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},958:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"/*-----------------------------------------\n * Base Settings\n * ----------------------------------------*/\n/*-----------------------------------------\n * Layout\n * ----------------------------------------*/\n/*-----------------------------------------\n * Mixin\n * ----------------------------------------*/\n#target-bar {\n  position: absolute;\n  z-index: 50;\n  width: 100px;\n  height: 100px; }\n  #target-bar .round {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: block;\n    left: 0%;\n    top: 0%;\n    border: 1px solid rgba(102, 102, 102, 0.8);\n    border-radius: 1000px;\n    -moz-border-radius: 1000px;\n    -webkit-border-radius: 1000px; }\n  #target-bar .v {\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    margin: -10px 0 0;\n    width: 1px;\n    height: 21px;\n    background: rgba(102, 102, 102, 0.8); }\n  #target-bar .h {\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    margin: 0 0 0 -10px;\n    width: 21px;\n    height: 1px;\n    background: rgba(102, 102, 102, 0.8); }\n  #target-bar.white .round {\n    border-color: rgba(255, 255, 255, 0.8); }\n  #target-bar.white .v {\n    width: 10px;\n    height: 10px;\n    background: rgba(255, 255, 255, 0.8);\n    margin: -4px 0 0 -4px;\n    border-radius: 10px;\n    -webkit-border-radius: 10px;\n    -moz-border-radius: 10px; }\n  #target-bar.white .h {\n    display: none; }\n",""])},959:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0}),a(960);var s=a(72),r=a(8),l=function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.isCircleMode=!1,t.commond_opacity=90,t.centerX=0,t.centerY=0,t.shiftRadius=60,t.shiftAngle=90,t.controlDiv=null,t.mouseDiv=null,t.circleMoveDiv=null,t.linerMoveDiv=null,t.leftDot=null,t.rightDot=null,t.event_={},t.maxPixel=0,t.OverOrOut=null,t.timeFlag=!1,t.moveControlDown=t.moveControlDown.bind(t),t.moving=t.moving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.dotControlDown=t.dotControlDown.bind(t),t.rotateing=t.rotateing.bind(t),t.moveControlOver=t.moveControlOver.bind(t),t.moveControlOut=t.moveControlOut.bind(t),t.checkFadeIn=t.checkFadeIn.bind(t),t.checkFadeOut=t.checkFadeOut.bind(t),t.refreshDivHolderSize=t.refreshDivHolderSize.bind(t),t.refreshDivData=t.refreshDivData.bind(t),t.drawCanvas=t.drawCanvas.bind(t),t.removetiltShiftControlDiv=t.removetiltShiftControlDiv.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.removetiltShiftControlDiv(),Fotor.mainCanvas.off(r.default.VIEWPORT_CHANGE,this.refreshDivHolderSize),Fotor.mainCanvas.off(r.default.ZOOM_CHANGE,this.refreshDivHolderSize),Fotor.mainCanvas.off(r.default.CONTENT_CHANGE,this.refreshDivHolderSize),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){this.shiftRadius=60,this.refs.brushSize.setDefault(60),this.commond_opacity=90,this.refs.recovered.setDefault(90),this.isCircleMode=!1,this.centerX=.5,this.centerY=.5,this.shiftAngle=90,this.maxPixel=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight,this.setState({})}},{key:"afterUnfold",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this);var e=this;setTimeout((function(){e.createtiltShiftControlDiv(),e.refreshDivData(),Fotor.mainCanvas.on(r.default.VIEWPORT_CHANGE,e.refreshDivHolderSize),Fotor.mainCanvas.on(r.default.ZOOM_CHANGE,e.refreshDivHolderSize),Fotor.mainCanvas.on(r.default.CONTENT_CHANGE,e.refreshDivHolderSize),e.drawCanvas(),Fotor.progressBar.hide()}),500)}},{key:"createtiltShiftControlDiv",value:function(){null==this.controlDiv&&(this.controlDiv=e("<div class='tiltShiftDiv'><div id='tiltShiftMouseDiv' class='moveBar'></div><div id='target-bar' class='moveBar cursor-resize-move white circleMoveDiv'><div class='round'></div><span class='v' ></span><span class='h' ></span></div><div id='tiltShiftRect' class='rect-area cursor-resize-move'><div class='react-bar'><div class='round'></div><div class='line line-left'></div><div class='line line-right'></div><div id='tiltShift-LeftDot' class='dot dot-left'></div><div id='tiltShift-RightDot' class='dot dot-right'></div></div></div></div>").appendTo(e(".canvas-container")),this.mouseDiv=e("#tiltShiftMouseDiv"),this.circleMoveDiv=e("#target-bar"),this.linerMoveDiv=e("#tiltShiftRect"),this.leftDot=e("#tiltShift-LeftDot"),this.rightDot=e("#tiltShift-RightDot"),this.refreshDivHolderSize(),this.circleMoveDiv.on("mousedown",this.moveControlDown),this.linerMoveDiv.on("mousedown",this.moveControlDown),this.mouseDiv.on("mouseover",this.moveControlOver),this.circleMoveDiv.on("mouseover",this.moveControlOver),this.linerMoveDiv.on("mouseover",this.moveControlOver),this.mouseDiv.on("mouseout",this.moveControlOut),this.circleMoveDiv.on("mouseout",this.moveControlOut),this.linerMoveDiv.on("mouseout",this.moveControlOut),this.leftDot.on("mousedown",this.dotControlDown),this.rightDot.on("mousedown",this.dotControlDown),this.isCircleMode?(this.circleMoveDiv.show(),this.linerMoveDiv.hide()):(this.circleMoveDiv.hide(),this.linerMoveDiv.show()))}},{key:"saveEventState",value:function(t){this.event_.save_centerX=this.centerX*Fotor.mainCanvas.documentWidth,this.event_.save_centerY=this.centerY*Fotor.mainCanvas.documentHeight,this.event_.mouse_x=(t.clientX||t.pageX||t.originalEvent.touches[0].clientX)+e(window).scrollLeft(),this.event_.mouse_y=(t.clientY||t.pageY||t.originalEvent.touches[0].clientY)+e(window).scrollTop(),"tiltShift-LeftDot"==t.target.id?this.event_.isLeftDot=!0:this.event_.isLeftDot=!1,this.event_.evnt=t}},{key:"moveControlOver",value:function(e){this.OverOrOut&&clearTimeout(this.OverOrOut),this.OverOrOut=setTimeout(this.checkFadeIn,300)}},{key:"moveControlOut",value:function(e){this.OverOrOut&&clearTimeout(this.OverOrOut),this.OverOrOut=setTimeout(this.checkFadeOut,300)}},{key:"checkFadeIn",value:function(){this.circleMoveDiv&&this.linerMoveDiv&&(this.isCircleMode?this.circleMoveDiv.fadeIn("fast"):this.linerMoveDiv.fadeIn("fast"))}},{key:"checkFadeOut",value:function(){this.circleMoveDiv&&this.linerMoveDiv&&(this.isCircleMode?this.circleMoveDiv.fadeOut("fast"):this.linerMoveDiv.fadeOut("fast"))}},{key:"dotControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.saveEventState(t),e(document).on("mousemove",this.rotateing),e(document).on("mouseup",this.endChangeing)}},{key:"rotateing",value:function(e){var t={};e.preventDefault(),e.stopPropagation(),t.x=Fotor.mainCanvas.canvas.getPointer(e).x,t.y=Fotor.mainCanvas.canvas.getPointer(e).y;var a=this.getTiltShiftAngle(this.event_.save_centerX,this.event_.save_centerY,t.x,t.y);this.event_.isLeftDot&&(a<180?a+=180:a-=180),this.shiftAngle=a+90,this.shiftAngle>360&&(this.shiftAngle=this.shiftAngle-360),this.refreshDivData(),this.timeFlag||(this.timeFlag=!0,this.maxPixel<1e6?setTimeout(this.drawCanvas,100):this.maxPixel>=1e6&&this.maxPixel<2e6?setTimeout(this.drawCanvas,200):this.maxPixel>=2e6&&setTimeout(this.drawCanvas,300))}},{key:"getTiltShiftAngle",value:function(e,t,a,n){var o=a-e,i=n-t,s=o/Math.sqrt(Math.pow(o,2)+Math.pow(i,2)),r=Math.acos(s),l=180/(Math.PI/r);return i<0?l=-l:0==i&&o<0&&(l=180),l||(l=0),(l+=360)>360&&(l-=360),l}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.saveEventState(t),e(document).on("mousemove",this.moving),e(document).on("mouseup",this.endChangeing)}},{key:"moving",value:function(t){var a={};t.preventDefault(),t.stopPropagation(),a.x=(t.clientX||t.pageX)+e(window).scrollLeft(),a.y=(t.clientY||t.pageY)+e(window).scrollTop();var n=a.x-this.event_.mouse_x,o=a.y-this.event_.mouse_y;this.centerX=(this.event_.save_centerX+n/Fotor.mainCanvas.canvas.viewportTransform[0])/Fotor.mainCanvas.documentWidth,this.centerY=(this.event_.save_centerY+o/Fotor.mainCanvas.canvas.viewportTransform[3])/Fotor.mainCanvas.documentHeight,this.refreshDivData(),this.timeFlag||(this.timeFlag=!0,this.maxPixel<1e6?setTimeout(this.drawCanvas,100):this.maxPixel>=1e6&&this.maxPixel<2e6?setTimeout(this.drawCanvas,200):this.maxPixel>=2e6&&setTimeout(this.drawCanvas,300))}},{key:"endChangeing",value:function(t){t.preventDefault(),e(document).off("mousemove",this.rotateing),e(document).off("mousemove",this.moving),e(document).off("mouseup",this.endChangeing)}},{key:"removetiltShiftControlDiv",value:function(){e(document).off("mousemove",this.rotateing),e(document).off("mousemove",this.rotateing),e(document).off("mousemove",this.moving),e(document).off("mouseup",this.endChangeing),this.circleMoveDiv.off("mousedown",this.moveControlDown),this.linerMoveDiv.off("mousedown",this.moveControlDown),this.mouseDiv.off("mouseover",this.moveControlOver),this.circleMoveDiv.off("mouseover",this.moveControlOver),this.linerMoveDiv.off("mouseover",this.moveControlOver),this.mouseDiv.off("mouseout",this.moveControlOut),this.circleMoveDiv.off("mouseout",this.moveControlOut),this.linerMoveDiv.off("mouseout",this.moveControlOut),this.leftDot.off("mousedown",this.dotControlDown),this.rightDot.off("mousedown",this.dotControlDown),e(".canvas-container")[0].removeChild(this.controlDiv[0]),this.controlDiv=null,this.mouseDiv=null,this.circleMoveDiv=null,this.linerMoveDiv=null,this.leftDot=null,this.rightDot=null}},{key:"refreshDivHolderSize",value:function(){if(null!=this.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=Fotor.mainCanvas.canvas.viewportTransform[4],t=Fotor.mainCanvas.canvas.viewportTransform[5],a=Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.canvas.documentWidth,n=Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.canvas.documentHeight;this.mouseDiv.css({left:e+"px",top:t+"px",width:a+"px",height:n+"px"}),this.refreshDivData()}}},{key:"refreshDivData",value:function(){if(null!=this.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=Fotor.mainCanvas.canvas.documentHeight*(.01*this.shiftRadius)*.5,t=Fotor.mainCanvas.canvas.viewportTransform[0]*e*2,a=Fotor.mainCanvas.canvas.viewportTransform[3]*e*2;if(this.isCircleMode){var n=this.centerX*Fotor.mainCanvas.documentWidth-e,o=this.centerY*Fotor.mainCanvas.documentHeight-e;n=Fotor.mainCanvas.canvas.viewportTransform[0]*n+Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[3]*o+Fotor.mainCanvas.canvas.viewportTransform[5],this.circleMoveDiv.css({left:n+"px",top:o+"px",width:t+"px",height:a+"px"})}else{var i=this.centerX*Fotor.mainCanvas.documentWidth,s=this.centerY*Fotor.mainCanvas.documentHeight;i=Fotor.mainCanvas.canvas.viewportTransform[0]*i+Fotor.mainCanvas.canvas.viewportTransform[4],s=Fotor.mainCanvas.canvas.viewportTransform[3]*s+Fotor.mainCanvas.canvas.viewportTransform[5];var l=this.shiftAngle-90;this.linerMoveDiv.css({transform:"rotate("+l+"deg)","-o-transform":"rotate("+l+"deg)","-webkit-transform":"rotate("+l+"deg)","-moz-transform":"rotate("+l+"deg)"}),this.linerMoveDiv.css({left:i+"px",top:s+"px",height:a+"px","margin-top":.5*-a+"px"})}Fotor.mainCanvas.trigger(r.default.STATICLAYER_CHANGE)}}},{key:"handleBrushSizeChange",value:function(e){this.shiftRadius=Math.round(this.refs.brushSize.val()),this.checkFadeIn(),this.refreshDivData(),this.drawCanvas()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e)}},{key:"handleRecoveredChange",value:function(e){this.commond_opacity=this.refs.recovered.val(),this.checkFadeIn(),this.refreshDivData(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){var e=this.commond_opacity<50?(50-this.commond_opacity)/50*6+4:(100-this.commond_opacity)/50*3+1,t=Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight),a=Fotor.mainCanvas.canvas.documentHeight/t*(.01*this.shiftRadius)*.5*.7;this.isCircleMode?Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.tiltShiftCircle(e,this.centerX,this.centerY,a),!0):Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.tiltShiftStrip(e,this.shiftAngle,this.centerX,this.centerY,a),!0),this.timeFlag=!1,Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"circularHandler",value:function(){this.isCircleMode||(this.isCircleMode=!0,this.circleMoveDiv.show(),this.linerMoveDiv.hide(),this.refreshDivData(),this.drawCanvas(),this.forceUpdate())}},{key:"linearHandler",value:function(){this.isCircleMode&&(this.isCircleMode=!1,this.circleMoveDiv.hide(),this.linerMoveDiv.show(),this.refreshDivData(),this.drawCanvas(),this.forceUpdate())}},{key:"applyHandler",value:function(){i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix",id:"tiltShiftTool"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_tiltshift,helpTip:Fotor.globalConfig.lang.editor_workspace_effect_tiltshift_tip,helpTipGif:a(963),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner"},n.createElement("ul",{className:"ul-no-style tilt-shift-btns clearfix"},n.createElement("li",{onClick:this.circularHandler.bind(this),className:this.isCircleMode?"active":""},n.createElement("i",{className:"icon-34 circular"}),n.createElement("span",{className:"description"},Fotor.globalConfig.lang.editor_workspace_effect_tiltshift_circular)),n.createElement("li",{onClick:this.linearHandler.bind(this),className:this.isCircleMode?"":"active"},n.createElement("i",{className:"icon-34 linear"}),n.createElement("span",{className:"description"},Fotor.globalConfig.lang.editor_workspace_effect_tiltshift_linear))),n.createElement("div",{className:"clearfix paddingT15"},n.createElement("div",null,n.createElement("div",{className:""},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size),n.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"110",min:"2",default:"60",className:"input-range-grey",bindEle:this.refs.BrushSizeSpan,onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Intensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"90",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default);t.default=l}).call(this,a(2),a(0))},960:function(e,t,a){var n=a(961);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},961:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,"/*-----------------------------------------\n * Base Settings\n * ----------------------------------------*/\n/*-----------------------------------------\n * Layout\n * ----------------------------------------*/\n/*-----------------------------------------\n * Mixin\n * ----------------------------------------*/\n.rect-area {\n  position: absolute;\n  z-index: 50;\n  width: 10000px;\n  height: 200px;\n  margin: -100px 0 0 -5000px;\n  border-top: 1px solid #fff;\n  border-bottom: 1px solid #fff; }\n  .rect-area .react-bar {\n    position: absolute;\n    left: 50%;\n    top: 50%; }\n    .rect-area .react-bar .round {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 30px;\n      height: 30px;\n      margin: -15px 0 0 -15px;\n      background: url("+n(a(962))+") center no-repeat;\n      background-color: rgba(255, 255, 255, 0.8);\n      border-radius: 1000px;\n      -moz-border-radius: 1000px;\n      -webkit-border-radius: 1000px; }\n    .rect-area .react-bar .line {\n      position: absolute;\n      width: 45px;\n      height: 1px;\n      margin: -1px 0 0 -60px;\n      top: 0;\n      left: 0;\n      background: rgba(255, 255, 255, 0.5); }\n      .rect-area .react-bar .line.line-right {\n        margin: -1px 0 0 15px; }\n    .rect-area .react-bar .dot {\n      position: absolute;\n      width: 13px;\n      height: 13px;\n      top: 0;\n      left: 0;\n      margin: -7px 0 0 -73px;\n      background: rgba(255, 255, 255, 0.8);\n      cursor: pointer;\n      border-radius: 10px;\n      -moz-border-radius: 10px;\n      -webkit-border-radius: 10px; }\n      .rect-area .react-bar .dot.dot-right {\n        margin: -7px 0 0 60px; }\n      .rect-area .react-bar .dot:hover {\n        background: #fff; }\n      .rect-area .react-bar .dot:active {\n        background: #ac975e; }\n",""])},962:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTE0Nzk4NEZCNjJGMTFFNjgxNDlFRUMxODRFQTU2MTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTE0Nzk4NTBCNjJGMTFFNjgxNDlFRUMxODRFQTU2MTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3OTg0REI2MkYxMUU2ODE0OUVFQzE4NEVBNTYxMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MTQ3OTg0RUI2MkYxMUU2ODE0OUVFQzE4NEVBNTYxMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu8cHl4AAAIFSURBVHja7JZNSFRRGIbnlkUOhEwurIVki3Axi9oFQs5CHNGEzI2ILV2IYOQi0WWrxJUgTS1mY81ykBaWMihCSCUKIkGrFuUI4rJorCbG6TnwDlwuMyP3cGs2c+DhZe79vu89Z87PPU6xWAzVop0J1ajVjf9bazgtIB7vn0aeeJ9nMsuO3l9DcvCNZ7+DHPE8TEKhwvsdSMAgnbgUpLEZxXs4rFLjLizCOua3wQnC+B6swRX4CD8972/AI3gHN2FFOfbG9PwWkoJGWIAOmHGbM6/7yFO4o2m5YHKU69+YxPNIUoXMHM5g8gN9JnP3QvsDOT1PKCepGr5H3ANR2IIpCv+SSV7moTIr3cRMKSeqGr6Nh8AsknTJ1GWQr5Sk2LRyh2yMY9Ili/NhyVPDl/FladbCOOup4cs4Jw1bGJ+VFmyMD6RtFsbXpV9tjDelwxbG96UbNsYv4cScQuzH5ir7Pez5bc7rAeW+sDH+AKvQbjpBwaYKcbMlc8WklLOq/Vy2OdXuXBRqRd7CVXgDo/CdvXrsijF7+jnMSfs0tzEdp1YfCbPABuGLzuItjbDLFXMOxuAT9MJn5WStPxL02Pwde9AJryACE/DaE2rML8KR6SB5u8q1/yxS4ATMyEegW7eRnQrhLfCQfyQS2J1L87oNj6sc/qbeODw4rZ5Tv9DXjf9V+yvAAKyRoqXg58D3AAAAAElFTkSuQmCC"},963:function(e,t,a){e.exports=a.p+"images/tilt-shift4c75a8f658b5cbbe9ab5e6008935e931.gif"},964:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.strength_value=20,t.thickness_value=25,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"handleStrengthChange",value:function(e){this.hadchanged=!0,this.strength_value=this.refs.strength.val(),e&&this.updataProcess()}},{key:"handleThicknessChange",value:function(e){this.hadchanged=!0,this.thickness_value=this.refs.thickness.val(),e&&this.updataProcess()}},{key:"handleStrengthChanged",value:function(){this.handleStrengthChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleThicknessChanged",value:function(){this.handleThicknessChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=.02*this.strength_value,t=.2+.008*this.thickness_value,a=Fotor.EngineAction.particles(e,t);Fotor.mainCanvas.fotorEngine.process_rule(a)}},{key:"getDefaultHistoryData",value:function(){var e={strength:0,thickness:0};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.strength=parseInt(this.refs.strength.val()),e.thickness=parseInt(this.refs.thickness.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.strength.setDefault(e.strength),this.refs.thickness.setDefault(e.thickness),this.strength_value=this.refs.strength.val(),this.thickness_value=this.refs.thickness.val()}},{key:"applyHandler",value:function(){this.hadchanged?(this.hadchanged=!1,Fotor.mainCanvas.applyEditorPic(this.applyfold)):(Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler())}},{key:"cancelHandler",value:function(){this.hadchanged=!1,this.tryFold()}},{key:"afterfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.refs.strength.setDefault(20),this.refs.thickness.setDefault(25),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_filmGrain||"DARK CORNERS",onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"effect-group clearfix"},e.createElement("div",{className:"effect-item active active-no-img"},e.createElement("div",{className:"effect-item-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_filmGrain_intensity||"Strength",e.createElement("div",{className:"pull-right"},e.createElement("span",{ref:"strengthSpan"},"0"),"%")),e.createElement(Fotor.ui.InputRange,{ref:"strength",type:"range",max:"100",min:"0",default:"0",bindEle:this.refs.strengthSpan,className:"input-range-grey",onChange:this.handleStrengthChange.bind(this),onChanged:this.handleStrengthChanged.bind(this)}),e.createElement("div",{className:"paddingT10 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_filmGrain_roughness||"Thickness",e.createElement("div",{className:"pull-right"},e.createElement("span",{ref:"thicknessSpan"},"0"),"%")),e.createElement(Fotor.ui.InputRange,{ref:"thickness",type:"range",max:"100",min:"0",default:"0",bindEle:this.refs.thicknessSpan,className:"input-range-grey",onChange:this.handleThicknessChange.bind(this),onChanged:this.handleThicknessChanged.bind(this)}),e.createElement("div",{className:"clearfix effect-item-btns paddingT10"},e.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),e.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))))}}]),a}(a(72).default);t.default=i}).call(this,a(0))},965:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(806)),r=a(153),l=a(15),c=function(t){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.state.groupData=null,e.state.deEffect=!1,e.state.thumbImg=null,e.state.isSmallPic=!1,e.hadfoldItem=!0,e.state.data=[],e.getData=e.getData.bind(e),e.refreshFavorite=e.refreshFavorite.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"componentWillUnmount",value:function(){Fotor.loginStateManager.off(l.default.LOGIN,this.refreshFavorite),Fotor.favoriteManager.off(r.default.UPDATE,this.getData)}},{key:"componentDidMount",value:function(){Fotor.loginStateManager.on(l.default.LOGIN,this.refreshFavorite),Fotor.favoriteManager.on(r.default.UPDATE,this.getData),this.getData()}},{key:"getData",value:function(){this.state.data=Fotor.favoriteManager.get("effect"),this.mounted&&this.forceUpdate()}},{key:"refreshFavorite",value:function(){Fotor.favoriteManager.fetch()}},{key:"applyHandler",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this);for(var e=this.state.data.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t].state.beSelected&&this.refs["webglEffectItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)if(this.refs["webglEffectItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t]&&this.refs["webglEffectItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.mounted&&this.setState({deEffect:!1})}},{key:"afterUnfold",value:function(){var e=this;setTimeout((function(){e.creatImgThumb((function(){for(var t=e.state.data.length,a=0;a<t;a++)e.refs["webglEffectItem_"+a].updataThumbImage();e.setState({deEffect:!0}),Fotor.progressBar.hide()}))}),100),e.setState({deEffect:!0})}},{key:"creatImgThumb",value:function(e){var t=this;Fotor.mainCanvas.requestDocumentToolThumb().then((function(a){Fotor.mainCanvas.doEffectCanvas||(Fotor.mainCanvas.doEffectCanvas=document.createElement("canvas")),Fotor.mainCanvas.doEffectCanvas.getContext("2d").clearRect(0,0,Fotor.mainCanvas.doEffectCanvas.width,Fotor.mainCanvas.doEffectCanvas.height),Fotor.mainCanvas.doEffectCanvas.setAttribute("width",a.width),Fotor.mainCanvas.doEffectCanvas.setAttribute("height",a.height),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,null,!0),Fotor.mainCanvas.effectThumb=a.toDataURL("image/jpeg",.7),t.state.thumbImg=Fotor.mainCanvas.effectThumb,e&&e()}))}},{key:"loadTempHistoryData",value:function(e,t){var a=this;a.creatImgThumb((function(){for(var e=a.state.data.length,t=0;t<e;t++)a.refs["webglEffectItem_"+t]&&(a.refs["webglEffectItem_"+t].cancelHandler(),a.refs["webglEffectItem_"+t].updataThumbImage());a.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}))}},{key:"doItemUnFold",value:function(e){for(var t=this.state.data.length,a=0;a<t;a++)null==e||null==e||"toBig"==e||"updataThumb"==e?null==e||null==e||"toBig"==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):null!=e&&null!=e&&"updataThumb"!=e||this.refs["webglEffectItem_"+a].updataThumbImage():this.refs["webglEffectItem_"+a]!=e&&this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a].setState({beSelected:!1}):this.refs["webglEffectItem_"+a]!=e||this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a]==e&&this.refs["webglEffectItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({deEffect:!0})}},{key:"render",value:function(){var t=this,a=!1;return this.state.data.length>0&&(a=!0),e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.className,autoActive:!1,isEditor:!0,childId:"border-favorite-list",text:Fotor.globalConfig.lang.editor_workspace_favorite_effect,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},a&&t.state.data.map((function(a,n){return e.createElement(s,{ref:"webglEffectItem_"+n,inner:"FavorFolder",unFoldFun:t.doItemUnFold.bind(t),data:a,doEffect:t.state.deEffect,key:a.name,vip:a.isVip,thumbImg:t.state.thumbImg,scroller:t.props.scroller})})),!a&&e.createElement("div",{className:"editor-favor-empty"},Fotor.globalConfig.lang.editor_workspace_favorite_notice)))}},{key:"handleToolFolderClick",value:function(){if(Fotor.loginStateManager.isLogin())o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"handleToolFolderClick",this).call(this);else{Fotor.loginStateManager.addAction(this.handleToolFolderClick.bind(this));var e=Fotor.vipResManager.getLoginContent("favor");FotorUser.show(e,!1)}}}]),a}(i.default);t.default=c}).call(this,a(0))},966:function(e,t,a){var n=a(967);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},967:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,".goartLink {\n  position: relative;\n  z-index: 11;\n  display: block;\n  width: 300px;\n  height: 224px;\n  margin: 5px 0 8px 4px;\n  background: url("+n(a(807))+") no-repeat;\n  background-size: cover;\n  -webkit-background-size: cover;\n  -moz-background-size: cover; }\n  .goartLink.en_US {\n    background-image: url("+n(a(807))+"); }\n  .goartLink.zh_CN {\n    background-image: url("+n(a(968))+"); }\n  .goartLink.zh_TW {\n    background-image: url("+n(a(969))+"); }\n  .goartLink.de_DE {\n    background-image: url("+n(a(970))+"); }\n  .goartLink.pt_BR {\n    background-image: url("+n(a(971))+"); }\n  .goartLink.es_ES {\n    background-image: url("+n(a(972))+"); }\n  .goartLink.fr_FR {\n    background-image: url("+n(a(973))+"); }\n  .goartLink.ru_RU {\n    background-image: url("+n(a(974))+"); }\n  .goartLink.ja_JP {\n    background-image: url("+n(a(975))+"); }\n\n@media (max-width: 1279px) {\n  body.no-ads .goartLink {\n    width: 226px;\n    height: 169px; } }\n\n@media (max-width: 1439px) {\n  body.ads .goartLink {\n    width: 226px;\n    height: 169px; } }\n",""])},968:function(e,t,a){e.exports=a.p+"images/zh_CN647a91aafa54f83a5a19e796b915573f.png"},969:function(e,t,a){e.exports=a.p+"images/zh_TW427f1fc60f8423a2ec5af3b1679bca6f.png"},970:function(e,t,a){e.exports=a.p+"images/de_DEedab2d797db57405e7a2db11782f4b16.png"},971:function(e,t,a){e.exports=a.p+"images/pt_BR6dc8b36eb34c131c72e4126f3a5c89e5.png"},972:function(e,t,a){e.exports=a.p+"images/es_ES6d15e26f2b1a4d520fab196356bc4405.png"},973:function(e,t,a){e.exports=a.p+"images/fr_FRe33a255279d77dc4193a98094a432ebd.png"},974:function(e,t,a){e.exports=a.p+"images/ru_RUb25f35378002a3ca279e2fe8ef7762a1.png"},975:function(e,t,a){e.exports=a.p+"images/ja_JPdd96ab5be3477d9188f1b3e6ecf5bcfb.png"},976:function(e,t,a){(function(t,n){var o=v(a(977)),i=v(a(991)),s=v(a(992)),r=v(a(993)),l=v(a(994)),c=v(a(153)),h=v(a(7)),d=v(a(8)),u=v(a(16));function v(e){return e&&e.__esModule?e:{default:e}}var p=a(21).default,f=a(6)({displayName:"BorderList",mixins:[Fotor.mixin],getInitialState:function(){return{canvasImg:null}},componentDidMount:function(){this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.favoriteManager.on(c.default.UPDATE,this.updateData),Fotor.mainCanvas?this.init():Fotor.app.on(h.default.APP_INIT,this.init)},init:function(){Fotor.mainCanvas.on(d.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.on(d.default.EXIT_EDITOR_MODE,this.updateData)},updateData:function(){this.forceUpdate()},componentWillUnmount:function(){Fotor.favoriteManager.off(c.default.UPDATE,this.updateData),Fotor.app.off(h.default.APP_INIT,this.init),Fotor.mainCanvas.off(d.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.off(d.default.EXIT_EDITOR_MODE,this.updateData)},handleScroll:function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),Fotor.app.trigger(u.default.HIDE_PALETTE)},render:function(){return n.createElement("div",{id:"toolbar"},n.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),n.createElement("div",{className:"toolbar-loading"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),n.createElement("div",{className:"toolbar"},n.createElement("div",{className:"toolbar-list"},n.createElement(p,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},n.createElement(l.default,{className:"marginT0",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Floral",borderGroupId:"Floral",isNew:!0,scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Christmas",borderGroupId:"Christmas",isNew:!0,scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Vintage",borderGroupId:"Vintage",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"OldSchool",borderGroupId:"OldSchool",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Simple",borderGroupId:"Simple",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"RetroCutie",borderGroupId:"RetroCutie",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Borders",borderGroupId:"Borders",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Olden",borderGroupId:"Olden",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Organic",borderGroupId:"Organic",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Deco",borderGroupId:"Deco",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Lace",borderGroupId:"Lace",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"StampFrame",borderGroupId:"StampFrame",scroller:this.state.scrollArea}),n.createElement(i.default,{toolName:"BorderShadow",scroller:this.state.scrollArea}),n.createElement(s.default,{toolName:"GalleryFarme",scroller:this.state.scrollArea}),n.createElement(r.default,{toolName:"Polaroid",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"FileEdge",borderGroupId:"FileEdge",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Classy",borderGroupId:"Classy",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Cute",borderGroupId:"Cute",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Summer",borderGroupId:"Summer",scroller:this.state.scrollArea}),n.createElement(o.default,{toolName:"Funky",borderGroupId:"Funky",scroller:this.state.scrollArea}),n.createElement("div",{style:{height:"50px"}},"")))))}});e.exports=f}).call(this,a(2),a(0))},977:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(808)),r=a(978),l=a(979),c=function(t){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.borderGroupId=null,t.state.groupData=null,t.state.doBorder=!1,t.state.isSmallPic=!1,t.state.blendData=null,t.hadfoldItem=!0,t.state.orgWidth=0,t.state.orgHeight=0,t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),n(i,[{key:"loadData",value:function(e){var t=a(168)("./border_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"loadBlendData",value:function(){var e=a(990);return"string"==typeof e?""!==e&&(e=JSON.parse(e)):e=e,e}},{key:"applyHandler",value:function(){o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["borderItem_"+t].state.beSelected&&this.refs["borderItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["borderItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["borderItem_"+t]&&this.refs["borderItem_"+t].state.beSelected&&this.refs["borderItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"afterfold",this).call(this),this.mounted&&this.setState({doBorder:!1})}},{key:"afterUnfold",value:function(){this.mounted&&this.setState({doBorder:!0}),this.setState({orgWidth:Fotor.mainCanvas.documentWidth,orgHeight:Fotor.mainCanvas.documentHeight}),Fotor.progressBar.hide()}},{key:"loadTempHistoryData",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)this.refs["borderItem_"+a]&&this.refs["borderItem_"+a].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}},{key:"componentWillReceiveProps",value:function(e){if(e&&null==this.state.groupData){this.borderGroupId=e.borderGroupId;var t=this.loadData(e.borderGroupId),a=this.loadBlendData();t.type,this.setState({groupData:t,blendData:a})}}},{key:"doItemUnFold",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)null==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["borderItem_"+a]!=e&&this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a].setState({beSelected:!1}):this.refs["borderItem_"+a]!=e||this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a]==e&&this.refs["borderItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic())}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",{style:{position:"relative"}},this.props.isNew?e.createElement("i",{className:"tipType_new",style:{left:"4px"}}):"",e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title]?Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase():"NO KEY "+this.state.groupData.title,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},t.state.groupData.items.map((function(a,n){return"general"==t.state.groupData.type?e.createElement(s,{ref:"borderItem_"+n,unFoldFun:t.doItemUnFold.bind(t),vip:t.state.groupData.isVip,data:a,doBorder:t.state.doBorder,borderGroupId:t.borderGroupId,key:n,scroller:t.props.scroller}):"color"==t.state.groupData.type?e.createElement(r,{ref:"borderItem_"+n,unFoldFun:t.doItemUnFold.bind(t),data:a,borderGroupId:t.borderGroupId,doBorder:t.state.doBorder,vip:t.state.groupData.isVip,key:n,scroller:t.props.scroller}):"custom"==t.state.groupData.type?e.createElement(l,{ref:"borderItem_"+n,unFoldFun:t.doItemUnFold.bind(t),data:a,blendData:t.state.blendData,doBorder:t.state.doBorder,orgWidth:t.state.orgWidth,orgHeight:t.state.orgHeight,vip:t.state.groupData.isVip,key:n,borderGroupId:t.borderGroupId,scroller:t.props.scroller}):void 0})))):e.createElement("div",null)}}]),i}(i.default);t.default=c}).call(this,a(0))},978:function(e,t,a){(function(t,n){var o,i=a(8),s=(o=i)&&o.__esModule?o:{default:o};var r=a(36),l=(a(50).default,a(6)({displayName:"ColorBorderItem",getInitialState:function(){return{thumbSrc:"",beSelected:!1,unFoldFun:null}},componentDidMount:function(){this.props&&this.props.doEffect&&(this.state.unFoldFun=this.props.unFoldFun)},handleClick:function(e,t){if(this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected)this.cancelHandler();else{Fotor.progressBar.show(!0);var a=Fotor.common.utils.Color.colorHexToRgb(this.props.data.defaultColor);this.refs.colorpicker.setColor(this.props.data.defaultColor),Fotor.mainCanvas.fotorEngine.process_commond(this.commondAddColor(a),this.comondCallBack,100,"border"),this.props.vip&&Fotor.vipResManager.setEditorWaterMark()}var n=!this.state.beSelected;this.setState({beSelected:n});var o=this;setTimeout((function(){n?o.scrollerFix():o.scrollerUpFix()}),300)},componentWillReceiveProps:function(e){var t=this;e&&""==this.state.thumbSrc&&(a.e(3).then(function(){t.state.thumbSrc=a(803)("./"+e.data.thumb+".png"),t.setState({})}.bind(null,a)).catch(a.oe),this.setState({unFoldFun:e.unFoldFun}))},colorChange:function(e,t){var a=Fotor.common.utils.Color.colorHexToRgb(e);Fotor.mainCanvas.fotorEngine.process_commond(this.commondAddColor(a),this.comondCallBack,100,"border")},commondAddColor:function(e){var t=this.props.data.commond;return t=t.replace(/%r/,e.r).replace(/%g/,e.g).replace(/%b/,e.b)},comondCallBack:function(){Fotor.progressBar.hide(),Fotor.mainCanvas.trigger(s.default.ENGINELAYER_CHANGE)},applyHandler:function(e){this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.state.unFoldFun),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.setState({beSelected:!1}),Fotor.vipResManager.resetWaterMark()},render:function(){return t.createElement("div",{ref:"item",className:"effect-item "+(this.state.beSelected?"active active-320":"")},this.props.data.isVip?t.createElement("span",{className:"vip"}):"",t.createElement("div",{className:"effect-item-img border clearfix"},t.createElement("div",{"data-display":this.props.doBorder},t.createElement("img",{ref:"itemImg",onClick:this.handleClick,src:this.state.thumbSrc}))),t.createElement("div",{className:"effect-item-inner clearfix"},t.createElement("div",{className:"editor-color-picker clearfix"},t.createElement(r,{ref:"colorpicker",hideFavor:!0,defaultColor:"#ffffff",noPicker:!0,showTitle:!0,isEditor:!0,hideAlphaBar:!0,target:Fotor.mainCanvas,onChange:this.colorChange})),t.createElement("div",{className:"clearfix effect-item-btns paddingT10"},t.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),t.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var t=n(this.refs.item).height(),a=n(this.refs.item).offset(),o=n(".toolbar-list").height(),i=n(".toolbar-list").offset(),s=-e.state.topPosition,r=t;if(a.top<80){var l=a.top-i.top-s;e.scrollYTo(l)}else if(a.top+r>o+i.top){l=a.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,t=e.computeSizes(),a=e.state.topPosition,o=t.realHeight-t.containerHeight;a>o?n(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}}));e.exports=l}).call(this,a(0),a(2))},979:function(e,t,a){(function(t,n){var o,i=a(8),s=(o=i)&&o.__esModule?o:{default:o};a(980);var r=a(36),l=(a(50).default,a(6)({displayName:"CustomBorderItem",getInitialState:function(){return{thumbSrc:"",beSelected:!1,unFoldFun:null,isOutMode:!0,isBlendMode:!1,savedBlendCommond:"",borderColor:null,borderStrength:.04,saved_documentWidth:0,saved_documentHeight:0,opacity:0}},componentWillUnmount:function(){t(document).off("keydown",this.handleKeydown)},componentDidMount:function(){this.props&&this.props.doEffect&&(this.state.unFoldFun=this.props.unFoldFun),t(document).on("keydown",this.handleKeydown)},handleKeydown:function(e){9==e.keyCode&&(e.stopPropagation(),e.preventDefault())},handleClick:function(e,t){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelHandler():(Fotor.progressBar.show(!0),this.state.isBlendMode=!1,this.state.isOutMode=!0,this.state.borderColor=Fotor.common.utils.Color.colorHexToRgb(this.props.data.defaultColor),this.state.borderStrength=.04,this.refs.colorpicker.setColor(this.props.data.defaultColor),this.drawCanvas(),this.props.vip&&Fotor.vipResManager.setEditorWaterMark());var a=!this.state.beSelected;this.setState({beSelected:a});var n=this;setTimeout((function(){a?n.scrollerFix():n.scrollerUpFix()}),300)},componentWillReceiveProps:function(e){var t=this;this.state.saved_documentWidth=e.orgWidth,this.state.saved_documentHeight=e.orgHeight,e&&""==this.state.thumbSrc&&(a.e(3).then(function(){t.state.thumbSrc=a(803)("./"+e.data.thumb+".png"),t.setState({})}.bind(null,a)).catch(a.oe),this.setState({unFoldFun:e.unFoldFun}))},colorChange:function(e,t){this.state.isBlendMode=!1,this.state.borderColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()},handleOuterSizeChange:function(e){this.state.borderStrength=e/10,this.drawCanvas()},handleOuterSizeChanged:function(e){this.handleOuterSizeChange(e)},drawCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.state.isOutMode?(Fotor.mainCanvas.editorExportFormat="png",this.state.isBlendMode?(""!=e&&(this.state.savedBlendCommond=e),Fotor.mainCanvas.fotorEngine.process_outside_border(this.state.savedBlendCommond,this.state.borderStrength,[this.state.borderColor.r,this.state.borderColor.g,this.state.borderColor.b],this.doOutBorderComplete)):Fotor.mainCanvas.fotorEngine.process_outside_border(this.commondAddColor(),this.state.borderStrength,[this.state.borderColor.r,this.state.borderColor.g,this.state.borderColor.b],this.doOutBorderComplete)):Fotor.mainCanvas.fotorEngine.process_commond(this.commondAddColor(),this.comondCallBack,1,"border")},doOutBorderComplete:function(e,t){for(var a=Math.round(e*Fotor.mainCanvas.editorCanvasScale),n=Math.round(t*Fotor.mainCanvas.editorCanvasScale),o=e/Fotor.mainCanvas.editorCanvasEle.attr("width"),i=t/Fotor.mainCanvas.editorCanvasEle.attr("height"),r=.5*(e-Fotor.mainCanvas.editorCanvasEle.attr("width")),l=.5*(t-Fotor.mainCanvas.editorCanvasEle.attr("height")),c=0,h=Fotor.mainCanvas.canvas._objects.length;c<h;c++){var d=Fotor.mainCanvas.canvas._objects[c];d.set({left:d.left+r,top:d.top+l,scaleX:d.scaleX*o*(d.flipX?-1:1),scaleY:d.scaleY*i*(d.flipY?-1:1)})}Fotor.mainCanvas.resetCanvasSize(a,n),Fotor.mainCanvas.editorZoomFit(),Fotor.progressBar.hide(),setTimeout((function(){Fotor.mainCanvas.trigger(s.default.CONTENT_CHANGE)}),100)},comondCallBack:function(){for(var e=Math.round(Fotor.mainCanvas.editorCanvasEle.attr("width")*Fotor.mainCanvas.editorCanvasScale),t=Math.round(Fotor.mainCanvas.editorCanvasEle.attr("height")*Fotor.mainCanvas.editorCanvasScale),a=this.state.saved_documentWidth/Fotor.mainCanvas.canvas.documentWidth,n=this.state.saved_documentHeight/Fotor.mainCanvas.canvas.documentHeight,o=.5*(this.state.saved_documentWidth-Fotor.mainCanvas.canvas.documentWidth),i=.5*(this.state.saved_documentHeight-Fotor.mainCanvas.canvas.documentHeight),r=0,l=Fotor.mainCanvas.canvas._objects.length;r<l;r++){var c=Fotor.mainCanvas.canvas._objects[r];c.set({left:c.left+o,top:c.top+i,scaleX:c.scaleX*a*(c.flipX?-1:1),scaleY:c.scaleY*n*(c.flipY?-1:1)})}Fotor.mainCanvas.resetCanvasSize(e,t),Fotor.mainCanvas.editorZoomFit(),Fotor.progressBar.hide(),setTimeout((function(){Fotor.mainCanvas.trigger(s.default.CONTENT_CHANGE)}),100)},commondAddColor:function(){return this.state.isOutMode?this.props.data.outCommond:this.props.data.innerCommond.replace(/%th/,this.state.borderStrength)},blendCommond:function(e,t,a){var n=this.props.data.blendCommond;return n=(n=(n=n.replace(/%bc/,e)).replace(/%bw/,t)).replace(/%bh/,a)},outerHandler:function(){if(!this.state.isOutMode){var e=this;this.state.isBlendMode=!1,this.state.isOutMode=!0,this.drawCanvas(),this.forceUpdate(),setTimeout((function(){e.scrollerFix()}),100)}},innerHandler:function(){if(this.state.isOutMode){var e=this;this.state.isBlendMode=!1,this.state.isOutMode=!1,this.drawCanvas(),this.forceUpdate(),setTimeout((function(){e.scrollerFix()}),100)}},applyHandler:function(e){this.state.saved_documentWidth=Fotor.mainCanvas.documentWidth,this.state.saved_documentHeight=Fotor.mainCanvas.documentHeight,this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.state.unFoldFun),this.setState({isOutMode:!0,isBlendMode:!1,beSelected:!1})},cancelHandler:function(e){if(e&&this.state.unFoldFun(this),this.setState({isOutMode:!0,isBlendMode:!1,beSelected:!1}),0!=this.state.saved_documentWidth&&0!=this.state.saved_documentHeight){for(var t=this.state.saved_documentWidth/Fotor.mainCanvas.canvas.documentWidth,a=this.state.saved_documentHeight/Fotor.mainCanvas.canvas.documentHeight,n=.5*(this.state.saved_documentWidth-Fotor.mainCanvas.canvas.documentWidth),o=.5*(this.state.saved_documentHeight-Fotor.mainCanvas.canvas.documentHeight),i=0,r=Fotor.mainCanvas.canvas._objects.length;i<r;i++){var l=Fotor.mainCanvas.canvas._objects[i];l.set({left:l.left+n,top:l.top+o,scaleX:l.scaleX*t*(l.flipX?-1:1),scaleY:l.scaleY*a*(l.flipY?-1:1)})}Fotor.mainCanvas.resetCanvasSize(this.state.saved_documentWidth,this.state.saved_documentHeight),Fotor.mainCanvas.editorZoomFit(),this.state.saved_documentWidth=0,this.state.saved_documentHeight=0,Fotor.mainCanvas.trigger(s.default.ENGINELAYER_CHANGE)}Fotor.vipResManager.resetWaterMark()},render:function(){return n.createElement("div",{ref:"item",className:"effect-item "+(this.state.beSelected?"active active-435 ":" ")+(this.state.isOutMode?"":" min-mode")},this.props.data.isVip?n.createElement("span",{className:"vip"}):"",n.createElement("div",{"data-display":this.props.doEffect},n.createElement("div",{className:"effect-item-img border clearfix"},n.createElement("img",{ref:"itemImg",onClick:this.handleClick,src:this.state.thumbSrc})),n.createElement("div",{className:"effect-item-inner clearfix"},n.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix"},n.createElement("li",{onClick:this.outerHandler,className:this.state.isOutMode?"active":""},n.createElement("i",{className:"icon-34 outer"})),n.createElement("li",{onClick:this.innerHandler,className:this.state.isOutMode?"":"active"},n.createElement("i",{className:"icon-34 inner"}))),n.createElement("div",{className:"editor-color-picker marginT15",style:{display:this.state.isOutMode?"block":"none"}},n.createElement(r,{ref:"colorpicker",hideFavor:!0,showTitle:!0,defaultColor:"#ffffff",isEditor:!0,hideAlphaBar:!0,target:Fotor.mainCanvas,onChange:this.colorChange})),n.createElement("ul",{className:"border-material marginT15 clearfix",style:{display:this.state.isOutMode?"block":"none"}},n.createElement("li",{className:"m1",onClick:this.handleMaterial}),n.createElement("li",{className:"m2",onClick:this.handleMaterial}),n.createElement("li",{className:"m3",onClick:this.handleMaterial}),n.createElement("li",{className:"m4",onClick:this.handleMaterial}),n.createElement("li",{className:"m5",onClick:this.handleMaterial}),n.createElement("li",{className:"m6",onClick:this.handleMaterial}),n.createElement("li",{className:"m7",onClick:this.handleMaterial}),n.createElement("li",{className:"m8",onClick:this.handleMaterial})),n.createElement("div",{className:"clearfix editor-folder-btns "+(this.state.isOutMode?"paddingT15":"paddingT20")},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},handleMaterial:function(e){var a=t(e.target),n=t(a).attr("class");this.state.isBlendMode=!0;var o="";"m1"==n?(o=this.blendCommond(this.props.blendData.items[0].blendPic,this.props.blendData.items[0].blendWidth,this.props.blendData.items[0].blendHeight),this.drawCanvas(o)):"m2"==n?(o=this.blendCommond(this.props.blendData.items[1].blendPic,this.props.blendData.items[1].blendWidth,this.props.blendData.items[1].blendHeight),this.drawCanvas(o)):"m3"==n?(o=this.blendCommond(this.props.blendData.items[2].blendPic,this.props.blendData.items[2].blendWidth,this.props.blendData.items[2].blendHeight),this.drawCanvas(o)):"m4"==n?(o=this.blendCommond(this.props.blendData.items[3].blendPic,this.props.blendData.items[3].blendWidth,this.props.blendData.items[3].blendHeight),this.drawCanvas(o)):"m5"==n?(o=this.blendCommond(this.props.blendData.items[4].blendPic,this.props.blendData.items[4].blendWidth,this.props.blendData.items[4].blendHeight),this.drawCanvas(o)):"m6"==n?(o=this.blendCommond(this.props.blendData.items[5].blendPic,this.props.blendData.items[5].blendWidth,this.props.blendData.items[5].blendHeight),this.drawCanvas(o)):"m7"==n?(o=this.blendCommond(this.props.blendData.items[6].blendPic,this.props.blendData.items[6].blendWidth,this.props.blendData.items[6].blendHeight),this.drawCanvas(o)):"m8"==n&&(o=this.blendCommond(this.props.blendData.items[7].blendPic,this.props.blendData.items[7].blendWidth,this.props.blendData.items[7].blendHeight),this.drawCanvas(o)),console.log(n)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),n=t(this.refs.item).offset(),o=t(".toolbar-list").height(),i=t(".toolbar-list").offset(),s=-e.state.topPosition,r=a;if(n.top<80){var l=n.top-i.top-s;e.scrollYTo(l)}else if(n.top+r>o+i.top){l=n.top-i.top-s;r<o&&(l-=o-r),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),n=e.state.topPosition,o=a.realHeight-a.containerHeight;n>o?t(e.content).stop().animate({"margin-top":-o},300,(function(){e.handleWindowResize()})):e.handleWindowResize()}}));e.exports=l}).call(this,a(2),a(0))},980:function(e,t,a){var n=a(981);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0};a(4)(n,o);n.locals&&(e.exports=n.locals)},981:function(e,t,a){var n=a(5);(e.exports=a(3)(!1)).push([e.i,".border-material {\n  margin: 0;\n  padding: 0;\n  list-style: none; }\n  .border-material li {\n    margin: 10px 0 0;\n    padding: 0;\n    list-style: none;\n    float: left;\n    display: block;\n    width: 12.5%;\n    height: 75px;\n    cursor: pointer;\n    background-size: cover;\n    -webkit-background-size: cover;\n    -moz-background-size: cover; }\n    .border-material li.m1 {\n      background: url("+n(a(982))+") center no-repeat; }\n    .border-material li.m2 {\n      background: url("+n(a(983))+") center no-repeat; }\n    .border-material li.m3 {\n      background: url("+n(a(984))+") center no-repeat; }\n    .border-material li.m4 {\n      background: url("+n(a(985))+") center no-repeat; }\n    .border-material li.m5 {\n      background: url("+n(a(986))+") center no-repeat; }\n    .border-material li.m6 {\n      background: url("+n(a(987))+") center no-repeat; }\n    .border-material li.m7 {\n      background: url("+n(a(988))+") center no-repeat; }\n    .border-material li.m8 {\n      background: url("+n(a(989))+") center no-repeat; }\n    .border-material li:hover {\n      opacity: .7; }\n\n@media (max-width: 1279px) {\n  body.no-ads .border-material li {\n    height: 52px; } }\n\n@media (max-width: 1439px) {\n  body.ads .border-material li {\n    height: 52px; } }\n",""])},982:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMyQ0ZCQjg2RTExOTExRTY4OUQ5QTQ3MkNDOERGMkMzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMyQ0ZCQjg1RTExOTExRTY4OUQ5QTQ3MkNDOERGMkMzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAiAAAAgMBAQEAAAAAAAAAAAAABQYAAwQCAQgBAAMBAQAAAAAAAAAAAAAAAAABAgMEEAAABQEFBQUGBgMAAAAAAAABAgMEBREAITESBkFRYXEToSIyQhTwgbFSIxWRwdEzNBbxYlMRAAICAgMAAQQDAAAAAAAAAAABEQIhAzFBEjJhcYGRobEi/9oADAMBAAIRAxEAPwD6QidQtHsg9jVCdB80VUL0jBTqJgYcqha41CgjZtGdbptrsMZS7gsjQmUu4LAA+Tmo+OWaIKiAuHixEUEi0zDnOBRMO4pa2aUkWulH1MWptNBJgR4zP6aXa95s5LdWnkPw+FmrQTs1+srk80zqYZAVGD9P0sy17rhua7NTzk4e2FiygNeycPkv1HqNtDNiiJRXerDlaNC3mOYbguC+lbJKR7NiqvqYtN6cclcmmpo3WmF7ylG8qBRwKQN9PbERbfSJ1638rcjLaTYUdeoRaRGz8VTNphM4AxOiFVFBr4BAPLfjs99BuhhvSWezPo4jV5Lu3socT6iTHKdsoFAQLSn0q0qHGl3vqJb+CdMNtv5DtaDpBWotQtIVp1VfqLqd1s2L41D8OG8bNKSNmxVQM09p52q7++z31JNS9BAfA3LsAA+b4c7NvpEa9bn1bk0am0yd8cklGn9NNNr0VwuA4B5D+3ZYqx7Nc5XyO9NalLKFO1ck9NLNu67amuGoXZi12fCw1Aa9nrD5OI7TR/vbmZlD+odCqcrFMbyoogYenT/bL+HOw3iArr/16YwWk1JYADS2m27ySZyaJvTv2iqZjKlu6iQGDOmem8tQD9LUmZ21ptPtAwk4+g5tVlMjmjHqx1GD7yp5zCbpHHcWvu5YOJWCPbraLcMbAEBCoYDaDclgBbe6kcOZ1CHhi9YySpDyTnEiaRTAJyAOGYQCnZjhSWJZjbZNoX5DUnGM5Jmo0eJ9RFQLw2gOwxR2CFknBpaqsoYrRsi90w9JDy5xVjFRpHSI4FD/AJqbqdnLC2pyjGtnRw+Oi+dnX0i9GAgBq4H+a+DwIk2gBg83+AvwSUZY73bfmobgoJjDMStWpb8Vlh8ShvmN+QbLS3JpSiqoQRsixR1RKfc3P9bjECO3RxAXaxwqm3KUca7Dhv2c7XVRk59lvT8rkzwbn+rPxhpNMpGzo2ZnJgH7g4ZVjDt54cr7DzkVH4fl/sdrQdIr6gn3rl6MDADnkD3OnQeBuTbf83w52tLtmF9jb815/oKwGn2UKy6CHfVP3nDg3jUPvHhuC0tyaa6KqgvlollKsjs3hM6R7wHzFMGBijsELCcDtVWUMXIaTkIKQSgJkwqt1RAkXIUEQOAjQqZ+OzhyoNqanKMaWdX5f4NWk8vrZvJ0K+uWz9HN1q9Q/wC9n4eHLdjtsrD1cv7jH3uPZaTYne49lgAXO0ysc/Qp61v/ACK1rnCnSyX9SuGzGt1miL9fc//Z"},983:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMwQURBMjFDRTExOTExRTZBN0FGODM1NjEzRTUzQUZGIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMwQURBMjFCRTExOTExRTZBN0FGODM1NjEzRTUzQUZGIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAeQAAAgMBAAAAAAAAAAAAAAAABgcABAUDAQEBAQAAAAAAAAAAAAAAAAAAAQIQAAECBAMGBAUDBQEAAAAAAAECAxEEBQYAIRIxQSITFAdRMkIVYXGBcjOhUkORsZKiIzQRAQEAAwEBAQAAAAAAAAAAAAABESECQTFR/9oADAMBAAIRAxEAPwB+WvftMq9dq9vPtdDWaXMvo6VwaedLocIbfbjCIUmClfOOw4LecbFmlPgMETSnwGAwbjvGiUGbpclNLCp+rzTMpJSqIcwl11LZcPghGqJP0wWc5ZHcXt4LiQzVaS97ddVOgunVBHDqKcw06RtSY5Hd8QSCXnrDn267iqrq3qHXGfbrupvBPyKxpDgT/MyN6TtIHzEQQcDrnHz4u9wu4NPtGnoi2Z2szh5dKpbUS6+4chkmJCATmfoM8Ekyx+3nb6pNVBy8bxc6y7J0RQ2YFuSbIybbGYCgDCI2bBvJLevIYuDJWd65G1GE02tvzq6XdTLyEUeZlE6ph46vxKSMy3E5rgdMdhjpJrlU7XS9Hq15Ver191Tt/SxCJmnPEqbkkQAIk1KCeYjOGsAQjDfqULdG9gyGL+v6k2fShNTQMxOzBLdOpzf5X3fBIzgkRGpUP6kgEsmQ7YNhVeZqxve9yH7jmBGQkDm1INHypQnODkP8fuJOC2+Rd7jdunq06zcNuv8Atl406CpOcTBIeSn+F7cQdgJ+R4cEldu3PcZq5mn6bUWPbbopp0VOmLBSYpyLjQOZQTu9PygSWzDnQe3ajeNQu64njP1IvuoozKyFNykqlxQZ0gcOsoz+Ef3EnAt1gdYMpgBG6O3lPq9xUi5ZRwyFcpcyytcy3EdRLIWOaw7Dbqb1JSfjDZg1KHmr0rVm3nM0e7l6rerE28/QqzmUM85wr6Z1R2BGqGfl+3yjGZozwQQCDEHMEYMpgF7V+4c7UL1krUtJvrHJeYacuGfGbMvLtujnNBR4Sspik+B4dsdJqT9GFx27SbipD9JqrAmJOYEFJ2KSoeVaFelSdxwZlwWluV6s9t6wxaV1PKmrbmCU0CvKHC2kbGHzuCf9fs8pvGdxcva9a1cFYcsWxXAageGs1pJPLk2jkpKVj+TxI2bBxeUkntGNkWTR7QojdLpqSYcUzNL/ACPuQzWs/wBhsGCW5EGCFf3FuZVfqbdh25JS9VqTiw5Upp8a2JFDahFcR5XURyV6TlmrIRvmY3VC1aye3VxrtS5JZtinVNYXSrlGZmFABITOvGBU5u1Hy/aQcIdb2b+KwWt93zVqhVTZFjLDtwOxTUqgIluQa9SlLAIC84R9OwDUcjUntE1i2LR7PpAkpEF2Ydguen3B/wBZhz9yz4CPCnd84kktyvXTa1GuejPUirM82WezSoZONrHlcbV6Vp8focsEL20Lkr1k1+WsS73FzUjNKDVs16BIeBISiXd2wUIhI3pyGaSDg1dtXtbyvdrx5XQx96m+b0vM6vV1Dv8A6+blshy+Xw7d8cDoweL4/pgwnF8f0wA3e3L5dG5vR6fd5GHX646ucNPS8ri5+ryx4YR1cMcFj//Z"},984:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJERjZGQzYyRTExOTExRTZBMzRBOUZFNURFMjg0Q0FGIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJERjZGQzYxRTExOTExRTZBMzRBOUZFNURFMjg0Q0FGIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAjQAAAgMAAwAAAAAAAAAAAAAAAwUABAYBAgcBAAMBAQAAAAAAAAAAAAAAAAABAgMEEAAABQIDBAYIAwkBAAAAAAABAgMEBQARITESQXETBlFhgTJCFJGhsSJSs3Q1wSMWYnKSM1ODJDQVBxEAAgIBBQABBQEAAAAAAAAAAAERAjEhQRIyA4FRcZGhIgT/2gAMAwEAAhEDEQA/APV+boRdlILvimBdk7WUMC5cdChjjqTPbKxrgHozrarOD1pDnZiGwVRkSwUAOeU4p2+mW6iBA4LRVNVwqbulAhgMBf3jWwDtqbPQ18qN2+xaGcGOnJRs5T8zFOXKwO2o45qDc5A+Lp6d9KJRXPjZp4KU5BgwBN4zU8zEObC2chjpv4Dj09A7d9NOSL0jVdQULCuJVyYhDAi1RDU7dm7qZc9uGq2Qdo0NwKlHZjck23PJxkTEFFGIQdI3NiB3BwUL75xztfHrz6KUbs05qUq4kSzv3uQ+pW+YNUsGd+zGfJ6r9RZwxKkVxFKlEZBNXBJMBDvgOww2y254WvU2L8W8bBeZjLtYxmzYEKTl9UAMmumOrjnHH803rtt7LUV/Y/XRJLqJ4L73H/Uo/MCqeDOnZF9WGdS3M0iggIJpJuVjOXJu4kTiGxHr6A/ClMIrg7WZxMzLUGoQ0MApxSY/nLeNyfaYw/CPr3UJbsL3Uca4Awc4VkVRk9T8zDucHDccRJfxp+0QDsxoaFS8aPqXAgzRs9FroKeZi3LlEWjsMQEBUAQIcQ8Xt30plFcONl9DtzXOEOs6io8nl2YLqC9MGBl1hOPEv+zq9O6iq3H63ylgzdWYEoAf8ozbhm/RYHLx2LpYgcE2PDUE4aVCXysawj6c6iyNvK8ONi9PxLSWXfO4gtpBoqckgx8Smgwl4yYdJrdu/NJxkr0orS65RkgEBC4ZVoc5MsRyoA0/LEIgkqzlZUwopKLJljW+IHVVMYNBxDPSA4h6RwqLPZG/lTDfwLJF46ZcyvXbRQUnCTpbSbYIcQblMG0o7QppSiLNqzaGD1k2n2qkrFpgnJJhqko4PEP9VPpv69+aTjRl2qr6rO6BRMUzaMyzc2UfK3/wWIh77g+YCJR8PUO8cKG9kKlElysCbyryU5oYO3Rve8yiVJIO4mTiB7pfxHbTiEJWdrpspzv3uR+pW+YNNYJv2YygGBWKIcwSCp2zVMBK0TJgo4MbYAfAPRtzyqbOdC/Osf0w0sh+oWgTEeY53LYuh5GmG5kgz1JAGzdnvwoWmg7rmpX4E8CIDNRwgNwFyjYf7gVTwZ+fZD1aGaoyMjMzYCSPI6W8s28bk/ENYAD4fbuqZ2Rq6JN2tiRFLzDuVd+YcWKUoaUEC9xInwh19I1SUGV7uz1AsH7uPdkdtD8NdP8AhMUcymDaUaGpFWzTlGoaMGcvIM5qJKCSyblE0pH3C5B1gIqk6tvXvvUTGjN1VWasvkrf+ha/+wjq8x3DaOLo4VsP5Onr72rHsp0J/wBHbczGNWYExoAdcl6/1G308e9h/wBfTlcL8XVhwrZ7b5Y1N8Gvj2P/2Q=="},985:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI1REVCQkVCRTExOTExRTZCMTJDQUExQjY1RjNEMEZFIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI1REVCQkVBRTExOTExRTZCMTJDQUExQjY1RjNEMEZFIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAgQAAAgICAwAAAAAAAAAAAAAABgcFCAADAQIEAQADAQAAAAAAAAAAAAAAAAAAAQIDEAABAgQEBAQCBwkAAAAAAAABAgMRBAUGACESBzFBIhNhMhQVUXGBoUJiIyQW8JHBUnIzU0UXEQEBAAMBAQEBAAAAAAAAAAAAAREhAjESQXH/2gAMAwEAAhEDEQA/ANV2bxbkUi/6w3I1cuSNPqc0hqnzDTS2S0y8pHaWUtpc0kCEQrUBziMC5zFgtudxKDfNDFQp8GZtkhuo05ZBdlniPKqHmQrihYyUPGIAizCSu67KDalEeq9YeDMs10ttganHnSOhppHFS1QyH0mABOASK50Teu/7h3FpA9b7fSZ2pSjCqQyhpTaWHH0oKC6UFaipJ6lRGfCAhhZa/EwA9xRpv25l6gE+7T2r4ACYcMTgEhobOWX+jpBzc67512iyDbBTIyAUptx9p3ymYRxX3DDsswjHq44abvSS3HojW7Vtyd72XNzE1O0pC2pi3nlaXERzcShsKg1MgeMHEwEeGEJrVKPbvUb+tpZBA90k09cQQoTKAUwPMcxDLA0vhwyu21GpN0XHuLuApMvRpSpzb9Kp7sFd0mZWW33UCOvUo/gt88lHkMGEfWsQrNytyqrfNZTMzaVytKlFK9upurJsHLuuQyU8Rz+yMhzJGvPOHisy9a3Z9ZbrNIWgKHROSJiG5pkkkNuQjpI+wvik/ERwh1zLDsbtO3L+rNC3IspxMvONVGUcuOlOQQT2n0KdUpPBD7aREkZOp8YHDZfVkxSv3lvSs3De0/J1FZRTaLNzEpT5FpXQOy4povKiOp1zTxPlGQ5ki+JiANWpY1rVmY6IjMlMBAkYSsuAYjKEOKhnkYfwwCUY7TXDWaNuBRxTnyz7hNy0jUGVAqadl3nkoUkpy6k6ypCuR8IguF3uI3cMJF/XLn/tJ4kjIj8wvCTLoPwQlIhmVCJjyJj+0cM5WCB1RIyhAjn44Dgh2/yv+2tRBPusiOPD8y3D54R9eMv5hx3cC6EpQStFVnlrRmlYQH1rJgYZaeofEQIw0TnQdCTDURpSYwMMvlHwwjw2sqQltxMIa0gas8oGMRh5VE3t8pKb8tpSiAn3aRSIxGZmWwIYRXw7r8tW2N1VVdy31Ikr6tuZekpqXeggzKJd1SGw7DihemLTo8p6TzGKZ835/ivE1LTEtMuSs6y5Lzsq4pqalnwQtpwHNK08vjlxxLV1dQNREFuKK0ttBCVFSyTpGlMFKUpRhBIzwHT/ANsNuaHY/tdyXqUt3DVJlmToVLXBxUu7MqDaelPmfguK1cG0x8Thseus6hU3LXqvb26lerNGmlStRlqvPFDg6kqSZlepp1H221wzH0jPAueGbU6Xbm9lBNboiGqXuDS20pn6e4rSH0cmnVARU0vPtPQingeYwM84arPs6i7X0NF734gLrpimh0JBS4tpxQOlKBwXMKT5l8G08+JwHbbqAan3nXLx3at2r1h0KcTVJRElLNiDUuyZlB7TYyP9Sjmr9wwsrxiIa/ylF+3KtbYcQKrPEtmKQfzCxHUM+J5fLBVczUOfYfZycpT7F43AHZapKaKadTdRQpttwdTkyEkRUscGjkjn1eWox76ynt7NqJy6UMXBQ3lJuOltlLMspZ7T7UdRQgKOlt2OaVDjwVlAhWDjvCvNghxO4VuodStp1usSaHWnElC0uiZQFpWk5pUCIYGnXhtuei/6imH6E73vL/8Ac9V7pq9QqMI/heq/m5dzhgRfP0/ur731YbJnV4/VgBHXB6T/ALPL6/0T3/XSMPVep998zcIaPwe//ij92OBf4//Z"},986:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIzMDlFNDgyRTExOTExRTZCOEZDRjREMkVGMzg4OUFCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIzMDlFNDgxRTExOTExRTZCOEZDRjREMkVGMzg4OUFCIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAjAAAAgIDAQAAAAAAAAAAAAAABQYEBwECAwABAAMBAQEAAAAAAAAAAAAAAAIDBAABBRAAAgAFAgQEBAMHBQEAAAAAAQIRAwQFBiESADFBE2EiMhRRQhUWgSMHcaHBUqIzQ5GxYjRUFxEAAgIBAwMEAwEAAAAAAAAAAQIAAzIRcRIxQVEhgUIEkcETM//aAAwDAQACEQMRAD8Adr7nGUW/Kq/29xmPJpa2dsppgUySiTGHaIhuI2+PHpJShUenaec1rBj694bvVktecWt8gx5BJvkoAXC3tBS5hGB/5w9D8mGh8FIxqPFsYx0Fg5L1kLG8Zt+PW4ZTliGUqEG22l1/MabzRnln/IflX5eZ8CssLnik5XWFHJpDt2d5XdM0oe5VvS0k+tkSzQSdplLKM0AqSV3NEHzNHgmoVUPnSCtzFxvF7Ljtye8u6wlrXVOvIR7rcz/DhteI2irMjvHjCLKcZomy/IJ02k3SzLo7csRMmK4iqug9TtCKJ8vM+E1z8zwX1lFScByadsptUjPbVT5JZJ0yZVUUsy6i0uYlT6mVVjBZniPWOXTjlbfyPFu/edsX+g5L+IiYm6fc9nQAqBX04AOjaTVjH8fjxVZidpNXkN5YMvFrbZ7tdsuygj20utqJlrofWWZprMj7fmd+aL05nwkNhYBF8SoVhSWbzEXJcsuuQ3F62pbtSFVpVLRLBlky29WvzTGh5mH7OXFVdQQaCTWWFjqZGx/ILnYbslxoWgSAs+mb+3NSMdjf7qw5cdsrDDQziOVOolipYrLldytmX44yyquTWU73eibyk7Jis7MBymKuseTjx4k5lAUb2lfAOQy+8Ss+v9yuWU1kuqfdKoJ06mo6ZdEVUcpugfneEWP4cuKaECqNO8nucljr2i/OlFWI08kDEHkD/HhsTPLBdu+IToTqY9APDjTRgwy4Vtsy2gShmGTLqaiTJqF5rNkznAgw+KhvKeh4XcoKnWNpYhhpIuRqhyi+llHkqqvZHUFzObbx2vEbQbMjvBpVFfuFAFZYhAY7jDnryA4ODNVUxBfXdojdIc/6eNOQrjRZslshZfMK2mUvrAwmqYEnrrwFmJ2h15DeZyeVDJLwwTc/vallX4DusSx8PDrxq8RtNZkd4JBbcGb4xYnnD8eDgTqJewzSx2w0Eh10Kk6EnoY8adhHHGb7isxZyU+o0wUnQR7i8h06cBZidoVeQ3lhZPZbTmP1CZZxKk5LbJryKiVMAVpqynZF3MP5tvkfpyPhJW5r01xMrsQWa6ZCVTOWfTO8mery6iWxSbJf1qynVWB5Q+HF0iI0mO5NcsuzuPO2wMCzF46chEx+A1400tPDsbt2MyqG5ZAqpebhOSnoKMHe0tpzKo0iRvWMXb5Rp+2K20vqF6CWVVhPVupihd7jV2rMq+5ULGXVyK2qAY6q4M1vIyjmkOY4oVQyAHxJ2Yq5I8xouNttP6g2v6va1SmyWlQLV0hIHcAGiOeoP+OZ+B8J1Y1HQ4x7KLRqMprYbDb8Nty5DkiLMvEwwt1vBBMt2GiLHTuH5m5KP39dzYeK9JkQVjk3WLdNeLpes2tVfcXJntXSFSQNFlIJ6wlqOg/eTw4oFQgeIkOWcE+ZAyxW+5Lq3c0NbUARB591hAaang68RtAsyO8dcVsVJhlvbJsgcy7hNQyqKhVoMA+uyGm6Y8NY6L/rxNa5sPFekprQVjk3WbXaTR5/Z2uVqHav1HL7dTbZj7oqCWCg6DUxKONDybwyk1HQ4mZgLRqMhErHUhk9mlONs2VXSAyTIh0YTwDLIPUQ5cU2YnaT15DeO9N7b77Xb9v9330//wBHvY9xo7d35Xe+PTdy4lOHy6e0oGfx6+8C/q53PuKn7nu/7bbPcbOxtiP+v2/693m5dIcM+rjA+zl3gv8AT3f910/a9x3NYey2d2ERHu93ydmHrjrGENeD+xhF0Zd45Xj2/wD9Ckb/AKB3fc0sO/3/AKj6hCGz8vufyR8I8Tr/AJ/L9Sls/j23n//Z"},987:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI3Q0JCQkE5RTExOTExRTZBNUQ3OTZDOTQ1MDZGOUM1IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI3Q0JCQkE4RTExOTExRTZBNUQ3OTZDOTQ1MDZGOUM1IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAhAAAAgIDAAAAAAAAAAAAAAAABQgABgQHCQEAAwEBAAAAAAAAAAAAAAAAAAECBAMQAAIABAQDAwcJCQAAAAAAAAECABEDBCESBQcxQQZRoRNhIhQ0FRcI8HGRMkJSIzU2YjNDg7MkVHQWEQEBAAMBAQEBAAAAAAAAAAAAAREhAjESQVH/2gAMAwEAAhEDEQA/AKDuTk94XUzZncDVb0sgOUzFxUEpich+13RLvOdKpc03azrZSXY02OSnMtghnhyhicugHTap/wA7pcgCPQ6Hl/hLDcKI5V7BACM7j0x7wOppEMTqt+XBwAAuakvniWqTUVm5NSna1qtJyrCk/ng5GAKESJB4kQjP500AOnNKAwAs7fD+UsWy0RgIjO4VRU3D6mDYH2vfFX+0CLlyBI4fTE1p5ulbvalT0CqTTALU6gDZZMSFPlxlPmIF5Pz03+ndK/06H9JYpkvojARHNwgPeL1Gizd21a+wkOJuHy8Z8Ilq58iqX70mtLkqkqfhMo84tM5POYM3bxlyEM4f3pv9O6XjP+zoYjh+6WGy30RgIq3WewW6OrdXa3qVjaWTWl7qF3cW7NeBGNGtXd0LL4ZkSrCYgdPqBdt8OW8Fu61EsNMqPSdalOnWuhUpMy4ydCkmU/aB4jCHLi5Odxt+j8S22tjRWyvGvEu7MeBdJQsqnhLVo/h1BTy4ZQymUuULKfis7R/iO211bVrLSrOpfG7v7ija24e0qopqV3FNAWPATbE8oC+a2hIQJSAEC1Wkq6pqrPnU1b68NABBkYrdODMsRgs+U8YTVJoV28YN1/0qpQTTV7E+IBJjO5p4NjIqvKAupo9ENmSAOf2r1gNZ1ZWpmofTboUZkqEncuSwXnm+iJaZRjboFtwul5k5hq1gcfq+spPEfKcEHV0emKZkgBANZNf21qlJiVlfXjorCZytcviO6JaYL7dUZbg9LuWUsdYsh4JP4gIroxYr93Dj2wQupo9EUzpACEahUqrqGsU1QPRe/uDVJAJBW6qGSOcULTkZRGNtvPWOcf1n7dtTO4XTU1Kn2vZSIOY+tIQCefGRMOOfV0eY5p8+6KZU87y90AIJrUva2qcfzG6+tP8AyKnd2eWJavwS26l7wOlpZfziy4Tn60nGfdBHOv/Z"},988:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI5RDEyQkExRTExOTExRTY5RTZERkY3QzJBN0ZDMkNEIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI5RDEyQkEwRTExOTExRTY5RTZERkY3QzJBN0ZDMkNEIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAiAABAQEBAQAAAAAAAAAAAAAABwQABQYBAAIDAQEAAAAAAAAAAAAAAAIGAAMFAQQQAAECBAIGCAQHAQAAAAAAAAECAwARBAUhEjFBUSITBmFxMrIjM3MUoYIVNYGxwVIkNEQHEQACAgEDAwQDAQAAAAAAAAAAAXECAxExMiEiBEFhEjNRkSMF/9oADAMBAAIRAxEAPwD3t/UBf7icv+p8KxOPiq/SNvDwUIWc/wBlpZyXykU70uyUqkkYSJBlPqi5blfoPFtSn6dS4DyW+6IwL7sZ8a7VBTlTsECGCnMmb67cp6ql6XUXDG5hXYoQtZ1/S0s49VPguA6cp/KLkitrtHu2/bqX0W+6IX77sZsfFQUwIYKcxOFd+uE1SSmpqAZapOGfXON3DwUIXM/2WlnEfKOA4ScJHd6JbY9CONdB+txBt9KRgOC3IfKIXL7sYcfFQUQIYLcxVCE3e5NqJUPdvkFAkUniKBSVHUdchDBhr2VhC/np3uWcCqJ4boOnKqePRFyXUH4j/bPttJ6LfdELd+TGCmyKYEILL1yBzRV3euqWGWOC/UOuNEuyJStZUkkZdhjaxebjrRJ67fgzb+Ld2b9znO/8z5xU0tIYp5kEDx9ol+2OrzsWuur/AEVLxMmvoe4pefuX6enbpnS9xadIack0ojM3uqkdeIjOt4129V6l6/0cS6densV03PdhqalimbL3FqFpbbm0oCalZRMxx+JdLUOnn47NJa9fY9DHmPaaIQE6htZqqjdl4zuKt0eYdsbtV0UCtZdzlltkSkXe2lSs38trJl0S4iZ4npgcvBww8H2VlC/GIMxohARqN+rqMJkPOzV85liY3qrooFe67nLK7A6lN7t7at4GqZkBtzgAz6IDNwcMLB9lZQxxiDMaIQDq0hdZUKO4kvPSB04OK0Qx1S0UC5ZLVyXWR5Avtt4ScuapYClHtKBcGkfhAZ12WhluJL51lDHC+bxohAJq31GsqSsBa/cO5CoAkycUJQy02UIX7buS7ltxr67QTbTm9yyBKYx4o1HZAZ+FoYeHmpQzHNPX8IXTcNvdPwiEAWp/uV2mXGd0eortQy12UIwLbuS3l371aNMvds6Oz5g0QGfhaGHh5qUf/9k="},989:function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJCQ0QwRkQ4RTExOTExRTZCRTQ0REM1MkQ4RjUxQzI3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJCQ0QwRkQ3RTExOTExRTZCRTQ0REM1MkQ4RjUxQzI3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAjQABAAMBAQAAAAAAAAAAAAAABwAEBQYDAQACAwEBAAAAAAAAAAAAAAACBgADBQEEEAABAwIDBAYHCQEAAAAAAAABEQIDAAQhEgUxQRMGYXEiMjMUUaFCUrIjFfCBsYJDY3M0BzURAAIBAwMBBwUAAAAAAAAAAAABAnEyAxEhMQRBYbESIiMzUZFyEwX/2gAMAwEAAhEDEQA/AO35hdl5g1I5R/buA7E4/Ndv6qxM17qM2BL9caIzpspt5k7ha5AAm0Hb1VS3sWabjzprW/TrXAeDH8IrfhahXyXOpZyt9AogQQ5jY86/qWGy6nK9BldWHmvdWMuB+3Gi8DMuYJG2UsgOwEEAbARtFUtlil6h60z/AJtp/DH8IpghwhZyXOpZogAW5gdm17UFcjW3NwCBuSRy9a1hZr3VjHg+ONEVJGsZZOBxGR2aMbwinHprzs6uRs05Pp9qgQcKPD8opjhahdncyxRAhHr8Rbq181TJG+6lcrAjmEyOzNJd7J3pS/ml65VZv4J+hURl3ETi2TiHEg4Dq9NUt7BqQ02ASxth+0z4RTHjtVBfnyz3owTgtS5Q1y41C7mjii4c0sj2EyIS1ziQoTprFy9Flc21pz9TSh1UFFLuMw8hc0mVckIiQq3i4k7vZrj6HLpwvuWvq8enbqb8P+mcrwMbbPdccWD5L0heRmj7LkO/EVox6mKWj7Ch/wA7K99t+8u2n+gcv3VzBbRccS3L2xxB0LmhXHKFJ3V2PVwb0An0GSKbem3edJXpPESoQC5bRvm7kiNCZ5e28p+o4qprCk93UaYt+VURd0IButaYHOLj5yHJl2eI1cT00WK9VQPUfHL8X4DPW2LBKhAPuG57y4TEieVXHb4h3msFvdjRDhURY0CRjdf05ju0DdQlB73EABB6Pwo8N6qgc/xyo/AaK2xZJUID1zb277yc5GhZZSA44+Idgpck3q6jFFvRURo6WIPqun8OMNS4hOfAPPbG1N2GyiwP3I1RVlb8kqMUKYTCJUIEU8zhczl7Q+TjSZXOAJPbKj7qWpcurGCPCoXdDfGdWtFjbmE8QCKMeINx9FHgvjVAZrHRiccy7/VTEYJO10+qoQHpl8zd95OLIqJ75276WpcurGCPCoXNEX6rp+1PMxd1E74+xqzBfGqAzWOh/9k="},990:function(e){e.exports=JSON.parse('{"items":[{"blendPic":"blend01.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend02.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend03.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend04.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend05.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend06.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend07.jpg","blendWidth":400,"blendHeight":400},{"blendPic":"blend08.jpg","blendWidth":400,"blendHeight":400}]}')},991:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),a(36)),c=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.border_size=35,t.border_fade=30,t.border_angle=90,t.border_distance=4,t.shadow_color={r:0,g:0,b:0},t.background_color={r:255,g:255,b:255,a:255},t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t.state.isOutMode=!0,t.handleOuterColor=t.handleOuterColor.bind(t),t.handleInnerColor=t.handleInnerColor.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),o(a,[{key:"afterfold",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.forceUpdate(),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"initUnfoldUI",value:function(){this.border_size=35,this.refs.borderSizeRange.setDefault(this.border_size),this.border_fade=30,this.refs.fadeRange.setDefault(this.border_fade),this.border_angle=90,this.refs.angleRange.setDefault(this.border_angle),this.border_distance=4,this.refs.distanceRange.setDefault(this.border_distance),this.refs.colorpicker.setColor("#000000"),this.refs.bgColorpicker.setColor("#ffffff"),this.refs.colorpicker.state.hideModeActive=!1,this.refs.bgColorpicker.state.hideModeActive=!1,this.shadow_color={r:0,g:0,b:0},this.background_color={r:255,g:255,b:255,a:255},this.setState({})}},{key:"afterUnfold",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this;setTimeout((function(){e.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"handleBorderSizeChange",value:function(e){this.border_size=this.refs.borderSizeRange.val(),this.drawCanvas()}},{key:"handleBorderSizeChanged",value:function(e){this.handleBorderSizeChange(e)}},{key:"handleFadeChange",value:function(e){this.border_fade=this.refs.fadeRange.val(),this.drawCanvas()}},{key:"handleFadeChanged",value:function(e){this.handleFadeChange(e)}},{key:"handleAngleChange",value:function(e){this.border_angle=this.refs.angleRange.val(),this.drawCanvas()}},{key:"handleAngleChanged",value:function(e){this.handleAngleChange(e)}},{key:"handleDistanceChange",value:function(e){this.border_distance=this.refs.distanceRange.val(),this.drawCanvas()}},{key:"handleDistanceChanged",value:function(e){this.handleDistanceChange(e)}},{key:"shadowColorChange",value:function(e,t){this.shadow_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"backgroundColorChange",value:function(e,t){this.background_color=Fotor.common.utils.Color.colorHexToRgba(e),this.background_color.a=Math.round(255*this.background_color.a),this.drawCanvas()}},{key:"drawCanvas",value:function(){var e=this.border_size/Fotor.mainCanvas.documentWidth,t=this.border_distance/Fotor.mainCanvas.documentWidth;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.borderShadow(e,this.border_fade,this.border_angle,t,this.shadow_color.r,this.shadow_color.g,this.shadow_color.b,this.background_color.r,this.background_color.g,this.background_color.b,this.background_color.a),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"applyHandler",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_border_shadow,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner clearfix"},e.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_border_shadow_borderSize,e.createElement("span",{className:"pull-right",ref:"borderSizeSpan"},"35")),e.createElement(Fotor.ui.InputRange,{ref:"borderSizeRange",max:"100",min:"0",default:"35",className:"input-range-grey",bindEle:this.refs.borderSizeSpan,onChange:this.handleBorderSizeChange.bind(this),onChanged:this.handleBorderSizeChanged.bind(this)}),e.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_border_shadow_fade,e.createElement("span",{className:"pull-right"},"%"),e.createElement("span",{className:"pull-right",ref:"fadeSpan"},"30")),e.createElement(Fotor.ui.InputRange,{ref:"fadeRange",max:"100",min:"0",default:"30",className:"input-range-grey",bindEle:this.refs.fadeSpan,onChange:this.handleFadeChange.bind(this),onChanged:this.handleFadeChanged.bind(this)}),e.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_border_shadow_Angle,e.createElement("span",{className:"pull-right"},""),e.createElement("span",{className:"pull-right",ref:"angleSpan"},"90")),e.createElement(Fotor.ui.InputRange,{ref:"angleRange",max:"360",min:"0",default:"90",className:"input-range-grey",bindEle:this.refs.angleSpan,onChange:this.handleAngleChange.bind(this),onChanged:this.handleAngleChanged.bind(this)}),e.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_border_shadow_Distance,e.createElement("span",{className:"pull-right",ref:"distanceSpan"},"4")),e.createElement(Fotor.ui.InputRange,{ref:"distanceRange",max:"30",min:"0",default:"4",className:"input-range-grey",bindEle:this.refs.distanceSpan,onChange:this.handleDistanceChange.bind(this),onChanged:this.handleDistanceChanged.bind(this)}),e.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix",style:{padding:"20px 0 8px 0"}},e.createElement("li",{onClick:this.handleOuterColor,className:this.state.isOutMode?"active":""},Fotor.globalConfig.lang.editor_workspace_border_shadow_ShadowColor),e.createElement("li",{onClick:this.handleInnerColor,className:this.state.isOutMode?"":"active"},Fotor.globalConfig.lang.editor_workspace_border_shadow_BackgroundColor)),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"block":"none"}},e.createElement(l,{ref:"colorpicker",hideFavor:!0,defaultColor:"#000000",isEditor:!0,hideAlphaBar:!0,showTitle:!0,target:Fotor.mainCanvas,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.shadowColorChange.bind(this)})),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"none":"block"}},e.createElement(l,{ref:"bgColorpicker",hideFavor:!0,defaultColor:"#ffffff",isEditor:!0,hideAlphaBar:!0,showTitle:!0,target:Fotor.mainCanvas,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.backgroundColorChange.bind(this)})),e.createElement("div",{className:"paddingT15"},e.createElement(Fotor.ui.Checkbox,{text:Fotor.globalConfig.lang.editor_border_shadow_transparent,onClick:this.handleTransparentBorder.bind(this)})),e.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},e.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),e.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleTransparentBorder",value:function(e){var t="rgba(0,0,0,0)";if(!e)t=this.refs.bgColorpicker.getColor();this.backgroundColorChange(t,!1)}},{key:"scrollerFix",value:function(){var e=n.findDOMNode(this.refs.toolTitle),t=n.findDOMNode(this.refs.toolContent),o=this.props.scroller;i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerFix",this).call(this,e,t,o)}},{key:"scrollerUpFix",value:function(){var e=this.props.scroller;i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerUpFix",this).call(this,e)}},{key:"handleOuterColor",value:function(){this.setState({isOutMode:!0})}},{key:"handleInnerColor",value:function(){this.setState({isOutMode:!1})}}]),a}(s.default);t.default=c}).call(this,a(0),a(18))},992:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),a(36)),c=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.border_outSize=25,t.border_inSize=40,t.outer_color={r:0,g:0,b:0},t.inner_color={r:255,g:255,b:255},t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t.state.isOutMode=!0,t.handleOuterColor=t.handleOuterColor.bind(t),t.handleInnerColor=t.handleInnerColor.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),o(a,[{key:"afterfold",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.forceUpdate(),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"initUnfoldUI",value:function(){this.border_outSize=25,this.refs.outSizeRange.setDefault(this.border_outSize),this.border_inSize=40,this.refs.inSizeRange.setDefault(this.border_inSize),this.refs.colorpicker.setColor("#000000"),this.refs.bgColorpicker.setColor("#ffffff"),this.refs.colorpicker.state.hideModeActive=!1,this.refs.bgColorpicker.state.hideModeActive=!1,this.outer_color={r:0,g:0,b:0},this.inner_color={r:255,g:255,b:255,a:255},this.setState({})}},{key:"afterUnfold",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this;setTimeout((function(){e.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"handleBorderSizeChange",value:function(){this.border_outSize=this.refs.outSizeRange.val(),this.drawCanvas()}},{key:"handleBorderSizeChanged",value:function(){this.handleBorderSizeChange()}},{key:"handleInnerSizeChange",value:function(){this.border_inSize=this.refs.inSizeRange.val(),this.drawCanvas()}},{key:"handleInnerSizeChanged",value:function(){this.handleInnerSizeChange()}},{key:"outerColorChange",value:function(e,t){this.outer_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"innerColorChange",value:function(e,t){this.inner_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){var e=this.border_outSize/Fotor.mainCanvas.documentWidth,t=this.border_inSize/Fotor.mainCanvas.documentWidth;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.galleryFrame(e,t,this.outer_color.r,this.outer_color.g,this.outer_color.b,this.inner_color.r,this.inner_color.g,this.inner_color.b),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"applyHandler",value:function(){i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_border_galleryFrame,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_outerSize,e.createElement("span",{className:"pull-right",ref:"outSizeSpan"},"25")),e.createElement(Fotor.ui.InputRange,{ref:"outSizeRange",className:"input-range-grey",max:"100",min:"0",default:"25",bindEle:this.refs.outSizeSpan,onChange:this.handleBorderSizeChange.bind(this),onChanged:this.handleBorderSizeChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_innerSize,e.createElement("span",{className:"pull-right",ref:"inSizeSpan"},"40")),e.createElement(Fotor.ui.InputRange,{ref:"inSizeRange",className:"input-range-grey",max:"100",min:"0",default:"40",bindEle:this.refs.inSizeSpan,onChange:this.handleInnerSizeChange.bind(this),onChanged:this.handleInnerSizeChanged.bind(this)}),e.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix",style:{padding:"20px 0 8px 0"}},e.createElement("li",{onClick:this.handleOuterColor,className:this.state.isOutMode?"active":""},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_outerColor),e.createElement("li",{onClick:this.handleInnerColor,className:this.state.isOutMode?"":"active"},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_innerColor)),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"block":"none"}},e.createElement(l,{ref:"colorpicker",hideFavor:!0,defaultColor:"#000000",target:Fotor.mainCanvas,isEditor:!0,hideAlphaBar:!0,showTitle:!0,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.outerColorChange.bind(this)})),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"none":"block"}},e.createElement(l,{ref:"bgColorpicker",hideFavor:!0,defaultColor:"#ffffff",isEditor:!0,hideAlphaBar:!0,showTitle:!0,target:Fotor.mainCanvas,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.innerColorChange.bind(this)})),e.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},e.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),e.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"scrollerFix",value:function(){var e=n.findDOMNode(this.refs.toolTitle),t=n.findDOMNode(this.refs.toolContent),o=this.props.scroller;i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerFix",this).call(this,e,t,o)}},{key:"scrollerUpFix",value:function(){var e=this.props.scroller;i(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerUpFix",this).call(this,e)}},{key:"handleOuterColor",value:function(){this.setState({isOutMode:!0})}},{key:"handleInnerColor",value:function(){this.setState({isOutMode:!1})}}]),a}(s.default);t.default=c}).call(this,a(0),a(18))},993:function(e,t,a){"use strict";(function(e,n,o){var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var r=a(72),l=a(8),c=(a(149),a(36)),h=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.border_outerSize=40,t.border_innerSize=0,t.border_roundCorners=0,t.border_CaptionSize=160,t.saveDocumentHeight=0,t.outer_color={r:255,g:255,b:255},t.inner_color={r:0,g:0,b:0},t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t.state.isOutMode=!0,t.handleOuterColor=t.handleOuterColor.bind(t),t.handleInnerColor=t.handleInnerColor.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),i(a,[{key:"afterfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),0!=this.saveDocumentHeight&&(Fotor.mainCanvas.resetCanvasSize(Fotor.mainCanvas.documentWidth,this.saveDocumentHeight),Fotor.mainCanvas.editorZoomFit()),this.forceUpdate(),Fotor.mainCanvas.trigger(l.default.ENGINELAYER_CHANGE)}},{key:"initUnfoldUI",value:function(){this.border_outerSize=40,this.refs.outerSizeRange.setDefault(this.border_outerSize),this.border_innerSize=0,this.refs.innerSizeRange.setDefault(this.border_innerSize),this.border_roundCorners=0,this.refs.roundCornersRange.setDefault(this.border_roundCorners),this.border_CaptionSize=160,this.refs.captionSizeRange.setDefault(this.border_CaptionSize),this.outer_color={r:255,g:255,b:255},this.inner_color={r:0,g:0,b:0},this.refs.outerColorpicker.state.hideModeActive=!1,this.refs.innerColorpicker.state.hideModeActive=!1,this.refs.outerColorpicker.setColor("#ffffff"),this.refs.innerColorpicker.setColor("#000000"),this.setState({})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this;setTimeout((function(){e.saveDocumentHeight=Fotor.mainCanvas.documentHeight,e.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"handleOuterSizeChange",value:function(){this.border_outerSize=this.refs.outerSizeRange.val(),this.drawCanvas()}},{key:"handleOuterSizeChanged",value:function(){this.handleOuterSizeChange()}},{key:"handleInnerSizeChange",value:function(){this.border_innerSize=this.refs.innerSizeRange.val(),this.drawCanvas()}},{key:"handleInnerSizeChanged",value:function(){this.handleInnerSizeChange()}},{key:"handleCornersChange",value:function(){this.border_roundCorners=this.refs.roundCornersRange.val(),this.drawCanvas()}},{key:"handleCornersChanged",value:function(){this.handleCornersChange()}},{key:"handleCaptionChange",value:function(){this.border_CaptionSize=this.refs.captionSizeRange.val(),this.drawCanvas()}},{key:"handleCaptionChanged",value:function(){this.handleCaptionChange()}},{key:"outerColorChange",value:function(e,t){this.outer_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"innerColorChange",value:function(e,t){this.inner_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){var t=this.border_outerSize/Fotor.mainCanvas.documentWidth,a=this.border_innerSize/Fotor.mainCanvas.documentWidth,n=this.border_roundCorners/Fotor.mainCanvas.documentWidth,o=this.border_CaptionSize/Fotor.mainCanvas.documentWidth;Fotor.mainCanvas.fotorEngine.process_polaroid(Fotor.EngineAction.polaroid(t,a,n,this.outer_color.r,this.outer_color.g,this.outer_color.b,this.inner_color.r,this.inner_color.g,this.inner_color.b),[this.outer_color.r,this.outer_color.g,this.outer_color.b],o);var i=Math.round(Fotor.mainCanvas.editorCanvasEle.attr("height")*Fotor.mainCanvas.editorCanvasScale);Fotor.mainCanvas.resetCanvasSize(Fotor.mainCanvas.documentWidth,i),i*Fotor.mainCanvas.getZoom()>e("#canvas").width()||Fotor.mainCanvas.documentWidth*Fotor.mainCanvas.getZoom()>e("#canvas").height()?Fotor.mainCanvas.zoomFit():Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!1,!1,!0),Fotor.mainCanvas.trigger(l.default.ENGINELAYER_CHANGE)}},{key:"applyHandler",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),this.saveDocumentHeight=0,Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_border_POLAROID,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_OuterSize,n.createElement("span",{className:"pull-right",ref:"outerSizeSpan"},"40")),n.createElement(Fotor.ui.InputRange,{ref:"outerSizeRange",max:"100",min:"0",default:"40",className:"input-range-grey",bindEle:this.refs.outerSizeSpan,onChange:this.handleOuterSizeChange.bind(this),onChanged:this.handleOuterSizeChanged.bind(this)}),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_InnerSize,n.createElement("span",{className:"pull-right",ref:"innerSizeSpan"},"0")),n.createElement(Fotor.ui.InputRange,{ref:"innerSizeRange",max:"100",min:"0",default:"0",className:"input-range-grey",bindEle:this.refs.innerSizeSpan,onChange:this.handleInnerSizeChange.bind(this),onChanged:this.handleInnerSizeChanged.bind(this)}),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_RoundCorners,n.createElement("span",{className:"pull-right",ref:"roundCornersSpan"},"0")),n.createElement(Fotor.ui.InputRange,{ref:"roundCornersRange",max:"200",min:"0",default:"0",className:"input-range-grey",bindEle:this.refs.roundCornersSpan,onChange:this.handleCornersChange.bind(this),onChanged:this.handleCornersChanged.bind(this)}),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_CaptionSize,n.createElement("span",{className:"pull-right",ref:"captionSizeSpan"},"160")),n.createElement(Fotor.ui.InputRange,{ref:"captionSizeRange",max:"200",min:"0",default:"160",className:"input-range-grey",bindEle:this.refs.captionSizeSpan,onChange:this.handleCaptionChange.bind(this),onChanged:this.handleCaptionChanged.bind(this)}),n.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix",style:{padding:"20px 0 8px 0"}},n.createElement("li",{onClick:this.handleOuterColor,className:this.state.isOutMode?"active":""},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_OuterColor),n.createElement("li",{onClick:this.handleInnerColor,className:this.state.isOutMode?"":"active"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_InnerColor)),n.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"block":"none"}},n.createElement(c,{ref:"outerColorpicker",hideFavor:!0,hideMode:!0,hideAlphaBar:!0,defaultColor:"#ffffff",isEditor:!0,showTitle:!0,target:Fotor.mainCanvas,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.outerColorChange.bind(this)})),n.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"none":"block"}},n.createElement(c,{ref:"innerColorpicker",hideFavor:!0,defaultColor:"#000000",isEditor:!0,target:Fotor.mainCanvas,hideMode:!0,showTitle:!0,hideAlphaBar:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.innerColorChange.bind(this)})),n.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"scrollerFix",value:function(){var e=o.findDOMNode(this.refs.toolTitle),t=o.findDOMNode(this.refs.toolContent),n=this.props.scroller;s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerFix",this).call(this,e,t,n)}},{key:"scrollerUpFix",value:function(){var e=this.props.scroller;s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerUpFix",this).call(this,e)}},{key:"handleOuterColor",value:function(){this.setState({isOutMode:!0})}},{key:"handleInnerColor",value:function(){this.setState({isOutMode:!1})}}]),a}(r.default);t.default=h}).call(this,a(2),a(0),a(18))},994:function(e,t,a){"use strict";(function(e){var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=a(72),s=(a(149),a(808)),r=a(153),l=a(15),c=function(t){function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.state.groupData=null,e.state.deEffect=!1,e.state.thumbImg=null,e.state.isSmallPic=!1,e.hadfoldItem=!0,e.state.data=[],e.getData=e.getData.bind(e),e.refreshFavorite=e.refreshFavorite.bind(e),Fotor.loginStateManager.on(l.default.LOGIN,e.refreshFavorite),Fotor.favoriteManager.on(r.default.UPDATE,e.getData),Fotor.favoriteManager.on(r.default.UPDATE,e.getData.bind(e)),e.getData(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"componentWillUnmount",value:function(){Fotor.loginStateManager.off(l.default.LOGIN,this.refreshFavorite),Fotor.favoriteManager.off(r.default.UPDATE,this.getData)}},{key:"getData",value:function(){this.state.data=Fotor.favoriteManager.get("border"),this.mounted&&this.forceUpdate()}},{key:"refreshFavorite",value:function(){Fotor.favoriteManager.fetch()}},{key:"applyHandler",value:function(){o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this);for(var e=this.state.data.length,t=0;t<e;t++)this.refs["borderItem_"+t].state.beSelected&&this.refs["borderItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)if(this.refs["borderItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)this.refs["borderItem_"+t]&&this.refs["borderItem_"+t].cancelHandler();this.state.isSmallPic=!1,o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.mounted&&this.setState({doBorder:!1})}},{key:"afterUnfold",value:function(){this.mounted&&this.setState({doBorder:!0}),Fotor.progressBar.hide()}},{key:"loadTempHistoryData",value:function(e){for(var t=this.state.data.length,a=0;a<t;a++)this.refs["borderItem_"+a]&&this.refs["borderItem_"+a].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}},{key:"doItemUnFold",value:function(e){for(var t=this.state.data.length,a=0;a<t;a++)null==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["borderItem_"+a]!=e&&this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a].setState({beSelected:!1}):this.refs["borderItem_"+a]!=e||this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a]==e&&this.refs["borderItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic())}},{key:"render",value:function(){var t=this,a=!1;return this.state.data.length>0&&(a=!0),e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.className,autoActive:!1,childId:"border-favorite-list",isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_favorite_border,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},a&&this.state.data.map((function(a,n){return e.createElement(s,{ref:"borderItem_"+n,inner:"FavorFolder",unFoldFun:t.doItemUnFold.bind(t),data:a,doBorder:t.state.doBorder,vip:a.isVip,key:a.name,scroller:t.props.scroller})})),!a&&e.createElement("div",{className:"editor-favor-empty"},Fotor.globalConfig.lang.editor_workspace_favorite_notice)))}},{key:"handleToolFolderClick",value:function(){if(Fotor.loginStateManager.isLogin())o(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"handleToolFolderClick",this).call(this);else{Fotor.loginStateManager.addAction(this.handleToolFolderClick.bind(this));var e='<div class="login-pop-notice login-pop-notice-'+FotorUtils.I18N.getLocale().toString()+' text-left clearfix"><div class="login-pop-sub-title">'+Fotor.globalConfig.lang.design_home_signup_popUps_signedSubNoticeTtitle+'</div> <div class="clearfix"><ul class="login-list clearfix"><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_4+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_5+'</li><li class="focus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_6+'</li></ul></div><div class="login-pop-sub-title clearfix marginT30">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_6+"</div> </div>";FotorUser.show(e,!1)}}}]),a}(i.default);t.default=c}).call(this,a(0))},995:function(e,t,a){(function(t,n){var o=w(a(996)),i=w(a(998)),s=w(a(1e3)),r=w(a(1002)),l=w(a(1004)),c=w(a(1006)),h=w(a(1008)),d=w(a(1014)),u=w(a(1016)),v=w(a(1018)),p=w(a(1020)),f=w(a(1022)),m=w(a(1024)),g=w(a(1026)),C=w(a(1028)),b=w(a(1030)),y=w(a(7)),_=w(a(8)),F=w(a(16)),E=w(a(760));function w(e){return e&&e.__esModule?e:{default:e}}var A=a(21).default,x=a(6)({displayName:"BeautyList",mixins:[Fotor.mixin],getInitialState:function(){return{canvasImg:null,scroller:null,langChange:!1}},componentDidMount:function(){this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.mainCanvas?this.init():Fotor.app.on(y.default.APP_INIT,this.init)},init:function(){Fotor.mainCanvas.on(_.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.on(_.default.EXIT_EDITOR_MODE,this.update),Fotor.app.on(F.default.LANGUAGE_CHANGE,this.updateLang)},update:function(){this.forceUpdate()},updateLang:function(){var e=this;this.setState({langChange:!0}),setTimeout((function(){e.setState({langChange:!1})}),500)},componentWillUnmount:function(){Fotor.app.off(y.default.APP_INIT,this.init),Fotor.mainCanvas.off(_.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(_.default.EXIT_EDITOR_MODE,this.update),Fotor.app.off(F.default.LANGUAGE_CHANGE,this.updateLang)},handleScroll:function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),Fotor.app.trigger(F.default.HIDE_PALETTE)},render:function(){return n.createElement("div",{id:"toolbar"},n.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),n.createElement("div",{className:"toolbar-loading"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),n.createElement(E.default,{ref:"helpTip"}),n.createElement("div",{className:"toolbar"},n.createElement("div",{className:"toolbar-list"},n.createElement(A,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},n.createElement("div",{className:"toolbar-title marginT0"},Fotor.globalConfig.lang.editor_workspace_material_beauty_face),n.createElement(s.default,{toolName:"beautyBlemishFix",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(o.default,{toolName:"beautySmoothing",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(i.default,{toolName:"beautyWrinkles",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(r.default,{toolName:"beautyBlush",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(l.default,{toolName:"beautyWeight",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(c.default,{toolName:"reshape",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(h.default,{toolName:"clone",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.editor_workspace_material_beauty_eye_shadow),n.createElement(d.default,{toolName:"eyeShadow",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(u.default,{toolName:"eyeLiner",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(v.default,{toolName:"mascara",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(p.default,{toolName:"eyeBrowPecil",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(f.default,{toolName:"eyeTint",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(m.default,{toolName:"eyePop",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(g.default,{toolName:"redEyeRemove",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.editor_workspace_material_beauty_mouth),n.createElement(C.default,{toolName:"lipTint",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement(b.default,{toolName:"teethWhite",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),n.createElement("div",{style:{height:"50px"}},"")))))},showHelpTip:function(e,t,a,n){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,n)},hideHelpTip:function(){this.refs.helpTip&&this.refs.helpTip.hide()}});e.exports=x}).call(this,a(2),a(0))},996:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=66.6,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(e=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=120*e,this.refs.brushSize.setDefault(120),this.beauty_opacity=66.6,this.refs.recovered.setDefault(66.66),this.brushPoints=[],this.hadchanged=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.7};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.smoothing(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.smoothing(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_SMOOTHING.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_SMOOTHING_tip,helpTipGif:a(997),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"10",default:"120",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_YearsRecovered,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"20"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",className:"input-range-grey",max:"100",min:"1",default:"66",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},997:function(e,t,a){e.exports=a.p+"images/smooth8c20d2cd401b617e47a5616de441c9e7.gif"},998:function(e,t,a){"use strict";(function(e,n){var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function e(t,a,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,a);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0};Object.defineProperty(t,"__esModule",{value:!0});var s=a(72),r=a(8),l=(a(149),function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=66.6,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),o(s,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(r.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(e=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=30*e,this.refs.brushSize.setDefault(30),this.beauty_opacity=66.6,this.refs.recovered.setDefault(67),this.brushPoints=[],this.hadchanged=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"afterUnfold",this).call(this),setTimeout((function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()}),200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={opacity:.7};a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),null!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(r.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,n=Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[5],i=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],s=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],r=!1,l=!1;return this.canvas_Point.x>n&&this.canvas_Point.x<n+i&&(t=(this.canvas_Point.x-n)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),r=!0),this.canvas_Point.y>o&&this.canvas_Point.y<o+s&&(a=(this.canvas_Point.y-o)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!r||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.wrinkles(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(r.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={brushPoints:[]};return e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.save(),n.drawImage(this.savedOrgImg,0,0),n.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,n,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(i(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.wrinkles(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_WRINKLES.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_WRINKLES_tip,helpTipGif:a(999),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},n.createElement("div",{className:"editor-folder-inner"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"space-34"},n.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),n.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,n.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"2",default:"30",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_YearsRecovered,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"66"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"66",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),n.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),s}(s.default));t.default=l}).call(this,a(2),a(0))},999:function(e,t,a){e.exports=a.p+"images/wrinkles3f113d87a1078350b6211e7de030f7c4.gif"}}]);